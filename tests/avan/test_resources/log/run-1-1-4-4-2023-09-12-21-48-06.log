WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
Instructions for updating:
non-resource variables are not supported in the long term
 test_xt_with_tune.py:59: ExperimentalWarning:BoTorchSampler is experimental (supported from v2.4.0). The interface can change in the future.
2023-09-12 21:48:17,729	INFO worker.py:1515 -- Started a local Ray instance. View the dashboard at [1m[32mhttp://127.0.0.1:8265 [39m[22m
2023-09-12 21:48:19,750	WARNING function_trainable.py:620 -- Function checkpointing is disabled. This may result in unexpected behavior when using checkpointing features or certain schedulers. To enable, set the train function arguments to be `func(config, checkpoint_dir=None)`.
2023-09-12 21:48:19,812	WARNING trial_runner.py:1583 -- You are trying to access _search_alg interface of TrialRunner in TrialScheduler, which is being restricted. If you believe it is reasonable for your scheduler to access this TrialRunner API, please reach out to Ray team on GitHub. A more strict API access pattern would be enforced starting 1.12s.0
[2m[36m(train_xt pid=78524)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78524)[0m Instructions for updating:
[2m[36m(train_xt pid=78524)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78524)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:34: 
[2m[36m(train_xt pid=78524)[0m **************************************************
[2m[36m(train_xt pid=78524)[0m  XT start work...
[2m[36m(train_xt pid=78524)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945265085971088.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=78524)[0m **************************************************
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:35: init learner with:
[2m[36m(train_xt pid=78524)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=78524)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=78524)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=78524)[0m               'agent_num': 1},
[2m[36m(train_xt pid=78524)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=78524)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=78524)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=78524)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=78524)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=78524)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=78524)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=78524)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=78524)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=78524)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=78524)[0m                           'instance_num': 5,
[2m[36m(train_xt pid=78524)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=78524)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=78524)[0m                           'save_model': True,
[2m[36m(train_xt pid=78524)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=78524)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=78524)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78524)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=78524)[0m                                    'model_config': {'LR': 0.001500138,
[2m[36m(train_xt pid=78524)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=78524)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=78524)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=78524)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=78524)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78524)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=78524)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=78524)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=78524)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=78524)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=78524)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78524)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=78524)[0m                                                 84,
[2m[36m(train_xt pid=78524)[0m                                                 4],
[2m[36m(train_xt pid=78524)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=78524)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=78524)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=78524)[0m              'id': 'ImpalaCnnOpt_now_time_16945265085971088',
[2m[36m(train_xt pid=78524)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=78524)[0m 'env_num': 5,
[2m[36m(train_xt pid=78524)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=78524)[0m                         'size': 2,
[2m[36m(train_xt pid=78524)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=78524)[0m                         'vision': False,
[2m[36m(train_xt pid=78524)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=78524)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=78524)[0m             'now_time': '16945265085971088'},
[2m[36m(train_xt pid=78524)[0m 'gpu': -1,
[2m[36m(train_xt pid=78524)[0m 'group_num': 1,
[2m[36m(train_xt pid=78524)[0m 'lock': 1,
[2m[36m(train_xt pid=78524)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78524)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=78524)[0m                        'model_config': {'LR': 0.001500138,
[2m[36m(train_xt pid=78524)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=78524)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=78524)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=78524)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=78524)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78524)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=78524)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=78524)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=78524)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=78524)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=78524)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78524)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=78524)[0m                                     84,
[2m[36m(train_xt pid=78524)[0m                                     4],
[2m[36m(train_xt pid=78524)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=78524)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=78524)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=78524)[0m                'dummy_user',
[2m[36m(train_xt pid=78524)[0m                'dummy_password')],
[2m[36m(train_xt pid=78524)[0m 'speedup': 3,
[2m[36m(train_xt pid=78524)[0m 'start_core': 0}
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:35: Init Broker server info:
[2m[36m(train_xt pid=78524)[0m {'recv': {'port': 34938,
[2m[36m(train_xt pid=78524)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=78524)[0m 'send': [{'port': 34821,
[2m[36m(train_xt pid=78524)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:35: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 34938, 34821, '127.0.0.1', 'info')
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:35: launch local broker with lib success
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:35: **********
[2m[36m(train_xt pid=78524)[0m workspace:
[2m[36m(train_xt pid=78524)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945265085971088
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78567)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78567)[0m Instructions for updating:
[2m[36m(train_xt pid=78567)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78524)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78524)[0m Instructions for updating:
[2m[36m(train_xt pid=78524)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78524)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:40: set verbosity in broker: info
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:40: init broker with id-0
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:40: share buf: plasma_store -m 400000000 -s /tmp/plasma_share78678
[2m[36m(train_xt pid=78567)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:40: 
[2m[36m(train_xt pid=78567)[0m **************************************************
[2m[36m(train_xt pid=78567)[0m  XT start work...
[2m[36m(train_xt pid=78567)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945265150061831.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=78567)[0m **************************************************
[2m[36m(train_xt pid=78524)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78524)[0m   self.run()
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:41: init explorer with id: 0, buf_path: /tmp/plasma_share78678
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:41: init agent group for: explore
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:41: init learner with:
[2m[36m(train_xt pid=78567)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=78567)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=78567)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=78567)[0m               'agent_num': 1},
[2m[36m(train_xt pid=78567)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=78567)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=78567)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=78567)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=78567)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=78567)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=78567)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=78567)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=78567)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=78567)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=78567)[0m                           'instance_num': 5,
[2m[36m(train_xt pid=78567)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=78567)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=78567)[0m                           'save_model': True,
[2m[36m(train_xt pid=78567)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=78567)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=78567)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78567)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=78567)[0m                                    'model_config': {'LR': 0.002928067,
[2m[36m(train_xt pid=78567)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=78567)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=78567)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=78567)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=78567)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78567)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=78567)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=78567)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=78567)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=78567)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=78567)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78567)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=78567)[0m                                                 84,
[2m[36m(train_xt pid=78567)[0m                                                 4],
[2m[36m(train_xt pid=78567)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=78567)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=78567)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=78567)[0m              'id': 'ImpalaCnnOpt_now_time_16945265150061831',
[2m[36m(train_xt pid=78567)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=78567)[0m 'env_num': 5,
[2m[36m(train_xt pid=78567)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=78567)[0m                         'size': 2,
[2m[36m(train_xt pid=78567)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=78567)[0m                         'vision': False,
[2m[36m(train_xt pid=78567)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=78567)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=78567)[0m             'now_time': '16945265150061831'},
[2m[36m(train_xt pid=78567)[0m 'gpu': -1,
[2m[36m(train_xt pid=78567)[0m 'group_num': 1,
[2m[36m(train_xt pid=78567)[0m 'lock': 1,
[2m[36m(train_xt pid=78567)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78567)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=78567)[0m                        'model_config': {'LR': 0.002928067,
[2m[36m(train_xt pid=78567)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=78567)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=78567)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=78567)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=78567)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78567)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=78567)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=78567)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=78567)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=78567)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=78567)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78567)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=78567)[0m                                     84,
[2m[36m(train_xt pid=78567)[0m                                     4],
[2m[36m(train_xt pid=78567)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=78567)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=78567)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=78567)[0m                'dummy_user',
[2m[36m(train_xt pid=78567)[0m                'dummy_password')],
[2m[36m(train_xt pid=78567)[0m 'speedup': 3,
[2m[36m(train_xt pid=78567)[0m 'start_core': 10}
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:41: Init Broker server info:
[2m[36m(train_xt pid=78567)[0m {'recv': {'port': 28780,
[2m[36m(train_xt pid=78567)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=78567)[0m 'send': [{'port': 39944,
[2m[36m(train_xt pid=78567)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:41: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 28780, 39944, '127.0.0.1', 'info')
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:41: launch local broker with lib success
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:41: **********
[2m[36m(train_xt pid=78567)[0m workspace:
[2m[36m(train_xt pid=78567)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945265150061831
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:42: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=78567)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78567)[0m Instructions for updating:
[2m[36m(train_xt pid=78567)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:44: speedup(3): binding env 0 to CPU 0
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:44: init explorer with id: 1, buf_path: /tmp/plasma_share78678
[2m[36m(train_xt pid=78630)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78630)[0m Instructions for updating:
[2m[36m(train_xt pid=78630)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:46: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=78567)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:47: set verbosity in broker: info
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:47: init broker with id-0
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:47: share buf: plasma_store -m 400000000 -s /tmp/plasma_share79288
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:47: speedup(3): binding env 1 to CPU 1
[2m[36m(train_xt pid=78630)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:47: 
[2m[36m(train_xt pid=78630)[0m **************************************************
[2m[36m(train_xt pid=78630)[0m  XT start work...
[2m[36m(train_xt pid=78630)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945265218144188.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=78630)[0m **************************************************
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:47: init explorer with id: 2, buf_path: /tmp/plasma_share78678
[2m[36m(train_xt pid=78567)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78567)[0m   self.run()
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:47: init explorer with id: 0, buf_path: /tmp/plasma_share79288
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:47: init agent group for: explore
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:48: init learner with:
[2m[36m(train_xt pid=78630)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=78630)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=78630)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=78630)[0m               'agent_num': 1},
[2m[36m(train_xt pid=78630)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=78630)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=78630)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=78630)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=78630)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=78630)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=78630)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=78630)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=78630)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=78630)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=78630)[0m                           'instance_num': 5,
[2m[36m(train_xt pid=78630)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=78630)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=78630)[0m                           'save_model': True,
[2m[36m(train_xt pid=78630)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=78630)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=78630)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78630)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=78630)[0m                                    'model_config': {'LR': 0.002047128,
[2m[36m(train_xt pid=78630)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=78630)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=78630)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=78630)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=78630)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78630)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=78630)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=78630)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=78630)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=78630)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=78630)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78630)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=78630)[0m                                                 84,
[2m[36m(train_xt pid=78630)[0m                                                 4],
[2m[36m(train_xt pid=78630)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=78630)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=78630)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=78630)[0m              'id': 'ImpalaCnnOpt_now_time_16945265218144188',
[2m[36m(train_xt pid=78630)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=78630)[0m 'env_num': 5,
[2m[36m(train_xt pid=78630)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=78630)[0m                         'size': 2,
[2m[36m(train_xt pid=78630)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=78630)[0m                         'vision': False,
[2m[36m(train_xt pid=78630)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=78630)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=78630)[0m             'now_time': '16945265218144188'},
[2m[36m(train_xt pid=78630)[0m 'gpu': -1,
[2m[36m(train_xt pid=78630)[0m 'group_num': 1,
[2m[36m(train_xt pid=78630)[0m 'lock': 1,
[2m[36m(train_xt pid=78630)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78630)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=78630)[0m                        'model_config': {'LR': 0.002047128,
[2m[36m(train_xt pid=78630)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=78630)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=78630)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=78630)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=78630)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78630)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=78630)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=78630)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=78630)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=78630)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=78630)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78630)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=78630)[0m                                     84,
[2m[36m(train_xt pid=78630)[0m                                     4],
[2m[36m(train_xt pid=78630)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=78630)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=78630)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=78630)[0m                'dummy_user',
[2m[36m(train_xt pid=78630)[0m                'dummy_password')],
[2m[36m(train_xt pid=78630)[0m 'speedup': 3,
[2m[36m(train_xt pid=78630)[0m 'start_core': 20}
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:48: Init Broker server info:
[2m[36m(train_xt pid=78630)[0m {'recv': {'port': 35193,
[2m[36m(train_xt pid=78630)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=78630)[0m 'send': [{'port': 36882,
[2m[36m(train_xt pid=78630)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:48: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 35193, 36882, '127.0.0.1', 'info')
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:48: launch local broker with lib success
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:48: **********
[2m[36m(train_xt pid=78630)[0m workspace:
[2m[36m(train_xt pid=78630)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945265218144188
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:49: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:49: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:50: speedup(3): binding env 2 to CPU 2
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:50: speedup(3): binding env 0 to CPU 10
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:50: init explorer with id: 3, buf_path: /tmp/plasma_share78678
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:50: init explorer with id: 1, buf_path: /tmp/plasma_share79288
[2m[36m(train_xt pid=78630)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78630)[0m Instructions for updating:
[2m[36m(train_xt pid=78630)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:52: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:52: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=79720)[0m Instructions for updating:
[2m[36m(train_xt pid=79720)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:53: speedup(3): binding env 3 to CPU 3
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:53: speedup(3): binding env 1 to CPU 11
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:53: init explorer with id: 4, buf_path: /tmp/plasma_share78678
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:53: init explorer with id: 2, buf_path: /tmp/plasma_share79288
[2m[36m(train_xt pid=78630)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:54: set verbosity in broker: info
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:54: init broker with id-0
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:54: share buf: plasma_store -m 400000000 -s /tmp/plasma_share80452
[2m[36m(train_xt pid=78630)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78630)[0m   self.run()
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:54: init explorer with id: 0, buf_path: /tmp/plasma_share80452
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:54: init agent group for: explore
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:55: explorer-4 start with sync interval-1
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:55: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:55: 
[2m[36m(train_xt pid=79720)[0m **************************************************
[2m[36m(train_xt pid=79720)[0m  XT start work...
[2m[36m(train_xt pid=79720)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945265297429383.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=79720)[0m **************************************************
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:56: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:56: init learner with:
[2m[36m(train_xt pid=79720)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=79720)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=79720)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=79720)[0m               'agent_num': 1},
[2m[36m(train_xt pid=79720)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=79720)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=79720)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=79720)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=79720)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=79720)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=79720)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=79720)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=79720)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=79720)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=79720)[0m                           'instance_num': 5,
[2m[36m(train_xt pid=79720)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=79720)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=79720)[0m                           'save_model': True,
[2m[36m(train_xt pid=79720)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=79720)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=79720)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=79720)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=79720)[0m                                    'model_config': {'LR': 0.001824478,
[2m[36m(train_xt pid=79720)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=79720)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=79720)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=79720)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=79720)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=79720)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=79720)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=79720)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=79720)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=79720)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=79720)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=79720)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=79720)[0m                                                 84,
[2m[36m(train_xt pid=79720)[0m                                                 4],
[2m[36m(train_xt pid=79720)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=79720)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=79720)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=79720)[0m              'id': 'ImpalaCnnOpt_now_time_16945265297429383',
[2m[36m(train_xt pid=79720)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=79720)[0m 'env_num': 5,
[2m[36m(train_xt pid=79720)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=79720)[0m                         'size': 2,
[2m[36m(train_xt pid=79720)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=79720)[0m                         'vision': False,
[2m[36m(train_xt pid=79720)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=79720)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=79720)[0m             'now_time': '16945265297429383'},
[2m[36m(train_xt pid=79720)[0m 'gpu': -1,
[2m[36m(train_xt pid=79720)[0m 'group_num': 1,
[2m[36m(train_xt pid=79720)[0m 'lock': 1,
[2m[36m(train_xt pid=79720)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=79720)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=79720)[0m                        'model_config': {'LR': 0.001824478,
[2m[36m(train_xt pid=79720)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=79720)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=79720)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=79720)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=79720)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=79720)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=79720)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=79720)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=79720)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=79720)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=79720)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=79720)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=79720)[0m                                     84,
[2m[36m(train_xt pid=79720)[0m                                     4],
[2m[36m(train_xt pid=79720)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=79720)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=79720)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=79720)[0m                'dummy_user',
[2m[36m(train_xt pid=79720)[0m                'dummy_password')],
[2m[36m(train_xt pid=79720)[0m 'speedup': 3,
[2m[36m(train_xt pid=79720)[0m 'start_core': 30}
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:56: Init Broker server info:
[2m[36m(train_xt pid=79720)[0m {'recv': {'port': 21920,
[2m[36m(train_xt pid=79720)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=79720)[0m 'send': [{'port': 37685,
[2m[36m(train_xt pid=79720)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:56: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 21920, 37685, '127.0.0.1', 'info')
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:56: launch local broker with lib success
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:56: **********
[2m[36m(train_xt pid=79720)[0m workspace:
[2m[36m(train_xt pid=79720)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945265297429383
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:56: speedup(3): binding env 4 to CPU 4
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:56: speedup(3): binding env 2 to CPU 12
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:57: init explorer with id: 3, buf_path: /tmp/plasma_share79288
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:57: speedup(3): binding env 0 to CPU 20
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:57: init explorer with id: 1, buf_path: /tmp/plasma_share80452
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:58: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=79720)[0m Instructions for updating:
[2m[36m(train_xt pid=79720)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:48:59: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:00: speedup(3): binding env 3 to CPU 13
[2m[36m(train_xt pid=78524)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78524)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78524)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78524)[0m   self.run()
[2m[36m(train_xt pid=78524)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78524)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:00: Task: T0         | Train_count:         0 | Steps:       253 | Elapsed time: 22 seconds
[2m[36m(train_xt pid=78524)[0m mean_env_step_ms:          4.55218	mean_explore_ms:        951.148987	mean_inference_ms:        2.596275	mean_loop_time_ms:             nan
[2m[36m(train_xt pid=78524)[0m mean_prepare_data_ms:     1.088858	mean_restore_model_ms:   56.287432	mean_train_time_ms:            nan	mean_wait_model_ms:     7682.742691
[2m[36m(train_xt pid=78524)[0m mean_wait_sample_ms:    20141.917229	step_per_second:              11.0	train_loss:              -3.419756	train_reward_avg:              0.0
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:00: init explorer with id: 4, buf_path: /tmp/plasma_share79288
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:00: speedup(3): binding env 1 to CPU 21
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:00: init explorer with id: 2, buf_path: /tmp/plasma_share80452
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:01: explorer-4 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:02: set verbosity in broker: info
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:02: init broker with id-0
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:02: share buf: plasma_store -m 400000000 -s /tmp/plasma_share1504
[2m[36m(train_xt pid=79720)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=79720)[0m   self.run()
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:02: init explorer with id: 0, buf_path: /tmp/plasma_share1504
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:02: init agent group for: explore
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:02: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:03: speedup(3): binding env 4 to CPU 14
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:03: speedup(3): binding env 2 to CPU 22
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:04: init explorer with id: 3, buf_path: /tmp/plasma_share80452
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:04: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:05: speedup(3): binding env 0 to CPU 30
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:05: init explorer with id: 1, buf_path: /tmp/plasma_share1504
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:05: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=78567)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.tune_system ================== True
with_samper ================== True
== Status ==
Current time: 2023-09-12 21:48:27 (running for 00:00:07.41)
Memory usage on this node: 14.1/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 10.0/80 CPUs, 0.4/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (3 PENDING, 1 RUNNING)


[2m[36m(train_xt pid=78524)[0m {'lr': 0.0015001380997081, 'checkpoint_interval': 1}
[2m[36m(train_xt pid=78524)[0m trail id ================= 08551_00000
[2m[36m(train_xt pid=78524)[0m =================tune_system=========================
[2m[36m(train_xt pid=78524)[0m =================with_samper=========================
[2m[36m(train_xt pid=78524)[0m =======================env_pool_size======================2
[2m[36m(train_xt pid=78524)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=78524)[0m get max throughput start_core============================= 0
[2m[36m(train_xt pid=78524)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945265085971088.yaml
[2m[36m(train_xt pid=78524)[0m run_log ======================== /tmp/test_opt_bys16945265085971088.log
== Status ==
Current time: 2023-09-12 21:48:33 (running for 00:00:13.81)
Memory usage on this node: 14.6/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 20.0/80 CPUs, 0.8/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (2 PENDING, 2 RUNNING)


[2m[36m(train_xt pid=78567)[0m {'lr': 0.002928066848858182, 'checkpoint_interval': 1}
[2m[36m(train_xt pid=78567)[0m trail id ================= 08551_00001
[2m[36m(train_xt pid=78567)[0m =================tune_system=========================
[2m[36m(train_xt pid=78567)[0m =================with_samper=========================
[2m[36m(train_xt pid=78567)[0m =======================env_pool_size======================2
[2m[36m(train_xt pid=78567)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=78567)[0m get max throughput start_core============================= 10
[2m[36m(train_xt pid=78567)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945265150061831.yaml
[2m[36m(train_xt pid=78567)[0m run_log ======================== /tmp/test_opt_bys16945265150061831.log
[2m[36m(train_xt pid=78524)[0m start_core ======================================== 0
[2m[36m(train_xt pid=78524)[0m plasma_store -m 1000000000 -s /tmp/plasma78602
[2m[36m(train_xt pid=78524)[0m self.time_record_filename ============= /tmp/16945265085971088
== Status ==
Current time: 2023-09-12 21:48:40 (running for 00:00:20.65)
Memory usage on this node: 16.2/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 PENDING, 3 RUNNING)


[2m[36m(train_xt pid=78630)[0m {'lr': 0.0020471278538221178, 'checkpoint_interval': 1}
[2m[36m(train_xt pid=78630)[0m trail id ================= 08551_00002
[2m[36m(train_xt pid=78630)[0m =================tune_system=========================
[2m[36m(train_xt pid=78630)[0m =================with_samper=========================
[2m[36m(train_xt pid=78524)[0m plasma_store -m 100000000 -s /tmp/plasma78678T0
[2m[36m(train_xt pid=78567)[0m start_core ======================================== 10
[2m[36m(train_xt pid=78567)[0m plasma_store -m 1000000000 -s /tmp/plasma78646
[2m[36m(train_xt pid=78567)[0m self.time_record_filename ============= /tmp/16945265150061831
[2m[36m(train_xt pid=78630)[0m =======================env_pool_size======================2
[2m[36m(train_xt pid=78630)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=78630)[0m get max throughput start_core============================= 20
[2m[36m(train_xt pid=78630)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945265218144188.yaml
[2m[36m(train_xt pid=78630)[0m run_log ======================== /tmp/test_opt_bys16945265218144188.log
[2m[36m(train_xt pid=78567)[0m plasma_store -m 100000000 -s /tmp/plasma79288T0
[2m[36m(train_xt pid=78630)[0m start_core ======================================== 20
== Status ==
Current time: 2023-09-12 21:48:48 (running for 00:00:28.54)
Memory usage on this node: 17.9/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=79720)[0m {'lr': 0.0018244780428433261, 'checkpoint_interval': 1}
[2m[36m(train_xt pid=79720)[0m trail id ================= 08551_00003
[2m[36m(train_xt pid=79720)[0m =================tune_system=========================
[2m[36m(train_xt pid=79720)[0m =================with_samper=========================
[2m[36m(train_xt pid=78630)[0m plasma_store -m 1000000000 -s /tmp/plasma79898
[2m[36m(train_xt pid=78630)[0m self.time_record_filename ============= /tmp/16945265218144188
[2m[36m(train_xt pid=79720)[0m =======================env_pool_size======================2
[2m[36m(train_xt pid=79720)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=79720)[0m get max throughput start_core============================= 30
[2m[36m(train_xt pid=79720)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945265297429383.yaml
[2m[36m(train_xt pid=79720)[0m run_log ======================== /tmp/test_opt_bys16945265297429383.log
== Status ==
Current time: 2023-09-12 21:48:53 (running for 00:00:33.54)
Memory usage on this node: 19.4/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78630)[0m plasma_store -m 100000000 -s /tmp/plasma80452T0
[2m[36m(train_xt pid=79720)[0m start_core ======================================== 30
[2m[36m(train_xt pid=79720)[0m plasma_store -m 1000000000 -s /tmp/plasma81481
[2m[36m(train_xt pid=79720)[0m self.time_record_filename ============= /tmp/16945265297429383
== Status ==
Current time: 2023-09-12 21:48:58 (running for 00:00:38.55)
Memory usage on this node: 20.9/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=79720)[0m plasma_store -m 100000000 -s /tmp/plasma1504T0
== Status ==
Current time: 2023-09-12 21:49:03 (running for 00:00:43.55)
Memory usage on this node: 22.0/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


== Status ==
Current time: 2023-09-12 21:49:08 (running for 00:00:48.55)
Memory usage on this node: 23.3/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78567)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78567)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78567)[0m   self.run()
[2m[36m(train_xt pid=78567)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78567)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:06: Task: T0         | Train_count:         4 | Steps:      1277 | Elapsed time: 22 seconds
[2m[36m(train_xt pid=78567)[0m mean_env_step_ms:         4.457171	mean_explore_ms:        966.716909	mean_inference_ms:        2.804613	mean_loop_time_ms:       35.012901
[2m[36m(train_xt pid=78567)[0m mean_prepare_data_ms:     0.853443	mean_restore_model_ms:   52.397537	mean_train_time_ms:     397.390556	mean_wait_model_ms:     7647.716856
[2m[36m(train_xt pid=78567)[0m mean_wait_sample_ms:    4071.079826	step_per_second:              56.0	train_loss:                4.84729	train_reward_avg:              0.0
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:07: speedup(3): binding env 3 to CPU 23
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:07: init explorer with id: 4, buf_path: /tmp/plasma_share80452
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:07: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:08: Task: T0         | Train_count:        40 | Steps:     10392 | Elapsed time: 30 seconds
[2m[36m(train_xt pid=78524)[0m mean_env_step_ms:          4.18258	mean_explore_ms:        865.570927	mean_inference_ms:        2.390975	mean_loop_time_ms:      205.641353
[2m[36m(train_xt pid=78524)[0m mean_prepare_data_ms:      0.82494	mean_restore_model_ms:   30.371571	mean_train_time_ms:      19.667065	mean_wait_model_ms:     4141.659021
[2m[36m(train_xt pid=78524)[0m mean_wait_sample_ms:    177.530396	step_per_second:             343.0	train_loss:              -18.35565	train_reward_avg:             1.25
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:08: speedup(3): binding env 1 to CPU 31
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:08: init explorer with id: 2, buf_path: /tmp/plasma_share1504
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:08: explorer-4 start with sync interval-1
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:10: speedup(3): binding env 4 to CPU 24
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:10: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:11: speedup(3): binding env 2 to CPU 32
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:11: init explorer with id: 3, buf_path: /tmp/plasma_share1504
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:13: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=78630)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78630)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78630)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78630)[0m   self.run()
[2m[36m(train_xt pid=78630)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78630)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:14: Task: T0         | Train_count:         2 | Steps:       637 | Elapsed time: 23 seconds
[2m[36m(train_xt pid=78630)[0m mean_env_step_ms:         4.917432	mean_explore_ms:        1040.728474	mean_inference_ms:        2.913666	mean_loop_time_ms:       56.088448
[2m[36m(train_xt pid=78630)[0m mean_prepare_data_ms:     0.967423	mean_restore_model_ms:   65.049124	mean_train_time_ms:     719.943682	mean_wait_model_ms:     7624.591923
[2m[36m(train_xt pid=78630)[0m mean_wait_sample_ms:    6913.508813	step_per_second:              27.0	train_loss:               9.567556	train_reward_avg:              0.0
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:14: speedup(3): binding env 3 to CPU 33
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:15: init explorer with id: 4, buf_path: /tmp/plasma_share1504
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:15: Task: T0         | Train_count:        44 | Steps:     11412 | Elapsed time: 31 seconds
[2m[36m(train_xt pid=78567)[0m mean_env_step_ms:         4.216353	mean_explore_ms:        890.807108	mean_inference_ms:        2.555638	mean_loop_time_ms:      218.524706
[2m[36m(train_xt pid=78567)[0m mean_prepare_data_ms:     0.809169	mean_restore_model_ms:   26.500442	mean_train_time_ms:      18.799222	mean_wait_model_ms:     3771.105918
[2m[36m(train_xt pid=78567)[0m mean_wait_sample_ms:    192.362285	step_per_second:             366.0	train_loss:             -22.113403	train_reward_avg:         1.714286
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:17: Task: T0         | Train_count:        80 | Steps:     20605 | Elapsed time: 38 seconds
[2m[36m(train_xt pid=78524)[0m mean_env_step_ms:         4.061685	mean_explore_ms:        841.837123	mean_inference_ms:        2.361035	mean_loop_time_ms:      215.359366
[2m[36m(train_xt pid=78524)[0m mean_prepare_data_ms:     0.895798	mean_restore_model_ms:   20.785227	mean_train_time_ms:      21.040738	mean_wait_model_ms:     2687.302396
[2m[36m(train_xt pid=78524)[0m mean_wait_sample_ms:    186.011481	step_per_second:             532.0	train_loss:              43.058296	train_reward_avg:              1.5
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:17: explorer-4 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:18: speedup(3): binding env 4 to CPU 34
[2m[36m(train_xt pid=79720)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=79720)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=79720)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=79720)[0m   self.run()
[2m[36m(train_xt pid=79720)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=79720)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:22: Task: T0         | Train_count:         4 | Steps:      1149 | Elapsed time: 23 seconds
[2m[36m(train_xt pid=79720)[0m mean_env_step_ms:         5.076218	mean_explore_ms:        1059.908485	mean_inference_ms:        2.895308	mean_loop_time_ms:       45.242727
[2m[36m(train_xt pid=79720)[0m mean_prepare_data_ms:      0.95582	mean_restore_model_ms:   57.767534	mean_train_time_ms:     495.768738	mean_wait_model_ms:     7494.897747
[2m[36m(train_xt pid=79720)[0m mean_wait_sample_ms:    4096.163893	step_per_second:              49.0	train_loss:              20.400124	train_reward_avg:              0.0
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:23: Task: T0         | Train_count:        44 | Steps:     11501 | Elapsed time: 32 seconds
[2m[36m(train_xt pid=78630)[0m mean_env_step_ms:          4.56904	mean_explore_ms:        966.677709	mean_inference_ms:        2.784747	mean_loop_time_ms:      228.027451
[2m[36m(train_xt pid=78630)[0m mean_prepare_data_ms:     0.845528	mean_restore_model_ms:   32.345382	mean_train_time_ms:      23.795378	mean_wait_model_ms:     3787.034577
[2m[36m(train_xt pid=78630)[0m mean_wait_sample_ms:    195.445073	step_per_second:             355.0	train_loss:               21.68861	train_reward_avg:              1.0
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:24: Task: T0         | Train_count:        84 | Steps:     21507 | Elapsed time: 40 seconds
[2m[36m(train_xt pid=78567)[0m mean_env_step_ms:         4.236711	mean_explore_ms:        894.881641	mean_inference_ms:        2.594265	mean_loop_time_ms:      227.793598
[2m[36m(train_xt pid=78567)[0m mean_prepare_data_ms:     0.861704	mean_restore_model_ms:   19.028061	mean_train_time_ms:      18.556201	mean_wait_model_ms:     2523.930886
[2m[36m(train_xt pid=78567)[0m mean_wait_sample_ms:    202.177417	step_per_second:             534.0	train_loss:              10.244518	train_reward_avg:         1.615385
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:26: Task: T0         | Train_count:       119 | Steps:     30715 | Elapsed time: 47 seconds
[2m[36m(train_xt pid=78524)[0m mean_env_step_ms:         4.125753	mean_explore_ms:        856.195883	mean_inference_ms:        2.419217	mean_loop_time_ms:      231.061256
[2m[36m(train_xt pid=78524)[0m mean_prepare_data_ms:     0.801504	mean_restore_model_ms:   16.582782	mean_train_time_ms:      20.800734	mean_wait_model_ms:     2026.860215
[2m[36m(train_xt pid=78524)[0m mean_wait_sample_ms:    200.806129	step_per_second:             641.0	train_loss:              21.154812	train_reward_avg:            1.575
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:31: Task: T0         | Train_count:        44 | Steps:     11286 | Elapsed time: 32 seconds
[2m[36m(train_xt pid=79720)[0m mean_env_step_ms:         4.646827	mean_explore_ms:        982.472897	mean_inference_ms:        2.821334	mean_loop_time_ms:      241.665065
[2m[36m(train_xt pid=79720)[0m mean_prepare_data_ms:     0.870407	mean_restore_model_ms:   30.488838	mean_train_time_ms:      28.368914	mean_wait_model_ms:     3768.811226
[2m[36m(train_xt pid=79720)[0m mean_wait_sample_ms:    203.858781	step_per_second:             344.0	train_loss:              28.095345	train_reward_avg:            1.125
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:32: Task: T0         | Train_count:        84 | Steps:     21695 | Elapsed time: 41 seconds
[2m[36m(train_xt pid=78630)[0m mean_env_step_ms:         4.380926	mean_explore_ms:        942.947037	mean_inference_ms:        2.815267	mean_loop_time_ms:      237.653756
[2m[36m(train_xt pid=78630)[0m mean_prepare_data_ms:     0.878465	mean_restore_model_ms:   22.888843	mean_train_time_ms:      23.345613	mean_wait_model_ms:     2540.370226
[2m[36m(train_xt pid=78630)[0m mean_wait_sample_ms:    204.521441	step_per_second:             518.0	train_loss:             -25.961432	train_reward_avg:         1.233333
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:33: Task: T0         | Train_count:       124 | Steps:     31920 | Elapsed time: 50 seconds
[2m[36m(train_xt pid=78567)[0m mean_env_step_ms:         4.182088	mean_explore_ms:        894.619651	mean_inference_ms:        2.656394	mean_loop_time_ms:      246.067822
[2m[36m(train_xt pid=78567)[0m mean_prepare_data_ms:     0.870621	mean_restore_model_ms:   15.618127	mean_train_time_ms:      21.475732	mean_wait_model_ms:     1930.487633
[2m[36m(train_xt pid=78567)[0m mean_wait_sample_ms:    216.318381	step_per_second:             638.0	train_loss:              89.437889	train_reward_avg:         1.578947
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78524)[0m /tmp/plasma78602:   
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:36: broker status timeout!
[2m[36m(train_xt pid=78524)[0m /tmp/plasma_share78678:
[2m[36m(train_xt pid=78524)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78524)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:38: Finished train job normally.
[2m[36m(train_xt pid=78524)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78524)[0m [I 2023-09-12 21:49:38,994] Trial 0 finished with value: 436.817472698908 and parameters: {'env_pool_size': 2, 'env_pool_wait_nums': 2, 'infer_size': 5}. Best is trial 0 with value: 436.817472698908.
[2m[36m(train_xt pid=78524)[0m /tmp/plasma78678T0: 
[2m[36m(train_xt pid=78524)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/integration/botorch.py:844: ExperimentalWarning: qei_candidates_func is experimental (supported from v2.4.0). The interface can change in the future.
[2m[36m(train_xt pid=78524)[0m   completed_params, completed_values, con, bounds, running_params
[2m[36m(train_xt pid=78524)[0m [W 2023-09-12 21:49:40,102] No objective values are feasible. Using 0 as the best objective in qEI.
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:40: Task: T0         | Train_count:        84 | Steps:     21715 | Elapsed time: 41 seconds
[2m[36m(train_xt pid=79720)[0m mean_env_step_ms:         4.456101	mean_explore_ms:        946.384206	mean_inference_ms:        2.765351	mean_loop_time_ms:      222.896934
[2m[36m(train_xt pid=79720)[0m mean_prepare_data_ms:     0.901449	mean_restore_model_ms:   21.598017	mean_train_time_ms:      25.961626	mean_wait_model_ms:     2521.496464
[2m[36m(train_xt pid=79720)[0m mean_wait_sample_ms:    187.364423	step_per_second:             518.0	train_loss:             -10.138932	train_reward_avg:         1.178571
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:41: Task: T0         | Train_count:       124 | Steps:     31932 | Elapsed time: 50 seconds
[2m[36m(train_xt pid=78630)[0m mean_env_step_ms:         4.297311	mean_explore_ms:        926.019969	mean_inference_ms:        2.780085	mean_loop_time_ms:      233.469391
[2m[36m(train_xt pid=78630)[0m mean_prepare_data_ms:     0.849104	mean_restore_model_ms:    18.18659	mean_train_time_ms:      23.550653	mean_wait_model_ms:     1943.076704
[2m[36m(train_xt pid=78630)[0m mean_wait_sample_ms:      200.2141	step_per_second:             626.0	train_loss:             -38.350033	train_reward_avg:         1.357143
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78567)[0m /tmp/plasma78646:   
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:42: broker status timeout!
[2m[36m(train_xt pid=78567)[0m /tmp/plasma_share79288:
[2m[36m(train_xt pid=78524)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78524)[0m Instructions for updating:
[2m[36m(train_xt pid=78524)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78567)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78567)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:44: Finished train job normally.
[2m[36m(train_xt pid=78567)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78567)[0m [I 2023-09-12 21:49:44,987] Trial 1 finished with value: 438.87147335423197 and parameters: {'env_pool_size': 2, 'env_pool_wait_nums': 2, 'infer_size': 5}. Best is trial 0 with value: 436.817472698908.
[2m[36m(train_xt pid=78567)[0m /tmp/plasma79288T0: 
[2m[36m(train_xt pid=78567)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/integration/botorch.py:844: ExperimentalWarning: qei_candidates_func is experimental (supported from v2.4.0). The interface can change in the future.
[2m[36m(train_xt pid=78567)[0m   completed_params, completed_values, con, bounds, running_params
[2m[36m(train_xt pid=78567)[0m [W 2023-09-12 21:49:46,092] No objective values are feasible. Using 0 as the best objective in qEI.
[2m[36m(train_xt pid=78524)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:48: 
[2m[36m(train_xt pid=78524)[0m **************************************************
[2m[36m(train_xt pid=78524)[0m  XT start work...
[2m[36m(train_xt pid=78524)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945265800581827.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=78524)[0m **************************************************
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:48: Task: T0         | Train_count:       124 | Steps:     31906 | Elapsed time: 49 seconds
[2m[36m(train_xt pid=79720)[0m mean_env_step_ms:         4.152135	mean_explore_ms:         891.35566	mean_inference_ms:         2.65615	mean_loop_time_ms:      199.668753
[2m[36m(train_xt pid=79720)[0m mean_prepare_data_ms:     0.954974	mean_restore_model_ms:    17.15205	mean_train_time_ms:      22.673082	mean_wait_model_ms:     1920.76511
[2m[36m(train_xt pid=79720)[0m mean_wait_sample_ms:    168.014014	step_per_second:             640.0	train_loss:               9.501955	train_reward_avg:            1.325
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:48: init learner with:
[2m[36m(train_xt pid=78524)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=78524)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=78524)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=78524)[0m               'agent_num': 1},
[2m[36m(train_xt pid=78524)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=78524)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=78524)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=78524)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=78524)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=78524)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=78524)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=78524)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=78524)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=78524)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=78524)[0m                           'instance_num': 4,
[2m[36m(train_xt pid=78524)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=78524)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=78524)[0m                           'save_model': True,
[2m[36m(train_xt pid=78524)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=78524)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=78524)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78524)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=78524)[0m                                    'model_config': {'LR': 0.001500138,
[2m[36m(train_xt pid=78524)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=78524)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=78524)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=78524)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=78524)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78524)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=78524)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=78524)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=78524)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=78524)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=78524)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78524)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=78524)[0m                                                 84,
[2m[36m(train_xt pid=78524)[0m                                                 4],
[2m[36m(train_xt pid=78524)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=78524)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=78524)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=78524)[0m              'id': 'ImpalaCnnOpt_now_time_16945265800581827',
[2m[36m(train_xt pid=78524)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=78524)[0m 'env_num': 4,
[2m[36m(train_xt pid=78524)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=78524)[0m                         'size': 3,
[2m[36m(train_xt pid=78524)[0m                         'vector_env_size': 3,
[2m[36m(train_xt pid=78524)[0m                         'vision': False,
[2m[36m(train_xt pid=78524)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=78524)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=78524)[0m             'now_time': '16945265800581827'},
[2m[36m(train_xt pid=78524)[0m 'gpu': -1,
[2m[36m(train_xt pid=78524)[0m 'group_num': 1,
[2m[36m(train_xt pid=78524)[0m 'lock': 1,
[2m[36m(train_xt pid=78524)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78524)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=78524)[0m                        'model_config': {'LR': 0.001500138,
[2m[36m(train_xt pid=78524)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=78524)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=78524)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=78524)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=78524)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78524)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=78524)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=78524)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=78524)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=78524)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=78524)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78524)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=78524)[0m                                     84,
[2m[36m(train_xt pid=78524)[0m                                     4],
[2m[36m(train_xt pid=78524)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=78524)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=78524)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=78524)[0m                'dummy_user',
[2m[36m(train_xt pid=78524)[0m                'dummy_password')],
[2m[36m(train_xt pid=78524)[0m 'speedup': 3,
[2m[36m(train_xt pid=78524)[0m 'start_core': 0}
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:48: Init Broker server info:
[2m[36m(train_xt pid=78524)[0m {'recv': {'port': 24368,
[2m[36m(train_xt pid=78524)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=78524)[0m 'send': [{'port': 37718,
[2m[36m(train_xt pid=78524)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:48: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 24368, 37718, '127.0.0.1', 'info')
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:48: launch local broker with lib success
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:49: **********
[2m[36m(train_xt pid=78524)[0m workspace:
[2m[36m(train_xt pid=78524)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945265800581827
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78567)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78567)[0m Instructions for updating:
[2m[36m(train_xt pid=78567)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78630)[0m /tmp/plasma79898:   
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:50: broker status timeout!
[2m[36m(train_xt pid=78630)[0m /tmp/plasma_share80452:
[2m[36m(train_xt pid=78524)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78524)[0m Instructions for updating:
[2m[36m(train_xt pid=78524)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78630)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78630)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:53: Finished train job normally.
[2m[36m(train_xt pid=78567)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:53: 
[2m[36m(train_xt pid=78567)[0m **************************************************
[2m[36m(train_xt pid=78567)[0m  XT start work...
[2m[36m(train_xt pid=78567)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945265860501933.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=78567)[0m **************************************************
[2m[36m(train_xt pid=78630)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78630)[0m [I 2023-09-12 21:49:53,468] Trial 2 finished with value: 447.28434504792335 and parameters: {'env_pool_size': 2, 'env_pool_wait_nums': 2, 'infer_size': 5}. Best is trial 0 with value: 436.817472698908.
[2m[36m(train_xt pid=78630)[0m /tmp/plasma80452T0: 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:54: init learner with:
[2m[36m(train_xt pid=78567)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=78567)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=78567)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=78567)[0m               'agent_num': 1},
[2m[36m(train_xt pid=78567)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=78567)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=78567)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=78567)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=78567)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=78567)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=78567)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=78567)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=78567)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=78567)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=78567)[0m                           'instance_num': 3,
[2m[36m(train_xt pid=78567)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=78567)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=78567)[0m                           'save_model': True,
[2m[36m(train_xt pid=78567)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=78567)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=78567)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78567)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=78567)[0m                                    'model_config': {'LR': 0.002928067,
[2m[36m(train_xt pid=78567)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=78567)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=78567)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=78567)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=78567)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78567)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=78567)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=78567)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=78567)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=78567)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=78567)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78567)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=78567)[0m                                                 84,
[2m[36m(train_xt pid=78567)[0m                                                 4],
[2m[36m(train_xt pid=78567)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=78567)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=78567)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=78567)[0m              'id': 'ImpalaCnnOpt_now_time_16945265860501933',
[2m[36m(train_xt pid=78567)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=78567)[0m 'env_num': 3,
[2m[36m(train_xt pid=78567)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=78567)[0m                         'size': 4,
[2m[36m(train_xt pid=78567)[0m                         'vector_env_size': 4,
[2m[36m(train_xt pid=78567)[0m                         'vision': False,
[2m[36m(train_xt pid=78567)[0m                         'wait_num': 3},
[2m[36m(train_xt pid=78567)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=78567)[0m             'now_time': '16945265860501933'},
[2m[36m(train_xt pid=78567)[0m 'gpu': -1,
[2m[36m(train_xt pid=78567)[0m 'group_num': 1,
[2m[36m(train_xt pid=78567)[0m 'lock': 1,
[2m[36m(train_xt pid=78567)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78567)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=78567)[0m                        'model_config': {'LR': 0.002928067,
[2m[36m(train_xt pid=78567)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=78567)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=78567)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=78567)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=78567)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78567)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=78567)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=78567)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=78567)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=78567)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=78567)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78567)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=78567)[0m                                     84,
[2m[36m(train_xt pid=78567)[0m                                     4],
[2m[36m(train_xt pid=78567)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=78567)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=78567)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=78567)[0m                'dummy_user',
[2m[36m(train_xt pid=78567)[0m                'dummy_password')],
[2m[36m(train_xt pid=78567)[0m 'speedup': 3,
[2m[36m(train_xt pid=78567)[0m 'start_core': 10}
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:54: Init Broker server info:
[2m[36m(train_xt pid=78567)[0m {'recv': {'port': 23826,
[2m[36m(train_xt pid=78567)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=78567)[0m 'send': [{'port': 28477,
[2m[36m(train_xt pid=78567)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:54: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 23826, 28477, '127.0.0.1', 'info')
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:54: launch local broker with lib success
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:54: **********
[2m[36m(train_xt pid=78567)[0m workspace:
[2m[36m(train_xt pid=78567)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945265860501933
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78630)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/integration/botorch.py:844: ExperimentalWarning: qei_candidates_func is experimental (supported from v2.4.0). The interface can change in the future.
[2m[36m(train_xt pid=78630)[0m   completed_params, completed_values, con, bounds, running_params
[2m[36m(train_xt pid=78630)[0m [W 2023-09-12 21:49:54,573] No objective values are feasible. Using 0 as the best objective in qEI.
[2m[36m(train_xt pid=78524)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:54: set verbosity in broker: info
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:54: init broker with id-0
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:54: share buf: plasma_store -m 400000000 -s /tmp/plasma_share6036
[2m[36m(train_xt pid=78524)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78524)[0m   self.run()
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:55: init explorer with id: 0, buf_path: /tmp/plasma_share6036
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:55: init agent group for: explore
[2m[36m(train_xt pid=79720)[0m /tmp/plasma81481:   
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:56: broker status timeout!
[2m[36m(train_xt pid=79720)[0m /tmp/plasma_share1504:
[2m[36m(train_xt pid=78567)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78567)[0m Instructions for updating:
[2m[36m(train_xt pid=78567)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:56: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=78630)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
== Status ==
Current time: 2023-09-12 21:49:13 (running for 00:00:53.56)
Memory usage on this node: 24.4/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


== Status ==
Current time: 2023-09-12 21:49:18 (running for 00:00:58.56)
Memory usage on this node: 24.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


== Status ==
Current time: 2023-09-12 21:49:23 (running for 00:01:03.57)
Memory usage on this node: 25.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


== Status ==
Current time: 2023-09-12 21:49:28 (running for 00:01:08.57)
Memory usage on this node: 25.9/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


== Status ==
Current time: 2023-09-12 21:49:33 (running for 00:01:13.58)
Memory usage on this node: 26.0/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78524)[0m  78684
[2m[36m(train_xt pid=78524)[0m  79246
== Status ==
Current time: 2023-09-12 21:49:38 (running for 00:01:18.58)
Memory usage on this node: 26.0/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78524)[0m good
[2m[36m(train_xt pid=78524)[0m log filename ================== /tmp/16945265085971088
[2m[36m(train_xt pid=78524)[0m step_per_second ============ 641.0
[2m[36m(train_xt pid=78524)[0m tune_cost =================== True
[2m[36m(train_xt pid=78524)[0m  79255
[2m[36m(train_xt pid=78524)[0m =======================env_pool_size======================3
[2m[36m(train_xt pid=78524)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=78524)[0m get max throughput start_core============================= 0
[2m[36m(train_xt pid=78524)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945265800581827.yaml
[2m[36m(train_xt pid=78524)[0m run_log ======================== /tmp/test_opt_bys16945265800581827.log
[2m[36m(train_xt pid=78567)[0m  79290
[2m[36m(train_xt pid=78567)[0m  80392
== Status ==
Current time: 2023-09-12 21:49:43 (running for 00:01:23.59)
Memory usage on this node: 23.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78567)[0m good
[2m[36m(train_xt pid=78567)[0m log filename ================== /tmp/16945265150061831
[2m[36m(train_xt pid=78567)[0m step_per_second ============ 638.0
[2m[36m(train_xt pid=78567)[0m tune_cost =================== True
[2m[36m(train_xt pid=78567)[0m  80401
[2m[36m(train_xt pid=78567)[0m =======================env_pool_size======================4
[2m[36m(train_xt pid=78567)[0m =======================env_pool_wait_nums======================3
[2m[36m(train_xt pid=78567)[0m get max throughput start_core============================= 10
[2m[36m(train_xt pid=78567)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945265860501933.yaml
[2m[36m(train_xt pid=78567)[0m run_log ======================== /tmp/test_opt_bys16945265860501933.log
== Status ==
Current time: 2023-09-12 21:49:48 (running for 00:01:28.59)
Memory usage on this node: 22.0/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78524)[0m start_core ======================================== 0
[2m[36m(train_xt pid=78524)[0m plasma_store -m 1000000000 -s /tmp/plasma5959
[2m[36m(train_xt pid=78524)[0m self.time_record_filename ============= /tmp/16945265800581827
[2m[36m(train_xt pid=78630)[0m  80620
[2m[36m(train_xt pid=78630)[0m    635
[2m[36m(train_xt pid=78630)[0m good
[2m[36m(train_xt pid=78630)[0m log filename ================== /tmp/16945265218144188
[2m[36m(train_xt pid=78630)[0m step_per_second ============ 626.0
[2m[36m(train_xt pid=78630)[0m tune_cost =================== True
== Status ==
Current time: 2023-09-12 21:49:53 (running for 00:01:33.60)
Memory usage on this node: 21.2/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78630)[0m    660
[2m[36m(train_xt pid=78567)[0m start_core ======================================== 10
[2m[36m(train_xt pid=78567)[0m plasma_store -m 1000000000 -s /tmp/plasma6010
[2m[36m(train_xt pid=78567)[0m self.time_record_filename ============= /tmp/16945265860501933
[2m[36m(train_xt pid=78524)[0m plasma_store -m 100000000 -s /tmp/plasma6036T0
[2m[36m(train_xt pid=78630)[0m =======================env_pool_size======================2
[2m[36m(train_xt pid=78630)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=78630)[0m get max throughput start_core============================= 20
[2m[36m(train_xt pid=78630)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_1694526594530198.yaml
[2m[36m(train_xt pid=78630)[0m run_log ======================== /tmp/test_opt_bys1694526594530198.log
[2m[36m(train_xt pid=79720)[0m   1509
[2m[36m(train_xt pid=79720)[0m   3805
== Status ==
Current time: 2023-09-12 21:49:58 (running for 00:01:38.60)
Memory usage on this node: 20.2/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=79720)[0m good
[2m[36m(train_xt pid=79720)[0m log filename ================== /tmp/16945265297429383
[2m[36m(train_xt pid=79720)[0m step_per_second ============ 640.0
[2m[36m(train_xt pid=79720)[0m tune_cost =================== True
[2m[36m(train_xt pid=79720)[0m   3826
[2m[36m(train_xt pid=78567)[0m plasma_store -m 100000000 -s /tmp/plasma6628T0
[2m[36m(train_xt pid=79720)[0m =======================env_pool_size======================5
[2m[36m(train_xt pid=79720)[0m =======================env_pool_wait_nums======================3
[2m[36m(train_xt pid=79720)[0m get max throughput start_core============================= 30
[2m[36m(train_xt pid=79720)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945265996303618.yaml
[2m[36m(train_xt pid=78630)[0m Instructions for updating:
[2m[36m(train_xt pid=78630)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=79720)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=79720)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:58: Finished train job normally.
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:58: speedup(3): binding env 0 to CPU 0
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:58: init explorer with id: 1, buf_path: /tmp/plasma_share6036
[2m[36m(train_xt pid=79720)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=79720)[0m [I 2023-09-12 21:49:58,580] Trial 3 finished with value: 437.5 and parameters: {'env_pool_size': 2, 'env_pool_wait_nums': 2, 'infer_size': 5}. Best is trial 0 with value: 436.817472698908.
[2m[36m(train_xt pid=79720)[0m /tmp/plasma1504T0:  
[2m[36m(train_xt pid=79720)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/integration/botorch.py:844: ExperimentalWarning: qei_candidates_func is experimental (supported from v2.4.0). The interface can change in the future.
[2m[36m(train_xt pid=79720)[0m   completed_params, completed_values, con, bounds, running_params
[2m[36m(train_xt pid=79720)[0m [W 2023-09-12 21:49:59,667] No objective values are feasible. Using 0 as the best objective in qEI.
[2m[36m(train_xt pid=78567)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:59: set verbosity in broker: info
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:59: init broker with id-0
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:49:59: share buf: plasma_store -m 400000000 -s /tmp/plasma_share6628
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:00: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=78567)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78567)[0m   self.run()
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:00: init explorer with id: 0, buf_path: /tmp/plasma_share6628
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:00: init agent group for: explore
[2m[36m(train_xt pid=78630)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:00: 
[2m[36m(train_xt pid=78630)[0m **************************************************
[2m[36m(train_xt pid=78630)[0m  XT start work...
[2m[36m(train_xt pid=78630)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_1694526594530198.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=78630)[0m **************************************************
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:01: speedup(3): binding env 1 to CPU 1
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:01: init explorer with id: 2, buf_path: /tmp/plasma_share6036
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:01: init learner with:
[2m[36m(train_xt pid=78630)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=78630)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=78630)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=78630)[0m               'agent_num': 1},
[2m[36m(train_xt pid=78630)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=78630)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=78630)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=78630)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=78630)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=78630)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=78630)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=78630)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=78630)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=78630)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=78630)[0m                           'instance_num': 2,
[2m[36m(train_xt pid=78630)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=78630)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=78630)[0m                           'save_model': True,
[2m[36m(train_xt pid=78630)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=78630)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=78630)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78630)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=78630)[0m                                    'model_config': {'LR': 0.002047128,
[2m[36m(train_xt pid=78630)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=78630)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=78630)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=78630)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=78630)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78630)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=78630)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=78630)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=78630)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=78630)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=78630)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78630)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=78630)[0m                                                 84,
[2m[36m(train_xt pid=78630)[0m                                                 4],
[2m[36m(train_xt pid=78630)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=78630)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=78630)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=78630)[0m              'id': 'ImpalaCnnOpt_now_time_1694526594530198',
[2m[36m(train_xt pid=78630)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=78630)[0m 'env_num': 2,
[2m[36m(train_xt pid=78630)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=78630)[0m                         'size': 2,
[2m[36m(train_xt pid=78630)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=78630)[0m                         'vision': False,
[2m[36m(train_xt pid=78630)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=78630)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=78630)[0m             'now_time': '1694526594530198'},
[2m[36m(train_xt pid=78630)[0m 'gpu': -1,
[2m[36m(train_xt pid=78630)[0m 'group_num': 1,
[2m[36m(train_xt pid=78630)[0m 'lock': 1,
[2m[36m(train_xt pid=78630)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78630)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=78630)[0m                        'model_config': {'LR': 0.002047128,
[2m[36m(train_xt pid=78630)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=78630)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=78630)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=78630)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=78630)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78630)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=78630)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=78630)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=78630)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=78630)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=78630)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78630)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=78630)[0m                                     84,
[2m[36m(train_xt pid=78630)[0m                                     4],
[2m[36m(train_xt pid=78630)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=78630)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=78630)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=78630)[0m                'dummy_user',
[2m[36m(train_xt pid=78630)[0m                'dummy_password')],
[2m[36m(train_xt pid=78630)[0m 'speedup': 3,
[2m[36m(train_xt pid=78630)[0m 'start_core': 20}
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:01: Init Broker server info:
[2m[36m(train_xt pid=78630)[0m {'recv': {'port': 30940,
[2m[36m(train_xt pid=78630)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=78630)[0m 'send': [{'port': 38063,
[2m[36m(train_xt pid=78630)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:01: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 30940, 38063, '127.0.0.1', 'info')
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:01: launch local broker with lib success
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:01: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:01: **********
[2m[36m(train_xt pid=78630)[0m workspace:
[2m[36m(train_xt pid=78630)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_1694526594530198
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=79720)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=79720)[0m Instructions for updating:
[2m[36m(train_xt pid=79720)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:03: speedup(3): binding env 0 to CPU 10
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:03: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:03: init explorer with id: 1, buf_path: /tmp/plasma_share6628
[2m[36m(train_xt pid=78630)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78630)[0m Instructions for updating:
[2m[36m(train_xt pid=78630)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:04: speedup(3): binding env 2 to CPU 2
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:04: init explorer with id: 3, buf_path: /tmp/plasma_share6036
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:05: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:05: 
[2m[36m(train_xt pid=79720)[0m **************************************************
[2m[36m(train_xt pid=79720)[0m  XT start work...
[2m[36m(train_xt pid=79720)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945265996303618.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=79720)[0m **************************************************
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:06: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:06: speedup(3): binding env 1 to CPU 11
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:06: init explorer with id: 2, buf_path: /tmp/plasma_share6628
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:06: init learner with:
[2m[36m(train_xt pid=79720)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=79720)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=79720)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=79720)[0m               'agent_num': 1},
[2m[36m(train_xt pid=79720)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=79720)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=79720)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=79720)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=79720)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=79720)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=79720)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=79720)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=79720)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=79720)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=79720)[0m                           'instance_num': 4,
[2m[36m(train_xt pid=79720)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=79720)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=79720)[0m                           'save_model': True,
[2m[36m(train_xt pid=79720)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=79720)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=79720)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=79720)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=79720)[0m                                    'model_config': {'LR': 0.001824478,
[2m[36m(train_xt pid=79720)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=79720)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=79720)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=79720)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=79720)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=79720)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=79720)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=79720)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=79720)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=79720)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=79720)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=79720)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=79720)[0m                                                 84,
[2m[36m(train_xt pid=79720)[0m                                                 4],
[2m[36m(train_xt pid=79720)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=79720)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=79720)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=79720)[0m              'id': 'ImpalaCnnOpt_now_time_16945265996303618',
[2m[36m(train_xt pid=79720)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=79720)[0m 'env_num': 4,
[2m[36m(train_xt pid=79720)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=79720)[0m                         'size': 5,
[2m[36m(train_xt pid=79720)[0m                         'vector_env_size': 5,
[2m[36m(train_xt pid=79720)[0m                         'vision': False,
[2m[36m(train_xt pid=79720)[0m                         'wait_num': 3},
[2m[36m(train_xt pid=79720)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=79720)[0m             'now_time': '16945265996303618'},
[2m[36m(train_xt pid=79720)[0m 'gpu': -1,
[2m[36m(train_xt pid=79720)[0m 'group_num': 1,
[2m[36m(train_xt pid=79720)[0m 'lock': 1,
[2m[36m(train_xt pid=79720)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=79720)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=79720)[0m                        'model_config': {'LR': 0.001824478,
[2m[36m(train_xt pid=79720)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=79720)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=79720)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=79720)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=79720)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=79720)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=79720)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=79720)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=79720)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=79720)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=79720)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=79720)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=79720)[0m                                     84,
[2m[36m(train_xt pid=79720)[0m                                     4],
[2m[36m(train_xt pid=79720)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=79720)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=79720)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=79720)[0m                'dummy_user',
[2m[36m(train_xt pid=79720)[0m                'dummy_password')],
[2m[36m(train_xt pid=79720)[0m 'speedup': 3,
[2m[36m(train_xt pid=79720)[0m 'start_core': 30}
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:06: Init Broker server info:
[2m[36m(train_xt pid=79720)[0m {'recv': {'port': 32097,
[2m[36m(train_xt pid=79720)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=79720)[0m 'send': [{'port': 27753,
[2m[36m(train_xt pid=79720)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:06: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 32097, 27753, '127.0.0.1', 'info')
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:06: launch local broker with lib success
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:06: **********
[2m[36m(train_xt pid=79720)[0m workspace:
[2m[36m(train_xt pid=79720)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945265996303618
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=78630)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:07: set verbosity in broker: info
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:07: init broker with id-0
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:07: share buf: plasma_store -m 400000000 -s /tmp/plasma_share8072
[2m[36m(train_xt pid=78630)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78630)[0m   self.run()
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:07: init explorer with id: 0, buf_path: /tmp/plasma_share8072
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:07: speedup(3): binding env 3 to CPU 3
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:07: init agent group for: explore
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:08: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=79720)[0m Instructions for updating:
[2m[36m(train_xt pid=79720)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:09: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:09: speedup(3): binding env 2 to CPU 12
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:10: speedup(3): binding env 0 to CPU 20
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:10: init explorer with id: 1, buf_path: /tmp/plasma_share8072
[2m[36m(train_xt pid=78524)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78524)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78524)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78524)[0m   self.run()
[2m[36m(train_xt pid=78524)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78524)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:11: Task: T0         | Train_count:         6 | Steps:      1780 | Elapsed time: 19 seconds
[2m[36m(train_xt pid=78524)[0m mean_env_step_ms:         2.316468	mean_explore_ms:        650.034857	mean_inference_ms:        2.493046	mean_loop_time_ms:      155.867179
[2m[36m(train_xt pid=78524)[0m mean_prepare_data_ms:     0.757081	mean_restore_model_ms:   41.638517	mean_train_time_ms:     283.411843	mean_wait_model_ms:     5301.874399
[2m[36m(train_xt pid=78524)[0m mean_wait_sample_ms:    2534.686565	step_per_second:              89.0	train_loss:              26.398149	train_reward_avg:         3.333333
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=79720)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:12: set verbosity in broker: info
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:12: init broker with id-0
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:12: share buf: plasma_store -m 400000000 -s /tmp/plasma_share9444
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:12: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=79720)[0m   self.run()
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:12: init explorer with id: 0, buf_path: /tmp/plasma_share9444
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:12: init agent group for: explore
[2m[36m(train_xt pid=78567)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78567)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78567)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78567)[0m   self.run()
[2m[36m(train_xt pid=78567)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78567)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:13: Task: T0         | Train_count:         4 | Steps:      1701 | Elapsed time: 16 seconds
[2m[36m(train_xt pid=78567)[0m mean_env_step_ms:         2.241827	mean_explore_ms:        678.076684	mean_inference_ms:        2.703343	mean_loop_time_ms:      252.293646
[2m[36m(train_xt pid=78567)[0m mean_prepare_data_ms:     1.137543	mean_restore_model_ms:   35.354614	mean_train_time_ms:     406.613588	mean_wait_model_ms:     3919.545412
[2m[36m(train_xt pid=78567)[0m mean_wait_sample_ms:    2947.840071	step_per_second:             100.0	train_loss:              -3.380329	train_reward_avg:              0.5
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:13: speedup(3): binding env 1 to CPU 21
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:14: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:15: speedup(3): binding env 0 to CPU 30
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:16: init explorer with id: 1, buf_path: /tmp/plasma_share9444
[2m[36m(train_xt pid=78630)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78630)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78630)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78630)[0m   self.run()
[2m[36m(train_xt pid=78630)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78630)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:17: Task: T0         | Train_count:         0 | Steps:       253 | Elapsed time: 12 seconds
[2m[36m(train_xt pid=78630)[0m mean_env_step_ms:         2.561109	mean_explore_ms:         733.40714	mean_inference_ms:        2.872233	mean_loop_time_ms:             nan
[2m[36m(train_xt pid=78630)[0m mean_prepare_data_ms:     0.816107	mean_restore_model_ms:   55.944443	mean_train_time_ms:            nan	mean_wait_model_ms:     2889.690161
[2m[36m(train_xt pid=78630)[0m mean_wait_sample_ms:    10727.77462	step_per_second:              19.0	train_loss:              -3.445222	train_reward_avg:              0.0
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:18: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:19: speedup(3): binding env 1 to CPU 31
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:19: init explorer with id: 2, buf_path: /tmp/plasma_share9444
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:20: Task: T0         | Train_count:        48 | Steps:     12485 | Elapsed time: 28 seconds
[2m[36m(train_xt pid=78524)[0m mean_env_step_ms:          2.18712	mean_explore_ms:         609.35781	mean_inference_ms:         2.37793	mean_loop_time_ms:      207.348406
[2m[36m(train_xt pid=78524)[0m mean_prepare_data_ms:     0.856769	mean_restore_model_ms:    23.44768	mean_train_time_ms:       19.78879	mean_wait_model_ms:     2762.647486
[2m[36m(train_xt pid=78524)[0m mean_wait_sample_ms:    179.743445	step_per_second:             436.0	train_loss:              22.638586	train_reward_avg:         2.066667
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:21: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:21: Task: T0         | Train_count:        30 | Steps:     11865 | Elapsed time: 25 seconds
[2m[36m(train_xt pid=78567)[0m mean_env_step_ms:          2.16307	mean_explore_ms:        652.017014	mean_inference_ms:        2.660802	mean_loop_time_ms:      319.548702
[2m[36m(train_xt pid=78567)[0m mean_prepare_data_ms:     1.109552	mean_restore_model_ms:   22.630385	mean_train_time_ms:      27.205682	mean_wait_model_ms:     2367.173229
[2m[36m(train_xt pid=78567)[0m mean_wait_sample_ms:    283.898735	step_per_second:             471.0	train_loss:             -30.053448	train_reward_avg:            1.125
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:22: speedup(3): binding env 2 to CPU 32
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:22: init explorer with id: 3, buf_path: /tmp/plasma_share9444
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:24: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:25: speedup(3): binding env 3 to CPU 33
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:28: Task: T0         | Train_count:        88 | Steps:     22713 | Elapsed time: 36 seconds
[2m[36m(train_xt pid=78524)[0m mean_env_step_ms:         2.184732	mean_explore_ms:        602.606815	mean_inference_ms:        2.348057	mean_loop_time_ms:      210.864305
[2m[36m(train_xt pid=78524)[0m mean_prepare_data_ms:     0.881982	mean_restore_model_ms:   15.966247	mean_train_time_ms:      20.324337	mean_wait_model_ms:     1717.616221
[2m[36m(train_xt pid=78524)[0m mean_wait_sample_ms:    182.310164	step_per_second:             616.0	train_loss:               1.405581	train_reward_avg:         1.638889
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=79720)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=79720)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=79720)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=79720)[0m   self.run()
[2m[36m(train_xt pid=79720)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=79720)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:30: Task: T0         | Train_count:         4 | Steps:      1900 | Elapsed time: 20 seconds
[2m[36m(train_xt pid=79720)[0m mean_env_step_ms:         2.654678	mean_explore_ms:        798.217201	mean_inference_ms:        3.156388	mean_loop_time_ms:      278.280318
[2m[36m(train_xt pid=79720)[0m mean_prepare_data_ms:     1.167536	mean_restore_model_ms:   53.164625	mean_train_time_ms:     469.741249	mean_wait_model_ms:     5169.958115
[2m[36m(train_xt pid=79720)[0m mean_wait_sample_ms:    3633.186483	step_per_second:              91.0	train_loss:              67.506081	train_reward_avg:              0.0
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:30: Task: T0         | Train_count:        58 | Steps:     22544 | Elapsed time: 33 seconds
[2m[36m(train_xt pid=78567)[0m mean_env_step_ms:         2.126787	mean_explore_ms:        640.628982	mean_inference_ms:        2.641081	mean_loop_time_ms:      320.587766
[2m[36m(train_xt pid=78567)[0m mean_prepare_data_ms:     1.110911	mean_restore_model_ms:   17.507577	mean_train_time_ms:      28.301597	mean_wait_model_ms:     1752.490139
[2m[36m(train_xt pid=78567)[0m mean_wait_sample_ms:    284.090638	step_per_second:             667.0	train_loss:             -30.634777	train_reward_avg:         1.035714
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:34: Task: T0         | Train_count:        40 | Steps:     10485 | Elapsed time: 30 seconds
[2m[36m(train_xt pid=78630)[0m mean_env_step_ms:         2.430102	mean_explore_ms:         651.48894	mean_inference_ms:        2.496583	mean_loop_time_ms:      450.925994
[2m[36m(train_xt pid=78630)[0m mean_prepare_data_ms:      0.89159	mean_restore_model_ms:   22.045016	mean_train_time_ms:       24.43198	mean_wait_model_ms:     1112.08721
[2m[36m(train_xt pid=78630)[0m mean_wait_sample_ms:     417.58312	step_per_second:             344.0	train_loss:              66.586494	train_reward_avg:              1.0
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:36: Task: T0         | Train_count:        30 | Steps:     11904 | Elapsed time: 26 seconds
[2m[36m(train_xt pid=79720)[0m mean_env_step_ms:         2.488277	mean_explore_ms:         757.42805	mean_inference_ms:        3.094259	mean_loop_time_ms:      253.872919
[2m[36m(train_xt pid=79720)[0m mean_prepare_data_ms:     1.141846	mean_restore_model_ms:   35.452574	mean_train_time_ms:      35.241556	mean_wait_model_ms:     3371.159077
[2m[36m(train_xt pid=79720)[0m mean_wait_sample_ms:    209.499741	step_per_second:             442.0	train_loss:              11.617342	train_reward_avg:             0.85
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:37: Task: T0         | Train_count:       128 | Steps:     33004 | Elapsed time: 45 seconds
[2m[36m(train_xt pid=78524)[0m mean_env_step_ms:         2.206701	mean_explore_ms:        609.423442	mean_inference_ms:        2.385485	mean_loop_time_ms:      220.339632
[2m[36m(train_xt pid=78524)[0m mean_prepare_data_ms:      0.94291	mean_restore_model_ms:    13.59298	mean_train_time_ms:      22.255754	mean_wait_model_ms:      1386.8126
[2m[36m(train_xt pid=78524)[0m mean_wait_sample_ms:    189.482224	step_per_second:             723.0	train_loss:              -5.026348	train_reward_avg:         1.490196
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:39: Task: T0         | Train_count:        86 | Steps:     33312 | Elapsed time: 43 seconds
[2m[36m(train_xt pid=78567)[0m mean_env_step_ms:          2.10101	mean_explore_ms:        636.418772	mean_inference_ms:        2.656467	mean_loop_time_ms:      335.013676
[2m[36m(train_xt pid=78567)[0m mean_prepare_data_ms:     1.268733	mean_restore_model_ms:   13.352601	mean_train_time_ms:      27.121842	mean_wait_model_ms:     1281.742938
[2m[36m(train_xt pid=78567)[0m mean_wait_sample_ms:    299.236262	step_per_second:             772.0	train_loss:              -47.55912	train_reward_avg:         1.041667
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:43: Task: T0         | Train_count:        58 | Steps:     22656 | Elapsed time: 34 seconds
[2m[36m(train_xt pid=79720)[0m mean_env_step_ms:         2.404523	mean_explore_ms:        735.447129	mean_inference_ms:        3.053991	mean_loop_time_ms:      262.820327
[2m[36m(train_xt pid=79720)[0m mean_prepare_data_ms:     1.060569	mean_restore_model_ms:    25.29637	mean_train_time_ms:      38.389027	mean_wait_model_ms:     2355.39939
[2m[36m(train_xt pid=79720)[0m mean_wait_sample_ms:    215.363967	step_per_second:             661.0	train_loss:             124.112007	train_reward_avg:             1.15
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=78524)[0m /tmp/plasma5959:    
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:45: broker status timeout!
[2m[36m(train_xt pid=78524)[0m /tmp/plasma_share6036:
[2m[36m(train_xt pid=78567)[0m /tmp/plasma6010:    
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:47: broker status timeout!
[2m[36m(train_xt pid=78524)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78524)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:47: Finished train job normally.
[2m[36m(train_xt pid=78524)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78524)[0m [I 2023-09-12 21:50:47,789] Trial 4 finished with value: 387.27524204702627 and parameters: {'env_pool_size': 3, 'env_pool_wait_nums': 2, 'infer_size': 4}. Best is trial 4 with value: 387.27524204702627.
[2m[36m(train_xt pid=78567)[0m /tmp/plasma_share6628:
[2m[36m(train_xt pid=78524)[0m /tmp/plasma6036T0:  
[2m[36m(train_xt pid=78524)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/integration/botorch.py:844: ExperimentalWarning: qei_candidates_func is experimental (supported from v2.4.0). The interface can change in the future.
[2m[36m(train_xt pid=78524)[0m   completed_params, completed_values, con, bounds, running_params
[2m[36m(train_xt pid=78524)[0m [W 2023-09-12 21:50:48,889] No objective values are feasible. Using 0 as the best objective in qEI.
[2m[36m(train_xt pid=78567)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78567)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:49: Finished train job normally.
[2m[36m(train_xt pid=78567)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78567)[0m [I 2023-09-12 21:50:49,640] Trial 5 finished with value: 362.6943005181347 and parameters: {'env_pool_size': 4, 'env_pool_wait_nums': 3, 'infer_size': 3}. Best is trial 5 with value: 362.6943005181347.
[2m[36m(train_xt pid=78567)[0m /tmp/plasma6628T0:  
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:50: Task: T0         | Train_count:        86 | Steps:     33183 | Elapsed time: 40 seconds
[2m[36m(train_xt pid=79720)[0m mean_env_step_ms:         2.305589	mean_explore_ms:        708.442152	mean_inference_ms:        2.969615	mean_loop_time_ms:      234.949708
[2m[36m(train_xt pid=79720)[0m mean_prepare_data_ms:     1.177609	mean_restore_model_ms:   20.516455	mean_train_time_ms:      36.422265	mean_wait_model_ms:     1853.047982
[2m[36m(train_xt pid=79720)[0m mean_wait_sample_ms:    189.137578	step_per_second:             810.0	train_loss:             -15.622272	train_reward_avg:         1.316667
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=78567)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/integration/botorch.py:844: ExperimentalWarning: qei_candidates_func is experimental (supported from v2.4.0). The interface can change in the future.
[2m[36m(train_xt pid=78567)[0m   completed_params, completed_values, con, bounds, running_params
[2m[36m(train_xt pid=78567)[0m [W 2023-09-12 21:50:50,740] No objective values are feasible. Using 0 as the best objective in qEI.
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:52: Task: T0         | Train_count:        80 | Steps:     20601 | Elapsed time: 48 seconds
[2m[36m(train_xt pid=78630)[0m mean_env_step_ms:         2.436579	mean_explore_ms:        648.573975	mean_inference_ms:        2.495906	mean_loop_time_ms:      423.046947
[2m[36m(train_xt pid=78630)[0m mean_prepare_data_ms:     0.882614	mean_restore_model_ms:   13.685505	mean_train_time_ms:      24.478769	mean_wait_model_ms:     673.189978
[2m[36m(train_xt pid=78630)[0m mean_wait_sample_ms:    388.708103	step_per_second:             428.0	train_loss:             -36.752789	train_reward_avg:         1.041667
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78524)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78524)[0m Instructions for updating:
[2m[36m(train_xt pid=78524)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78567)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78567)[0m Instructions for updating:
[2m[36m(train_xt pid=78567)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=79720)[0m /tmp/plasma7790:    
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:56: broker status timeout!
[2m[36m(train_xt pid=78524)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:56: 
[2m[36m(train_xt pid=78524)[0m **************************************************
[2m[36m(train_xt pid=78524)[0m  XT start work...
[2m[36m(train_xt pid=78524)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945266488502111.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=78524)[0m **************************************************
[2m[36m(train_xt pid=79720)[0m /tmp/plasma_share9444:
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:57: init learner with:
[2m[36m(train_xt pid=78524)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=78524)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=78524)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=78524)[0m               'agent_num': 1},
[2m[36m(train_xt pid=78524)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=78524)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=78524)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=78524)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=78524)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=78524)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=78524)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=78524)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=78524)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=78524)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=78524)[0m                           'instance_num': 2,
[2m[36m(train_xt pid=78524)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=78524)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=78524)[0m                           'save_model': True,
[2m[36m(train_xt pid=78524)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=78524)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=78524)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78524)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=78524)[0m                                    'model_config': {'LR': 0.001500138,
[2m[36m(train_xt pid=78524)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=78524)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=78524)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=78524)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=78524)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78524)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=78524)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=78524)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=78524)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=78524)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=78524)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78524)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=78524)[0m                                                 84,
[2m[36m(train_xt pid=78524)[0m                                                 4],
[2m[36m(train_xt pid=78524)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=78524)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=78524)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=78524)[0m              'id': 'ImpalaCnnOpt_now_time_16945266488502111',
[2m[36m(train_xt pid=78524)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=78524)[0m 'env_num': 2,
[2m[36m(train_xt pid=78524)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=78524)[0m                         'size': 3,
[2m[36m(train_xt pid=78524)[0m                         'vector_env_size': 3,
[2m[36m(train_xt pid=78524)[0m                         'vision': False,
[2m[36m(train_xt pid=78524)[0m                         'wait_num': 3},
[2m[36m(train_xt pid=78524)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=78524)[0m             'now_time': '16945266488502111'},
[2m[36m(train_xt pid=78524)[0m 'gpu': -1,
[2m[36m(train_xt pid=78524)[0m 'group_num': 1,
[2m[36m(train_xt pid=78524)[0m 'lock': 1,
[2m[36m(train_xt pid=78524)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78524)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=78524)[0m                        'model_config': {'LR': 0.001500138,
[2m[36m(train_xt pid=78524)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=78524)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=78524)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=78524)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=78524)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78524)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=78524)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=78524)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=78524)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=78524)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=78524)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78524)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=78524)[0m                                     84,
[2m[36m(train_xt pid=78524)[0m                                     4],
[2m[36m(train_xt pid=78524)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=78524)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=78524)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=78524)[0m                'dummy_user',
[2m[36m(train_xt pid=78524)[0m                'dummy_password')],
[2m[36m(train_xt pid=78524)[0m 'speedup': 3,
[2m[36m(train_xt pid=78524)[0m 'start_core': 0}
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:57: Init Broker server info:
[2m[36m(train_xt pid=78524)[0m {'recv': {'port': 32277,
[2m[36m(train_xt pid=78524)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=78524)[0m 'send': [{'port': 32932,
[2m[36m(train_xt pid=78524)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:57: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 32277, 32932, '127.0.0.1', 'info')
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:57: launch local broker with lib success
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:57: **********
[2m[36m(train_xt pid=78524)[0m workspace:
[2m[36m(train_xt pid=78524)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945266488502111
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78567)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:58: 
[2m[36m(train_xt pid=78567)[0m **************************************************
[2m[36m(train_xt pid=78567)[0m  XT start work...
[2m[36m(train_xt pid=78567)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_1694526650702185.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=78567)[0m **************************************************
[2m[36m(train_xt pid=79720)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=79720)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:58: Finished train job normally.
[2m[36m(train_xt pid=79720)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=79720)[0m [I 2023-09-12 21:50:58,679] Trial 7 finished with value: 444.44444444444446 and parameters: {'env_pool_size': 5, 'env_pool_wait_nums': 3, 'infer_size': 4}. Best is trial 5 with value: 362.6943005181347.
[2m[36m(train_xt pid=79720)[0m /tmp/plasma9444T0:  
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:58: init learner with:
[2m[36m(train_xt pid=78567)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=78567)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=78567)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=78567)[0m               'agent_num': 1},
[2m[36m(train_xt pid=78567)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=78567)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=78567)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=78567)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=78567)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=78567)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=78567)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=78567)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=78567)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=78567)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=78567)[0m                           'instance_num': 2,
[2m[36m(train_xt pid=78567)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=78567)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=78567)[0m                           'save_model': True,
[2m[36m(train_xt pid=78567)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=78567)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=78567)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78567)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=78567)[0m                                    'model_config': {'LR': 0.002928067,
[2m[36m(train_xt pid=78567)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=78567)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=78567)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=78567)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=78567)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78567)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=78567)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=78567)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=78567)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=78567)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=78567)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78567)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=78567)[0m                                                 84,
[2m[36m(train_xt pid=78567)[0m                                                 4],
[2m[36m(train_xt pid=78567)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=78567)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=78567)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=78567)[0m              'id': 'ImpalaCnnOpt_now_time_1694526650702185',
[2m[36m(train_xt pid=78567)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=78567)[0m 'env_num': 2,
[2m[36m(train_xt pid=78567)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=78567)[0m                         'size': 3,
[2m[36m(train_xt pid=78567)[0m                         'vector_env_size': 3,
[2m[36m(train_xt pid=78567)[0m                         'vision': False,
[2m[36m(train_xt pid=78567)[0m                         'wait_num': 3},
[2m[36m(train_xt pid=78567)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=78567)[0m             'now_time': '1694526650702185'},
[2m[36m(train_xt pid=78567)[0m 'gpu': -1,
[2m[36m(train_xt pid=78567)[0m 'group_num': 1,
[2m[36m(train_xt pid=78567)[0m 'lock': 1,
[2m[36m(train_xt pid=78567)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78567)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=78567)[0m                        'model_config': {'LR': 0.002928067,
[2m[36m(train_xt pid=78567)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=78567)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=78567)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=78567)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=78567)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78567)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=78567)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=78567)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=78567)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=78567)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=78567)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78567)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=78567)[0m                                     84,
[2m[36m(train_xt pid=78567)[0m                                     4],
[2m[36m(train_xt pid=78567)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=78567)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=78567)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=78567)[0m                'dummy_user',
[2m[36m(train_xt pid=78567)[0m                'dummy_password')],
[2m[36m(train_xt pid=78567)[0m 'speedup': 3,
[2m[36m(train_xt pid=78567)[0m 'start_core': 10}
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:58: Init Broker server info:
[2m[36m(train_xt pid=78567)[0m {'recv': {'port': 34190,
[2m[36m(train_xt pid=78567)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=78567)[0m 'send': [{'port': 33596,
[2m[36m(train_xt pid=78567)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:58: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 34190, 33596, '127.0.0.1', 'info')
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:58: launch local broker with lib success
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:50:59: **********
[2m[36m(train_xt pid=78567)[0m workspace:
[2m[36m(train_xt pid=78567)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_1694526650702185
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=79720)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/integration/botorch.py:844: ExperimentalWarning: qei_candidates_func is experimental (supported from v2.4.0). The interface can change in the future.
[2m[36m(train_xt pid=79720)[0m   completed_params, completed_values, con, bounds, running_params
[2m[36m(train_xt pid=79720)[0m [W 2023-09-12 21:50:59,765] No objective values are feasible. Using 0 as the best objective in qEI.
[2m[36m(train_xt pid=78524)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=79720)[0m run_log ======================== /tmp/test_opt_bys16945265996303618.log
[2m[36m(train_xt pid=78630)[0m start_core ======================================== 20
[2m[36m(train_xt pid=78630)[0m plasma_store -m 1000000000 -s /tmp/plasma7182
[2m[36m(train_xt pid=78630)[0m self.time_record_filename ============= /tmp/1694526594530198
== Status ==
Current time: 2023-09-12 21:50:03 (running for 00:01:43.61)
Memory usage on this node: 21.1/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=79720)[0m start_core ======================================== 30
[2m[36m(train_xt pid=79720)[0m plasma_store -m 1000000000 -s /tmp/plasma7790
[2m[36m(train_xt pid=79720)[0m self.time_record_filename ============= /tmp/16945265996303618
[2m[36m(train_xt pid=78630)[0m plasma_store -m 100000000 -s /tmp/plasma8072T0
== Status ==
Current time: 2023-09-12 21:50:08 (running for 00:01:48.61)
Memory usage on this node: 22.5/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=79720)[0m plasma_store -m 100000000 -s /tmp/plasma9444T0
== Status ==
Current time: 2023-09-12 21:50:13 (running for 00:01:53.63)
Memory usage on this node: 24.7/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


== Status ==
Current time: 2023-09-12 21:50:18 (running for 00:01:58.63)
Memory usage on this node: 25.7/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


== Status ==
Current time: 2023-09-12 21:50:23 (running for 00:02:03.64)
Memory usage on this node: 25.9/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


== Status ==
Current time: 2023-09-12 21:50:28 (running for 00:02:08.64)
Memory usage on this node: 26.9/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


== Status ==
Current time: 2023-09-12 21:50:33 (running for 00:02:13.65)
Memory usage on this node: 27.3/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


== Status ==
Current time: 2023-09-12 21:50:38 (running for 00:02:18.65)
Memory usage on this node: 27.4/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


== Status ==
Current time: 2023-09-12 21:50:43 (running for 00:02:23.66)
Memory usage on this node: 27.4/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78524)[0m   6038
[2m[36m(train_xt pid=78524)[0m   7072
[2m[36m(train_xt pid=78567)[0m   6632
[2m[36m(train_xt pid=78524)[0m good
[2m[36m(train_xt pid=78524)[0m log filename ================== /tmp/16945265800581827
[2m[36m(train_xt pid=78524)[0m step_per_second ============ 723.0
[2m[36m(train_xt pid=78524)[0m tune_cost =================== True
[2m[36m(train_xt pid=78567)[0m   7759
[2m[36m(train_xt pid=78524)[0m   7080
== Status ==
Current time: 2023-09-12 21:50:48 (running for 00:02:28.66)
Memory usage on this node: 25.3/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78567)[0m good
[2m[36m(train_xt pid=78567)[0m log filename ================== /tmp/16945265860501933
[2m[36m(train_xt pid=78567)[0m step_per_second ============ 772.0
[2m[36m(train_xt pid=78567)[0m tune_cost =================== True
[2m[36m(train_xt pid=78567)[0m   7767
[2m[36m(train_xt pid=78524)[0m =======================env_pool_size======================3
[2m[36m(train_xt pid=78524)[0m =======================env_pool_wait_nums======================3
[2m[36m(train_xt pid=78524)[0m get max throughput start_core============================= 0
[2m[36m(train_xt pid=78524)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945266488502111.yaml
[2m[36m(train_xt pid=78524)[0m run_log ======================== /tmp/test_opt_bys16945266488502111.log
[2m[36m(train_xt pid=78567)[0m =======================env_pool_size======================3
[2m[36m(train_xt pid=78567)[0m =======================env_pool_wait_nums======================3
[2m[36m(train_xt pid=78567)[0m get max throughput start_core============================= 10
[2m[36m(train_xt pid=78567)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_1694526650702185.yaml
[2m[36m(train_xt pid=78567)[0m run_log ======================== /tmp/test_opt_bys1694526650702185.log
== Status ==
Current time: 2023-09-12 21:50:53 (running for 00:02:33.67)
Memory usage on this node: 23.5/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=79720)[0m   9446
[2m[36m(train_xt pid=79720)[0m  10819
[2m[36m(train_xt pid=78524)[0m start_core ======================================== 0
[2m[36m(train_xt pid=78524)[0m plasma_store -m 1000000000 -s /tmp/plasma12046
[2m[36m(train_xt pid=78524)[0m self.time_record_filename ============= /tmp/16945266488502111
== Status ==
Current time: 2023-09-12 21:50:58 (running for 00:02:38.67)
Memory usage on this node: 22.6/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=79720)[0m good
[2m[36m(train_xt pid=79720)[0m log filename ================== /tmp/16945265996303618
[2m[36m(train_xt pid=79720)[0m step_per_second ============ 810.0
[2m[36m(train_xt pid=79720)[0m tune_cost =================== True
[2m[36m(train_xt pid=79720)[0m  10827
[2m[36m(train_xt pid=78567)[0m start_core ======================================== 10
[2m[36m(train_xt pid=78567)[0m plasma_store -m 1000000000 -s /tmp/plasma12057
[2m[36m(train_xt pid=78567)[0m self.time_record_filename ============= /tmp/1694526650702185
[2m[36m(train_xt pid=79720)[0m =======================env_pool_size======================4
[2m[36m(train_xt pid=79720)[0m =======================env_pool_wait_nums======================4
[2m[36m(train_xt pid=78524)[0m Instructions for updating:
[2m[36m(train_xt pid=78524)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78567)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78567)[0m Instructions for updating:
[2m[36m(train_xt pid=78567)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78524)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:03: set verbosity in broker: info
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:03: init broker with id-0
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:03: share buf: plasma_store -m 400000000 -s /tmp/plasma_share12119
[2m[36m(train_xt pid=79720)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=79720)[0m Instructions for updating:
[2m[36m(train_xt pid=79720)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78524)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78524)[0m   self.run()
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:03: init explorer with id: 0, buf_path: /tmp/plasma_share12119
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:03: init agent group for: explore
[2m[36m(train_xt pid=78567)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:04: set verbosity in broker: info
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:04: init broker with id-0
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:04: share buf: plasma_store -m 400000000 -s /tmp/plasma_share12672
[2m[36m(train_xt pid=78567)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78567)[0m   self.run()
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:05: init explorer with id: 0, buf_path: /tmp/plasma_share12672
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:05: init agent group for: explore
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:05: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:06: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:06: speedup(3): binding env 0 to CPU 0
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:07: init explorer with id: 1, buf_path: /tmp/plasma_share12119
[2m[36m(train_xt pid=79720)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:06: 
[2m[36m(train_xt pid=79720)[0m **************************************************
[2m[36m(train_xt pid=79720)[0m  XT start work...
[2m[36m(train_xt pid=79720)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945266597261996.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=79720)[0m **************************************************
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:07: init learner with:
[2m[36m(train_xt pid=79720)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=79720)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=79720)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=79720)[0m               'agent_num': 1},
[2m[36m(train_xt pid=79720)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=79720)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=79720)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=79720)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=79720)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=79720)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=79720)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=79720)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=79720)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=79720)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=79720)[0m                           'instance_num': 4,
[2m[36m(train_xt pid=79720)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=79720)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=79720)[0m                           'save_model': True,
[2m[36m(train_xt pid=79720)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=79720)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=79720)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=79720)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=79720)[0m                                    'model_config': {'LR': 0.001824478,
[2m[36m(train_xt pid=79720)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=79720)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=79720)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=79720)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=79720)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=79720)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=79720)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=79720)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=79720)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=79720)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=79720)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=79720)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=79720)[0m                                                 84,
[2m[36m(train_xt pid=79720)[0m                                                 4],
[2m[36m(train_xt pid=79720)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=79720)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=79720)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=79720)[0m              'id': 'ImpalaCnnOpt_now_time_16945266597261996',
[2m[36m(train_xt pid=79720)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=79720)[0m 'env_num': 4,
[2m[36m(train_xt pid=79720)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=79720)[0m                         'size': 4,
[2m[36m(train_xt pid=79720)[0m                         'vector_env_size': 4,
[2m[36m(train_xt pid=79720)[0m                         'vision': False,
[2m[36m(train_xt pid=79720)[0m                         'wait_num': 4},
[2m[36m(train_xt pid=79720)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=79720)[0m             'now_time': '16945266597261996'},
[2m[36m(train_xt pid=79720)[0m 'gpu': -1,
[2m[36m(train_xt pid=79720)[0m 'group_num': 1,
[2m[36m(train_xt pid=79720)[0m 'lock': 1,
[2m[36m(train_xt pid=79720)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=79720)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=79720)[0m                        'model_config': {'LR': 0.001824478,
[2m[36m(train_xt pid=79720)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=79720)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=79720)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=79720)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=79720)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=79720)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=79720)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=79720)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=79720)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=79720)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=79720)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=79720)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=79720)[0m                                     84,
[2m[36m(train_xt pid=79720)[0m                                     4],
[2m[36m(train_xt pid=79720)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=79720)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=79720)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=79720)[0m                'dummy_user',
[2m[36m(train_xt pid=79720)[0m                'dummy_password')],
[2m[36m(train_xt pid=79720)[0m 'speedup': 3,
[2m[36m(train_xt pid=79720)[0m 'start_core': 30}
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:07: Init Broker server info:
[2m[36m(train_xt pid=79720)[0m {'recv': {'port': 24701,
[2m[36m(train_xt pid=79720)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=79720)[0m 'send': [{'port': 25792,
[2m[36m(train_xt pid=79720)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:07: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 24701, 25792, '127.0.0.1', 'info')
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:07: launch local broker with lib success
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:07: Task: T0         | Train_count:       120 | Steps:     30940 | Elapsed time: 1 minutes, 3 seconds
[2m[36m(train_xt pid=78630)[0m mean_env_step_ms:         2.393006	mean_explore_ms:        625.074466	mean_inference_ms:         2.37043	mean_loop_time_ms:      387.013996
[2m[36m(train_xt pid=78630)[0m mean_prepare_data_ms:     0.818217	mean_restore_model_ms:   10.719988	mean_train_time_ms:      20.682013	mean_wait_model_ms:     522.983895
[2m[36m(train_xt pid=78630)[0m mean_wait_sample_ms:    358.238184	step_per_second:             484.0	train_loss:              -9.914865	train_reward_avg:         1.277778
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:07: **********
[2m[36m(train_xt pid=79720)[0m workspace:
[2m[36m(train_xt pid=79720)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945266597261996
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:08: speedup(3): binding env 0 to CPU 10
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:08: init explorer with id: 1, buf_path: /tmp/plasma_share12672
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:08: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:10: speedup(3): binding env 1 to CPU 1
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:09: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=79720)[0m Instructions for updating:
[2m[36m(train_xt pid=79720)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:11: speedup(3): binding env 1 to CPU 11
[2m[36m(train_xt pid=79720)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:13: set verbosity in broker: info
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:13: init broker with id-0
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:13: share buf: plasma_store -m 400000000 -s /tmp/plasma_share13907
[2m[36m(train_xt pid=79720)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=79720)[0m   self.run()
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:14: init explorer with id: 0, buf_path: /tmp/plasma_share13907
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:14: init agent group for: explore
[2m[36m(train_xt pid=78524)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78524)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78524)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78524)[0m   self.run()
[2m[36m(train_xt pid=78524)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78524)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:14: Task: T0         | Train_count:         2 | Steps:      1096 | Elapsed time: 14 seconds
[2m[36m(train_xt pid=78524)[0m mean_env_step_ms:         2.826674	mean_explore_ms:        775.316477	mean_inference_ms:        2.849996	mean_loop_time_ms:      503.456235
[2m[36m(train_xt pid=78524)[0m mean_prepare_data_ms:     1.184384	mean_restore_model_ms:   48.543811	mean_train_time_ms:     665.894826	mean_wait_model_ms:     2951.627016
[2m[36m(train_xt pid=78524)[0m mean_wait_sample_ms:    3991.137425	step_per_second:              77.0	train_loss:              29.143894	train_reward_avg:              0.0
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78567)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78567)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78567)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78567)[0m   self.run()
[2m[36m(train_xt pid=78567)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78567)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:14: Task: T0         | Train_count:         0 | Steps:       253 | Elapsed time: 13 seconds
[2m[36m(train_xt pid=78567)[0m mean_env_step_ms:          2.66037	mean_explore_ms:        752.747178	mean_inference_ms:        2.843438	mean_loop_time_ms:             nan
[2m[36m(train_xt pid=78567)[0m mean_prepare_data_ms:     0.921965	mean_restore_model_ms:   49.449563	mean_train_time_ms:            nan	mean_wait_model_ms:     2959.394574
[2m[36m(train_xt pid=78567)[0m mean_wait_sample_ms:    10924.155712	step_per_second:              19.0	train_loss:              48.723328	train_reward_avg:              0.0
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:15: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:17: speedup(3): binding env 0 to CPU 30
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:17: init explorer with id: 1, buf_path: /tmp/plasma_share13907
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:18: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:20: speedup(3): binding env 1 to CPU 31
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:20: init explorer with id: 2, buf_path: /tmp/plasma_share13907
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:22: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:23: speedup(3): binding env 2 to CPU 32
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:23: init explorer with id: 3, buf_path: /tmp/plasma_share13907
[2m[36m(train_xt pid=78630)[0m /tmp/plasma7182:    
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:24: broker status timeout!
[2m[36m(train_xt pid=78630)[0m /tmp/plasma_share8072:
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:25: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=78630)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78630)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:26: Finished train job normally.
[2m[36m(train_xt pid=78630)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:26: speedup(3): binding env 3 to CPU 33
[2m[36m(train_xt pid=78630)[0m [I 2023-09-12 21:51:26,720] Trial 6 finished with value: 330.57851239669424 and parameters: {'env_pool_size': 2, 'env_pool_wait_nums': 2, 'infer_size': 2}. Best is trial 6 with value: 330.57851239669424.
[2m[36m(train_xt pid=78630)[0m /tmp/plasma8072T0:  
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:27: Task: T0         | Train_count:        26 | Steps:     10341 | Elapsed time: 25 seconds
[2m[36m(train_xt pid=78567)[0m mean_env_step_ms:         2.577906	mean_explore_ms:        699.937296	mean_inference_ms:        2.670314	mean_loop_time_ms:      475.980008
[2m[36m(train_xt pid=78567)[0m mean_prepare_data_ms:     1.076317	mean_restore_model_ms:   22.537422	mean_train_time_ms:      23.178899	mean_wait_model_ms:     1353.022957
[2m[36m(train_xt pid=78567)[0m mean_wait_sample_ms:    443.954766	step_per_second:             405.0	train_loss:             101.481819	train_reward_avg:              1.4
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78630)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/integration/botorch.py:844: ExperimentalWarning: qei_candidates_func is experimental (supported from v2.4.0). The interface can change in the future.
[2m[36m(train_xt pid=78630)[0m   completed_params, completed_values, con, bounds, running_params
[2m[36m(train_xt pid=78630)[0m [W 2023-09-12 21:51:27,834] No objective values are feasible. Using 0 as the best objective in qEI.
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:28: Task: T0         | Train_count:        30 | Steps:     11780 | Elapsed time: 27 seconds
[2m[36m(train_xt pid=78524)[0m mean_env_step_ms:         2.738187	mean_explore_ms:        716.290196	mean_inference_ms:        2.644354	mean_loop_time_ms:      490.539742
[2m[36m(train_xt pid=78524)[0m mean_prepare_data_ms:     1.200438	mean_restore_model_ms:   19.522468	mean_train_time_ms:      25.343692	mean_wait_model_ms:     1181.169987
[2m[36m(train_xt pid=78524)[0m mean_wait_sample_ms:    457.032835	step_per_second:             423.0	train_loss:              -5.449535	train_reward_avg:              1.0
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=79720)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=79720)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=79720)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=79720)[0m   self.run()
[2m[36m(train_xt pid=79720)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=79720)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:30: Task: T0         | Train_count:         1 | Steps:      1021 | Elapsed time: 19 seconds
[2m[36m(train_xt pid=79720)[0m mean_env_step_ms:         3.522143	mean_explore_ms:        961.219788	mean_inference_ms:        3.421414	mean_loop_time_ms:       69.014907
[2m[36m(train_xt pid=79720)[0m mean_prepare_data_ms:     1.516342	mean_restore_model_ms:   55.947006	mean_train_time_ms:      740.12502	mean_wait_model_ms:     6019.292176
[2m[36m(train_xt pid=79720)[0m mean_wait_sample_ms:    5823.020379	step_per_second:              51.0	train_loss:              14.974901	train_reward_avg:              0.0
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=78630)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78630)[0m Instructions for updating:
[2m[36m(train_xt pid=78630)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:36: Task: T0         | Train_count:        22 | Steps:     11733 | Elapsed time: 26 seconds
[2m[36m(train_xt pid=79720)[0m mean_env_step_ms:         3.490601	mean_explore_ms:        923.649867	mean_inference_ms:        3.291397	mean_loop_time_ms:      319.911051
[2m[36m(train_xt pid=79720)[0m mean_prepare_data_ms:     2.204442	mean_restore_model_ms:   38.908442	mean_train_time_ms:      32.198024	mean_wait_model_ms:     4472.475608
[2m[36m(train_xt pid=79720)[0m mean_wait_sample_ms:    277.696586	step_per_second:             447.0	train_loss:             -28.468317	train_reward_avg:           0.6875
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=78630)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:36: 
[2m[36m(train_xt pid=78630)[0m **************************************************
[2m[36m(train_xt pid=78630)[0m  XT start work...
[2m[36m(train_xt pid=78630)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945266877822115.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=78630)[0m **************************************************
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:37: init learner with:
[2m[36m(train_xt pid=78630)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=78630)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=78630)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=78630)[0m               'agent_num': 1},
[2m[36m(train_xt pid=78630)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=78630)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=78630)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=78630)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=78630)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=78630)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=78630)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=78630)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=78630)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=78630)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=78630)[0m                           'instance_num': 3,
[2m[36m(train_xt pid=78630)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=78630)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=78630)[0m                           'save_model': True,
[2m[36m(train_xt pid=78630)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=78630)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=78630)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78630)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=78630)[0m                                    'model_config': {'LR': 0.002047128,
[2m[36m(train_xt pid=78630)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=78630)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=78630)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=78630)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=78630)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78630)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=78630)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=78630)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=78630)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=78630)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=78630)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78630)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=78630)[0m                                                 84,
[2m[36m(train_xt pid=78630)[0m                                                 4],
[2m[36m(train_xt pid=78630)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=78630)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=78630)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=78630)[0m              'id': 'ImpalaCnnOpt_now_time_16945266877822115',
[2m[36m(train_xt pid=78630)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=78630)[0m 'env_num': 3,
[2m[36m(train_xt pid=78630)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=78630)[0m                         'size': 5,
[2m[36m(train_xt pid=78630)[0m                         'vector_env_size': 5,
[2m[36m(train_xt pid=78630)[0m                         'vision': False,
[2m[36m(train_xt pid=78630)[0m                         'wait_num': 3},
[2m[36m(train_xt pid=78630)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=78630)[0m             'now_time': '16945266877822115'},
[2m[36m(train_xt pid=78630)[0m 'gpu': -1,
[2m[36m(train_xt pid=78630)[0m 'group_num': 1,
[2m[36m(train_xt pid=78630)[0m 'lock': 1,
[2m[36m(train_xt pid=78630)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78630)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=78630)[0m                        'model_config': {'LR': 0.002047128,
[2m[36m(train_xt pid=78630)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=78630)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=78630)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=78630)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=78630)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78630)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=78630)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=78630)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=78630)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=78630)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=78630)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78630)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=78630)[0m                                     84,
[2m[36m(train_xt pid=78630)[0m                                     4],
[2m[36m(train_xt pid=78630)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=78630)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=78630)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=78630)[0m                'dummy_user',
[2m[36m(train_xt pid=78630)[0m                'dummy_password')],
[2m[36m(train_xt pid=78630)[0m 'speedup': 3,
[2m[36m(train_xt pid=78630)[0m 'start_core': 20}
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:37: Init Broker server info:
[2m[36m(train_xt pid=78630)[0m {'recv': {'port': 30495,
[2m[36m(train_xt pid=78630)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=78630)[0m 'send': [{'port': 37389,
[2m[36m(train_xt pid=78630)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:37: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 30495, 37389, '127.0.0.1', 'info')
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:37: launch local broker with lib success
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:38: **********
[2m[36m(train_xt pid=78630)[0m workspace:
[2m[36m(train_xt pid=78630)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945266877822115
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:40: Task: T0         | Train_count:        56 | Steps:     21874 | Elapsed time: 40 seconds
[2m[36m(train_xt pid=78524)[0m mean_env_step_ms:         2.705072	mean_explore_ms:        701.517558	mean_inference_ms:        2.596336	mean_loop_time_ms:      501.524198
[2m[36m(train_xt pid=78524)[0m mean_prepare_data_ms:     1.168311	mean_restore_model_ms:   13.902116	mean_train_time_ms:        24.5754	mean_wait_model_ms:     828.309417
[2m[36m(train_xt pid=78524)[0m mean_wait_sample_ms:    468.535984	step_per_second:             535.0	train_loss:              -40.88118	train_reward_avg:         1.148148
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78630)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78630)[0m Instructions for updating:
[2m[36m(train_xt pid=78630)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:41: Task: T0         | Train_count:        54 | Steps:     21119 | Elapsed time: 39 seconds
[2m[36m(train_xt pid=78567)[0m mean_env_step_ms:         2.596187	mean_explore_ms:        692.185534	mean_inference_ms:        2.633178	mean_loop_time_ms:      495.199859
[2m[36m(train_xt pid=78567)[0m mean_prepare_data_ms:     1.190591	mean_restore_model_ms:   14.236238	mean_train_time_ms:      24.786651	mean_wait_model_ms:     879.236036
[2m[36m(train_xt pid=78567)[0m mean_wait_sample_ms:    462.137806	step_per_second:             537.0	train_loss:             206.198303	train_reward_avg:         1.481481
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:42: Task: T0         | Train_count:        42 | Steps:     21893 | Elapsed time: 32 seconds
[2m[36m(train_xt pid=79720)[0m mean_env_step_ms:         3.602841	mean_explore_ms:        909.683156	mean_inference_ms:        3.183068	mean_loop_time_ms:      313.051069
[2m[36m(train_xt pid=79720)[0m mean_prepare_data_ms:     1.748598	mean_restore_model_ms:   25.154233	mean_train_time_ms:      28.216767	mean_wait_model_ms:     2833.204079
[2m[36m(train_xt pid=79720)[0m mean_wait_sample_ms:    275.169468	step_per_second:             674.0	train_loss:             150.845001	train_reward_avg:              1.0
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=78630)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:44: set verbosity in broker: info
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:44: init broker with id-0
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:44: share buf: plasma_store -m 400000000 -s /tmp/plasma_share16264
[2m[36m(train_xt pid=78630)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78630)[0m   self.run()
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:44: init explorer with id: 0, buf_path: /tmp/plasma_share16264
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:44: init agent group for: explore
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:46: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:47: speedup(3): binding env 0 to CPU 20
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:48: init explorer with id: 1, buf_path: /tmp/plasma_share16264
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:48: Task: T0         | Train_count:        62 | Steps:     31991 | Elapsed time: 38 seconds
[2m[36m(train_xt pid=79720)[0m mean_env_step_ms:         3.577422	mean_explore_ms:        896.781683	mean_inference_ms:        3.140574	mean_loop_time_ms:      304.538751
[2m[36m(train_xt pid=79720)[0m mean_prepare_data_ms:      1.68823	mean_restore_model_ms:   20.385522	mean_train_time_ms:      30.279982	mean_wait_model_ms:     2265.262861
[2m[36m(train_xt pid=79720)[0m mean_wait_sample_ms:    263.939309	step_per_second:             829.0	train_loss:             131.509506	train_reward_avg:         1.136364
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:49: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:51: speedup(3): binding env 1 to CPU 21
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:51: init explorer with id: 2, buf_path: /tmp/plasma_share16264
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:53: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:54: speedup(3): binding env 2 to CPU 22
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:54: Task: T0         | Train_count:        82 | Steps:     31796 | Elapsed time: 52 seconds
[2m[36m(train_xt pid=78567)[0m mean_env_step_ms:         2.613913	mean_explore_ms:        686.306752	mean_inference_ms:        2.587231	mean_loop_time_ms:      488.974071
[2m[36m(train_xt pid=78567)[0m mean_prepare_data_ms:     1.157963	mean_restore_model_ms:   11.063099	mean_train_time_ms:      24.925828	mean_wait_model_ms:     701.831763
[2m[36m(train_xt pid=78567)[0m mean_wait_sample_ms:    455.402362	step_per_second:             600.0	train_loss:              57.411415	train_reward_avg:         1.435897
[2m[36m(train_xt pid=79720)[0m get max throughput start_core============================= 30
[2m[36m(train_xt pid=79720)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945266597261996.yaml
[2m[36m(train_xt pid=79720)[0m run_log ======================== /tmp/test_opt_bys16945266597261996.log
== Status ==
Current time: 2023-09-12 21:51:03 (running for 00:02:43.68)
Memory usage on this node: 23.7/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78524)[0m plasma_store -m 100000000 -s /tmp/plasma12119T0
[2m[36m(train_xt pid=78567)[0m plasma_store -m 100000000 -s /tmp/plasma12672T0
[2m[36m(train_xt pid=79720)[0m start_core ======================================== 30
[2m[36m(train_xt pid=79720)[0m plasma_store -m 1000000000 -s /tmp/plasma13212
[2m[36m(train_xt pid=79720)[0m self.time_record_filename ============= /tmp/16945266597261996
== Status ==
Current time: 2023-09-12 21:51:08 (running for 00:02:48.68)
Memory usage on this node: 24.4/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


== Status ==
Current time: 2023-09-12 21:51:13 (running for 00:02:53.69)
Memory usage on this node: 26.5/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=79720)[0m plasma_store -m 100000000 -s /tmp/plasma13907T0
== Status ==
Current time: 2023-09-12 21:51:18 (running for 00:02:58.69)
Memory usage on this node: 27.0/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


== Status ==
Current time: 2023-09-12 21:51:23 (running for 00:03:03.70)
Memory usage on this node: 27.1/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78630)[0m   8075
[2m[36m(train_xt pid=78630)[0m  10135
[2m[36m(train_xt pid=78630)[0m good
[2m[36m(train_xt pid=78630)[0m log filename ================== /tmp/1694526594530198
[2m[36m(train_xt pid=78630)[0m step_per_second ============ 484.0
[2m[36m(train_xt pid=78630)[0m tune_cost =================== True
[2m[36m(train_xt pid=78630)[0m  10143
== Status ==
Current time: 2023-09-12 21:51:28 (running for 00:03:08.70)
Memory usage on this node: 26.0/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78630)[0m =======================env_pool_size======================5
[2m[36m(train_xt pid=78630)[0m =======================env_pool_wait_nums======================3
[2m[36m(train_xt pid=78630)[0m get max throughput start_core============================= 20
[2m[36m(train_xt pid=78630)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945266877822115.yaml
[2m[36m(train_xt pid=78630)[0m run_log ======================== /tmp/test_opt_bys16945266877822115.log
== Status ==
Current time: 2023-09-12 21:51:33 (running for 00:03:13.71)
Memory usage on this node: 26.9/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78630)[0m start_core ======================================== 20
[2m[36m(train_xt pid=78630)[0m plasma_store -m 1000000000 -s /tmp/plasma16211
[2m[36m(train_xt pid=78630)[0m self.time_record_filename ============= /tmp/16945266877822115
== Status ==
Current time: 2023-09-12 21:51:38 (running for 00:03:18.71)
Memory usage on this node: 27.4/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


== Status ==
Current time: 2023-09-12 21:51:43 (running for 00:03:23.72)
Memory usage on this node: 28.1/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78630)[0m plasma_store -m 100000000 -s /tmp/plasma16264T0
== Status ==
Current time: 2023-09-12 21:51:48 (running for 00:03:28.72)
Memory usage on this node: 28.3/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


== Status ==
Current time: 2023-09-12 21:51:53 (running for 00:03:33.72)
Memory usage on this node: 28.5/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=79720)[0m  14073
[2m[36m(train_xt pid=79720)[0m  15071
[2m[36m(train_xt pid=79720)[0m good
[2m[36m(train_xt pid=79720)[0m log filename ================== /tmp/16945266597261996
[2m[36m(train_xt pid=79720)[0m step_per_second ============ 829.0
[2m[36m(train_xt pid=79720)[0m tune_cost =================== True
[2m[36m(train_xt pid=79720)[0m  15080
== Status ==
Current time: 2023-09-12 21:51:58 (running for 00:03:38.73)
Memory usage on this node: 27.0/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=79720)[0m =======================env_pool_size======================4
[2m[36m(train_xt pid=79720)[0m =======================env_pool_wait_nums======================4
[2m[36m(train_xt pid=79720)[0m get max throughput start_core============================= 30
[2m[36m(train_xt pid=79720)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945267191861663.yaml
[2m[36m(train_xt pid=79720)[0m run_log ======================== /tmp/test_opt_bys16945267191861663.log
== Status ==
Current time: 2023-09-12 21:52:03 (running for 00:03:43.73)
Memory usage on this node: 27.2/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78524)[0m  12123
[2m[36m(train_xt pid=78567)[0m  12674
[2m[36m(train_xt pid=78524)[0m  13238
[2m[36m(train_xt pid=78567)[0m  13532
[2m[36m(train_xt pid=79720)[0m start_core ======================================== 30
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:55: Task: T0         | Train_count:        84 | Steps:     32428 | Elapsed time: 54 seconds
[2m[36m(train_xt pid=78524)[0m mean_env_step_ms:         2.698122	mean_explore_ms:        698.312998	mean_inference_ms:        2.591902	mean_loop_time_ms:      504.470086
[2m[36m(train_xt pid=78524)[0m mean_prepare_data_ms:     1.199543	mean_restore_model_ms:   11.410781	mean_train_time_ms:      24.972928	mean_wait_model_ms:     676.801494
[2m[36m(train_xt pid=78524)[0m mean_wait_sample_ms:    471.194077	step_per_second:             590.0	train_loss:             177.100403	train_reward_avg:         1.128205
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=79720)[0m /tmp/plasma13212:   
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:55: broker status timeout!
[2m[36m(train_xt pid=79720)[0m /tmp/plasma_share13907:
[2m[36m(train_xt pid=79720)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=79720)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:57: Finished train job normally.
[2m[36m(train_xt pid=79720)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=79720)[0m [I 2023-09-12 21:51:58,110] Trial 10 finished with value: 386.0072376357057 and parameters: {'env_pool_size': 4, 'env_pool_wait_nums': 4, 'infer_size': 4}. Best is trial 6 with value: 330.57851239669424.
[2m[36m(train_xt pid=78630)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78630)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78630)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78630)[0m   self.run()
[2m[36m(train_xt pid=78630)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78630)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:51:58: Task: T0         | Train_count:         3 | Steps:      1536 | Elapsed time: 17 seconds
[2m[36m(train_xt pid=78630)[0m mean_env_step_ms:         2.167865	mean_explore_ms:        698.058665	mean_inference_ms:        2.923533	mean_loop_time_ms:      253.852427
[2m[36m(train_xt pid=78630)[0m mean_prepare_data_ms:     1.153231	mean_restore_model_ms:   37.302732	mean_train_time_ms:     441.500664	mean_wait_model_ms:     3780.561626
[2m[36m(train_xt pid=78630)[0m mean_wait_sample_ms:    3015.12785	step_per_second:              88.0	train_loss:              21.443447	train_reward_avg:         0.333333
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=79720)[0m /tmp/plasma13907T0: 
[2m[36m(train_xt pid=79720)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/integration/botorch.py:844: ExperimentalWarning: qei_candidates_func is experimental (supported from v2.4.0). The interface can change in the future.
[2m[36m(train_xt pid=79720)[0m   completed_params, completed_values, con, bounds, running_params
[2m[36m(train_xt pid=79720)[0m [W 2023-09-12 21:51:59,234] No objective values are feasible. Using 0 as the best objective in qEI.
[2m[36m(train_xt pid=79720)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=79720)[0m Instructions for updating:
[2m[36m(train_xt pid=79720)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78524)[0m /tmp/plasma12046:   
[2m[36m(train_xt pid=78567)[0m /tmp/plasma12057:   
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:06: Task: T0         | Train_count:        32 | Steps:     12399 | Elapsed time: 25 seconds
[2m[36m(train_xt pid=78630)[0m mean_env_step_ms:          2.03502	mean_explore_ms:        645.079306	mean_inference_ms:        2.732954	mean_loop_time_ms:      271.187711
[2m[36m(train_xt pid=78630)[0m mean_prepare_data_ms:     1.187348	mean_restore_model_ms:   22.972958	mean_train_time_ms:       24.99882	mean_wait_model_ms:     2283.830915
[2m[36m(train_xt pid=78630)[0m mean_wait_sample_ms:    237.107182	step_per_second:             487.0	train_loss:              63.882236	train_reward_avg:         1.383333
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:06: broker status timeout!
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:07: broker status timeout!
[2m[36m(train_xt pid=79720)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:07: 
[2m[36m(train_xt pid=79720)[0m **************************************************
[2m[36m(train_xt pid=79720)[0m  XT start work...
[2m[36m(train_xt pid=79720)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945267191861663.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=79720)[0m **************************************************
[2m[36m(train_xt pid=78524)[0m /tmp/plasma_share12119:
[2m[36m(train_xt pid=78567)[0m /tmp/plasma_share12672:
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:08: init learner with:
[2m[36m(train_xt pid=79720)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=79720)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=79720)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=79720)[0m               'agent_num': 1},
[2m[36m(train_xt pid=79720)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=79720)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=79720)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=79720)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=79720)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=79720)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=79720)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=79720)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=79720)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=79720)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=79720)[0m                           'instance_num': 5,
[2m[36m(train_xt pid=79720)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=79720)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=79720)[0m                           'save_model': True,
[2m[36m(train_xt pid=79720)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=79720)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=79720)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=79720)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=79720)[0m                                    'model_config': {'LR': 0.001824478,
[2m[36m(train_xt pid=79720)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=79720)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=79720)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=79720)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=79720)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=79720)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=79720)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=79720)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=79720)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=79720)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=79720)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=79720)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=79720)[0m                                                 84,
[2m[36m(train_xt pid=79720)[0m                                                 4],
[2m[36m(train_xt pid=79720)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=79720)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=79720)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=79720)[0m              'id': 'ImpalaCnnOpt_now_time_16945267191861663',
[2m[36m(train_xt pid=79720)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=79720)[0m 'env_num': 5,
[2m[36m(train_xt pid=79720)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=79720)[0m                         'size': 4,
[2m[36m(train_xt pid=79720)[0m                         'vector_env_size': 4,
[2m[36m(train_xt pid=79720)[0m                         'vision': False,
[2m[36m(train_xt pid=79720)[0m                         'wait_num': 4},
[2m[36m(train_xt pid=79720)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=79720)[0m             'now_time': '16945267191861663'},
[2m[36m(train_xt pid=79720)[0m 'gpu': -1,
[2m[36m(train_xt pid=79720)[0m 'group_num': 1,
[2m[36m(train_xt pid=79720)[0m 'lock': 1,
[2m[36m(train_xt pid=79720)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=79720)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=79720)[0m                        'model_config': {'LR': 0.001824478,
[2m[36m(train_xt pid=79720)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=79720)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=79720)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=79720)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=79720)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=79720)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=79720)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=79720)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=79720)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=79720)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=79720)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=79720)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=79720)[0m                                     84,
[2m[36m(train_xt pid=79720)[0m                                     4],
[2m[36m(train_xt pid=79720)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=79720)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=79720)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=79720)[0m                'dummy_user',
[2m[36m(train_xt pid=79720)[0m                'dummy_password')],
[2m[36m(train_xt pid=79720)[0m 'speedup': 3,
[2m[36m(train_xt pid=79720)[0m 'start_core': 30}
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:08: Init Broker server info:
[2m[36m(train_xt pid=79720)[0m {'recv': {'port': 24186,
[2m[36m(train_xt pid=79720)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=79720)[0m 'send': [{'port': 33558,
[2m[36m(train_xt pid=79720)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:08: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 24186, 33558, '127.0.0.1', 'info')
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:08: launch local broker with lib success
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:08: **********
[2m[36m(train_xt pid=79720)[0m workspace:
[2m[36m(train_xt pid=79720)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945267191861663
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=78524)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78524)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:09: Finished train job normally.
[2m[36m(train_xt pid=78567)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78567)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:09: Finished train job normally.
[2m[36m(train_xt pid=78524)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78524)[0m [I 2023-09-12 21:52:09,345] Trial 8 finished with value: 338.98305084745766 and parameters: {'env_pool_size': 3, 'env_pool_wait_nums': 3, 'infer_size': 2}. Best is trial 6 with value: 330.57851239669424.
[2m[36m(train_xt pid=78567)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78567)[0m [I 2023-09-12 21:52:09,502] Trial 9 finished with value: 333.33333333333337 and parameters: {'env_pool_size': 3, 'env_pool_wait_nums': 3, 'infer_size': 2}. Best is trial 6 with value: 330.57851239669424.
[2m[36m(train_xt pid=78524)[0m /tmp/plasma12119T0: 
[2m[36m(train_xt pid=78567)[0m /tmp/plasma12672T0: 
[2m[36m(train_xt pid=78524)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/integration/botorch.py:844: ExperimentalWarning: qei_candidates_func is experimental (supported from v2.4.0). The interface can change in the future.
[2m[36m(train_xt pid=78524)[0m   completed_params, completed_values, con, bounds, running_params
[2m[36m(train_xt pid=78524)[0m [W 2023-09-12 21:52:10,450] No objective values are feasible. Using 0 as the best objective in qEI.
[2m[36m(train_xt pid=78567)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/integration/botorch.py:844: ExperimentalWarning: qei_candidates_func is experimental (supported from v2.4.0). The interface can change in the future.
[2m[36m(train_xt pid=78567)[0m   completed_params, completed_values, con, bounds, running_params
[2m[36m(train_xt pid=78567)[0m [W 2023-09-12 21:52:10,600] No objective values are feasible. Using 0 as the best objective in qEI.
[2m[36m(train_xt pid=79720)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=79720)[0m Instructions for updating:
[2m[36m(train_xt pid=79720)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:13: Task: T0         | Train_count:        58 | Steps:     22608 | Elapsed time: 33 seconds
[2m[36m(train_xt pid=78630)[0m mean_env_step_ms:         1.980621	mean_explore_ms:        622.584033	mean_inference_ms:        2.647975	mean_loop_time_ms:      299.955678
[2m[36m(train_xt pid=78630)[0m mean_prepare_data_ms:      1.19518	mean_restore_model_ms:   17.289829	mean_train_time_ms:      23.938394	mean_wait_model_ms:     1685.697842
[2m[36m(train_xt pid=78630)[0m mean_wait_sample_ms:    267.251194	step_per_second:             682.0	train_loss:             -11.559107	train_reward_avg:         1.561905
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=79720)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:14: set verbosity in broker: info
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:14: init broker with id-0
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:14: share buf: plasma_store -m 400000000 -s /tmp/plasma_share17763
[2m[36m(train_xt pid=78524)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78524)[0m Instructions for updating:
[2m[36m(train_xt pid=78524)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=79720)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=79720)[0m   self.run()
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:14: init explorer with id: 0, buf_path: /tmp/plasma_share17763
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:14: init agent group for: explore
[2m[36m(train_xt pid=78567)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78567)[0m Instructions for updating:
[2m[36m(train_xt pid=78567)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:16: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:17: speedup(3): binding env 0 to CPU 30
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:17: init explorer with id: 1, buf_path: /tmp/plasma_share17763
[2m[36m(train_xt pid=78524)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:18: 
[2m[36m(train_xt pid=78524)[0m **************************************************
[2m[36m(train_xt pid=78524)[0m  XT start work...
[2m[36m(train_xt pid=78524)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945267304021678.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=78524)[0m **************************************************
[2m[36m(train_xt pid=78567)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:18: 
[2m[36m(train_xt pid=78567)[0m **************************************************
[2m[36m(train_xt pid=78567)[0m  XT start work...
[2m[36m(train_xt pid=78567)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945267305582263.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=78567)[0m **************************************************
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:18: init learner with:
[2m[36m(train_xt pid=78524)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=78524)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=78524)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=78524)[0m               'agent_num': 1},
[2m[36m(train_xt pid=78524)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=78524)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=78524)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=78524)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=78524)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=78524)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=78524)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=78524)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=78524)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=78524)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=78524)[0m                           'instance_num': 5,
[2m[36m(train_xt pid=78524)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=78524)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=78524)[0m                           'save_model': True,
[2m[36m(train_xt pid=78524)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=78524)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=78524)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78524)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=78524)[0m                                    'model_config': {'LR': 0.001500138,
[2m[36m(train_xt pid=78524)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=78524)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=78524)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=78524)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=78524)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78524)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=78524)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=78524)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=78524)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=78524)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=78524)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78524)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=78524)[0m                                                 84,
[2m[36m(train_xt pid=78524)[0m                                                 4],
[2m[36m(train_xt pid=78524)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=78524)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=78524)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=78524)[0m              'id': 'ImpalaCnnOpt_now_time_16945267304021678',
[2m[36m(train_xt pid=78524)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=78524)[0m 'env_num': 5,
[2m[36m(train_xt pid=78524)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=78524)[0m                         'size': 4,
[2m[36m(train_xt pid=78524)[0m                         'vector_env_size': 4,
[2m[36m(train_xt pid=78524)[0m                         'vision': False,
[2m[36m(train_xt pid=78524)[0m                         'wait_num': 4},
[2m[36m(train_xt pid=78524)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=78524)[0m             'now_time': '16945267304021678'},
[2m[36m(train_xt pid=78524)[0m 'gpu': -1,
[2m[36m(train_xt pid=78524)[0m 'group_num': 1,
[2m[36m(train_xt pid=78524)[0m 'lock': 1,
[2m[36m(train_xt pid=78524)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78524)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=78524)[0m                        'model_config': {'LR': 0.001500138,
[2m[36m(train_xt pid=78524)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=78524)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=78524)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=78524)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=78524)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78524)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=78524)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=78524)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=78524)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=78524)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=78524)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78524)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=78524)[0m                                     84,
[2m[36m(train_xt pid=78524)[0m                                     4],
[2m[36m(train_xt pid=78524)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=78524)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=78524)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=78524)[0m                'dummy_user',
[2m[36m(train_xt pid=78524)[0m                'dummy_password')],
[2m[36m(train_xt pid=78524)[0m 'speedup': 3,
[2m[36m(train_xt pid=78524)[0m 'start_core': 0}
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:18: Init Broker server info:
[2m[36m(train_xt pid=78524)[0m {'recv': {'port': 25858,
[2m[36m(train_xt pid=78524)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=78524)[0m 'send': [{'port': 26989,
[2m[36m(train_xt pid=78524)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:18: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 25858, 26989, '127.0.0.1', 'info')
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:18: launch local broker with lib success
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:19: **********
[2m[36m(train_xt pid=78524)[0m workspace:
[2m[36m(train_xt pid=78524)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945267304021678
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:19: init learner with:
[2m[36m(train_xt pid=78567)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=78567)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=78567)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=78567)[0m               'agent_num': 1},
[2m[36m(train_xt pid=78567)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=78567)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=78567)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=78567)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=78567)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=78567)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=78567)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=78567)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=78567)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=78567)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=78567)[0m                           'instance_num': 5,
[2m[36m(train_xt pid=78567)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=78567)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=78567)[0m                           'save_model': True,
[2m[36m(train_xt pid=78567)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=78567)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=78567)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78567)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=78567)[0m                                    'model_config': {'LR': 0.002928067,
[2m[36m(train_xt pid=78567)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=78567)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=78567)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=78567)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=78567)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78567)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=78567)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=78567)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=78567)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=78567)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=78567)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78567)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=78567)[0m                                                 84,
[2m[36m(train_xt pid=78567)[0m                                                 4],
[2m[36m(train_xt pid=78567)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=78567)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=78567)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=78567)[0m              'id': 'ImpalaCnnOpt_now_time_16945267305582263',
[2m[36m(train_xt pid=78567)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=78567)[0m 'env_num': 5,
[2m[36m(train_xt pid=78567)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=78567)[0m                         'size': 2,
[2m[36m(train_xt pid=78567)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=78567)[0m                         'vision': False,
[2m[36m(train_xt pid=78567)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=78567)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=78567)[0m             'now_time': '16945267305582263'},
[2m[36m(train_xt pid=78567)[0m 'gpu': -1,
[2m[36m(train_xt pid=78567)[0m 'group_num': 1,
[2m[36m(train_xt pid=78567)[0m 'lock': 1,
[2m[36m(train_xt pid=78567)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78567)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=78567)[0m                        'model_config': {'LR': 0.002928067,
[2m[36m(train_xt pid=78567)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=78567)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=78567)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=78567)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=78567)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78567)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=78567)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=78567)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=78567)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=78567)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=78567)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78567)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=78567)[0m                                     84,
[2m[36m(train_xt pid=78567)[0m                                     4],
[2m[36m(train_xt pid=78567)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=78567)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=78567)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=78567)[0m                'dummy_user',
[2m[36m(train_xt pid=78567)[0m                'dummy_password')],
[2m[36m(train_xt pid=78567)[0m 'speedup': 3,
[2m[36m(train_xt pid=78567)[0m 'start_core': 10}
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:19: Init Broker server info:
[2m[36m(train_xt pid=78567)[0m {'recv': {'port': 29664,
[2m[36m(train_xt pid=78567)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=78567)[0m 'send': [{'port': 37734,
[2m[36m(train_xt pid=78567)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:19: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 29664, 37734, '127.0.0.1', 'info')
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:19: launch local broker with lib success
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:19: **********
[2m[36m(train_xt pid=78567)[0m workspace:
[2m[36m(train_xt pid=78567)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945267305582263
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:19: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:20: speedup(3): binding env 1 to CPU 31
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:21: init explorer with id: 2, buf_path: /tmp/plasma_share17763
[2m[36m(train_xt pid=78524)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78524)[0m Instructions for updating:
[2m[36m(train_xt pid=78524)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78567)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78567)[0m Instructions for updating:
[2m[36m(train_xt pid=78567)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:22: Task: T0         | Train_count:        86 | Steps:     33380 | Elapsed time: 41 seconds
[2m[36m(train_xt pid=78630)[0m mean_env_step_ms:           1.9454	mean_explore_ms:         606.32693	mean_inference_ms:        2.584081	mean_loop_time_ms:       268.53565
[2m[36m(train_xt pid=78630)[0m mean_prepare_data_ms:     1.134551	mean_restore_model_ms:   13.065386	mean_train_time_ms:      23.660624	mean_wait_model_ms:     1220.841789
[2m[36m(train_xt pid=78630)[0m mean_wait_sample_ms:    235.953128	step_per_second:             812.0	train_loss:             -72.319214	train_reward_avg:         1.677778
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:23: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:24: speedup(3): binding env 2 to CPU 32
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:24: init explorer with id: 3, buf_path: /tmp/plasma_share17763
[2m[36m(train_xt pid=78524)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:24: set verbosity in broker: info
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:24: init broker with id-0
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:24: share buf: plasma_store -m 400000000 -s /tmp/plasma_share18856
[2m[36m(train_xt pid=78524)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78524)[0m   self.run()
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:25: init explorer with id: 0, buf_path: /tmp/plasma_share18856
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:25: init agent group for: explore
[2m[36m(train_xt pid=78567)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:25: set verbosity in broker: info
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:25: init broker with id-0
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:25: share buf: plasma_store -m 400000000 -s /tmp/plasma_share19389
[2m[36m(train_xt pid=78567)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78567)[0m   self.run()
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:25: init explorer with id: 0, buf_path: /tmp/plasma_share19389
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:25: init agent group for: explore
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:25: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:26: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:27: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:27: speedup(3): binding env 3 to CPU 33
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:27: init explorer with id: 4, buf_path: /tmp/plasma_share17763
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:28: speedup(3): binding env 0 to CPU 0
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:28: init explorer with id: 1, buf_path: /tmp/plasma_share18856
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:28: speedup(3): binding env 0 to CPU 10
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:28: init explorer with id: 1, buf_path: /tmp/plasma_share19389
[2m[36m(train_xt pid=78630)[0m /tmp/plasma16211:   
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:29: broker status timeout!
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:29: explorer-4 start with sync interval-1
[2m[36m(train_xt pid=78630)[0m /tmp/plasma_share16264:
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:29: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:30: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:30: speedup(3): binding env 4 to CPU 34
[2m[36m(train_xt pid=78630)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78630)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:31: Finished train job normally.
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:31: speedup(3): binding env 1 to CPU 1
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:31: init explorer with id: 2, buf_path: /tmp/plasma_share18856
[2m[36m(train_xt pid=78630)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78630)[0m [I 2023-09-12 21:52:31,496] Trial 11 finished with value: 394.0886699507389 and parameters: {'env_pool_size': 5, 'env_pool_wait_nums': 3, 'infer_size': 3}. Best is trial 6 with value: 330.57851239669424.
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:31: speedup(3): binding env 1 to CPU 11
[2m[36m(train_xt pid=78630)[0m /tmp/plasma16264T0: 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:31: init explorer with id: 2, buf_path: /tmp/plasma_share19389
[2m[36m(train_xt pid=78630)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/integration/botorch.py:844: ExperimentalWarning: qei_candidates_func is experimental (supported from v2.4.0). The interface can change in the future.
[2m[36m(train_xt pid=78630)[0m   completed_params, completed_values, con, bounds, running_params
[2m[36m(train_xt pid=78630)[0m [W 2023-09-12 21:52:32,587] No objective values are feasible. Using 0 as the best objective in qEI.
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:33: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:33: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=79720)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=79720)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=79720)[0m   self.run()
[2m[36m(train_xt pid=79720)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=79720)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:33: Task: T0         | Train_count:         0 | Steps:       253 | Elapsed time: 22 seconds
[2m[36m(train_xt pid=79720)[0m mean_env_step_ms:         4.617793	mean_explore_ms:        1077.999449	mean_inference_ms:        3.299709	mean_loop_time_ms:             nan
[2m[36m(train_xt pid=79720)[0m mean_prepare_data_ms:     1.719952	mean_restore_model_ms:   52.886152	mean_train_time_ms:            nan	mean_wait_model_ms:     7534.348297
[2m[36m(train_xt pid=79720)[0m mean_wait_sample_ms:    20687.514544	step_per_second:              11.0	train_loss:             155.008316	train_reward_avg:              0.0
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:34: speedup(3): binding env 2 to CPU 2
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:34: init explorer with id: 3, buf_path: /tmp/plasma_share18856
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:34: speedup(3): binding env 2 to CPU 12
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:35: init explorer with id: 3, buf_path: /tmp/plasma_share19389
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:36: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:36: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=78630)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78630)[0m Instructions for updating:
[2m[36m(train_xt pid=78630)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:37: speedup(3): binding env 3 to CPU 3
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:37: init explorer with id: 4, buf_path: /tmp/plasma_share18856
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:38: speedup(3): binding env 3 to CPU 13
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:38: init explorer with id: 4, buf_path: /tmp/plasma_share19389
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:39: Task: T0         | Train_count:        20 | Steps:     10687 | Elapsed time: 28 seconds
[2m[36m(train_xt pid=79720)[0m mean_env_step_ms:         4.382993	mean_explore_ms:        1011.427492	mean_inference_ms:        3.146229	mean_loop_time_ms:      265.047407
[2m[36m(train_xt pid=79720)[0m mean_prepare_data_ms:     1.430357	mean_restore_model_ms:   35.036385	mean_train_time_ms:      29.625273	mean_wait_model_ms:     5079.495221
[2m[36m(train_xt pid=79720)[0m mean_wait_sample_ms:    224.754536	step_per_second:             381.0	train_loss:             -18.295351	train_reward_avg:           0.4375
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:39: explorer-4 start with sync interval-1
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:40: explorer-4 start with sync interval-1
[2m[36m(train_xt pid=78630)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:40: 
[2m[36m(train_xt pid=78630)[0m **************************************************
[2m[36m(train_xt pid=78630)[0m  XT start work...
[2m[36m(train_xt pid=78630)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945267525525646.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=78630)[0m **************************************************
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:40: speedup(3): binding env 4 to CPU 4
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:41: speedup(3): binding env 4 to CPU 14
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:41: init learner with:
[2m[36m(train_xt pid=78630)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=78630)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=78630)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=78630)[0m               'agent_num': 1},
[2m[36m(train_xt pid=78630)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=78630)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=78630)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=78630)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=78630)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=78630)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=78630)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=78630)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=78630)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=78630)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=78630)[0m                           'instance_num': 4,
[2m[36m(train_xt pid=78630)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=78630)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=78630)[0m                           'save_model': True,
[2m[36m(train_xt pid=78630)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=78630)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=78630)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78630)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=78630)[0m                                    'model_config': {'LR': 0.002047128,
[2m[36m(train_xt pid=78630)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=78630)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=78630)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=78630)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=78630)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78630)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=78630)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=78630)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=78630)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=78630)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=78630)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78630)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=78630)[0m                                                 84,
[2m[36m(train_xt pid=78630)[0m                                                 4],
[2m[36m(train_xt pid=78630)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=78630)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=78630)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=78630)[0m              'id': 'ImpalaCnnOpt_now_time_16945267525525646',
[2m[36m(train_xt pid=78630)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=78630)[0m 'env_num': 4,
[2m[36m(train_xt pid=78630)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=78630)[0m                         'size': 5,
[2m[36m(train_xt pid=78630)[0m                         'vector_env_size': 5,
[2m[36m(train_xt pid=78630)[0m                         'vision': False,
[2m[36m(train_xt pid=78630)[0m                         'wait_num': 4},
[2m[36m(train_xt pid=78630)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=78630)[0m             'now_time': '16945267525525646'},
[2m[36m(train_xt pid=78630)[0m 'gpu': -1,
[2m[36m(train_xt pid=78630)[0m 'group_num': 1,
[2m[36m(train_xt pid=78630)[0m 'lock': 1,
[2m[36m(train_xt pid=78630)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78630)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=78630)[0m                        'model_config': {'LR': 0.002047128,
[2m[36m(train_xt pid=78630)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=78630)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=78630)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=78630)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=78630)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78630)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=78630)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=78630)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=78630)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=78630)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=78630)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78630)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=78630)[0m                                     84,
[2m[36m(train_xt pid=78630)[0m                                     4],
[2m[36m(train_xt pid=78630)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=78630)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=78630)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=78630)[0m                'dummy_user',
[2m[36m(train_xt pid=78630)[0m                'dummy_password')],
[2m[36m(train_xt pid=78630)[0m 'speedup': 3,
[2m[36m(train_xt pid=78630)[0m 'start_core': 20}
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:41: Init Broker server info:
[2m[36m(train_xt pid=78630)[0m {'recv': {'port': 21461,
[2m[36m(train_xt pid=78630)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=78630)[0m 'send': [{'port': 24284,
[2m[36m(train_xt pid=78630)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:41: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 21461, 24284, '127.0.0.1', 'info')
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:41: launch local broker with lib success
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:41: **********
[2m[36m(train_xt pid=78630)[0m workspace:
[2m[36m(train_xt pid=78630)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945267525525646
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78524)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78524)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78524)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78524)[0m   self.run()
[2m[36m(train_xt pid=78524)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78524)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:44: Task: T0         | Train_count:         2 | Steps:      1277 | Elapsed time: 22 seconds
[2m[36m(train_xt pid=78524)[0m mean_env_step_ms:          4.84951	mean_explore_ms:        1134.003305	mean_inference_ms:        3.493134	mean_loop_time_ms:       59.818864
[2m[36m(train_xt pid=78524)[0m mean_prepare_data_ms:     1.522382	mean_restore_model_ms:   59.341002	mean_train_time_ms:     770.232677	mean_wait_model_ms:     7684.998798
[2m[36m(train_xt pid=78524)[0m mean_wait_sample_ms:    6828.179995	step_per_second:              55.0	train_loss:               5.819154	train_reward_avg:              0.0
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78630)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78630)[0m Instructions for updating:
[2m[36m(train_xt pid=78630)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78567)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78567)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78567)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78567)[0m   self.run()
[2m[36m(train_xt pid=78567)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78567)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:44: Task: T0         | Train_count:         2 | Steps:       765 | Elapsed time: 22 seconds
[2m[36m(train_xt pid=78567)[0m mean_env_step_ms:         5.323332	mean_explore_ms:        1096.813345	mean_inference_ms:        2.940606	mean_loop_time_ms:       66.392899
[2m[36m(train_xt pid=78567)[0m mean_prepare_data_ms:     0.714699	mean_restore_model_ms:   66.646862	mean_train_time_ms:     712.487062	mean_wait_model_ms:     7620.401573
[2m[36m(train_xt pid=78567)[0m mean_wait_sample_ms:    6877.839883	step_per_second:              33.0	train_loss:              -7.117807	train_reward_avg:              0.0
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:44: Task: T0         | Train_count:        40 | Steps:     20757 | Elapsed time: 33 seconds
[2m[36m(train_xt pid=79720)[0m mean_env_step_ms:         4.247198	mean_explore_ms:        980.791439	mean_inference_ms:         3.10364	mean_loop_time_ms:      267.299092
[2m[36m(train_xt pid=79720)[0m mean_prepare_data_ms:      1.43162	mean_restore_model_ms:   26.866436	mean_train_time_ms:      29.820418	mean_wait_model_ms:     3811.129028
[2m[36m(train_xt pid=79720)[0m mean_wait_sample_ms:    227.320302	step_per_second:             621.0	train_loss:              190.55603	train_reward_avg:         0.727273
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=78630)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:48: set verbosity in broker: info
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:48: init broker with id-0
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:48: share buf: plasma_store -m 400000000 -s /tmp/plasma_share23626
[2m[36m(train_xt pid=78630)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78630)[0m   self.run()
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:48: init explorer with id: 0, buf_path: /tmp/plasma_share23626
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:48: init agent group for: explore
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:50: Task: T0         | Train_count:        22 | Steps:     11714 | Elapsed time: 28 seconds
[2m[36m(train_xt pid=79720)[0m plasma_store -m 1000000000 -s /tmp/plasma17696
[2m[36m(train_xt pid=79720)[0m self.time_record_filename ============= /tmp/16945267191861663
== Status ==
Current time: 2023-09-12 21:52:08 (running for 00:03:48.74)
Memory usage on this node: 27.4/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78524)[0m good
[2m[36m(train_xt pid=78524)[0m log filename ================== /tmp/16945266488502111
[2m[36m(train_xt pid=78524)[0m step_per_second ============ 590.0
[2m[36m(train_xt pid=78524)[0m tune_cost =================== True
[2m[36m(train_xt pid=78567)[0m good
[2m[36m(train_xt pid=78567)[0m log filename ================== /tmp/1694526650702185
[2m[36m(train_xt pid=78567)[0m step_per_second ============ 600.0
[2m[36m(train_xt pid=78567)[0m tune_cost =================== True
[2m[36m(train_xt pid=78524)[0m  13246
[2m[36m(train_xt pid=78567)[0m  13540
[2m[36m(train_xt pid=78524)[0m =======================env_pool_size======================4
[2m[36m(train_xt pid=78524)[0m =======================env_pool_wait_nums======================4
[2m[36m(train_xt pid=78524)[0m get max throughput start_core============================= 0
[2m[36m(train_xt pid=78524)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945267304021678.yaml
[2m[36m(train_xt pid=78524)[0m run_log ======================== /tmp/test_opt_bys16945267304021678.log
[2m[36m(train_xt pid=78567)[0m =======================env_pool_size======================2
[2m[36m(train_xt pid=78567)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=78567)[0m get max throughput start_core============================= 10
[2m[36m(train_xt pid=78567)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945267305582263.yaml
[2m[36m(train_xt pid=78567)[0m run_log ======================== /tmp/test_opt_bys16945267305582263.log
== Status ==
Current time: 2023-09-12 21:52:13 (running for 00:03:53.74)
Memory usage on this node: 24.7/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=79720)[0m plasma_store -m 100000000 -s /tmp/plasma17763T0
== Status ==
Current time: 2023-09-12 21:52:18 (running for 00:03:58.75)
Memory usage on this node: 25.4/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78524)[0m start_core ======================================== 0
[2m[36m(train_xt pid=78524)[0m plasma_store -m 1000000000 -s /tmp/plasma18323
[2m[36m(train_xt pid=78524)[0m self.time_record_filename ============= /tmp/16945267304021678
[2m[36m(train_xt pid=78567)[0m start_core ======================================== 10
[2m[36m(train_xt pid=78567)[0m plasma_store -m 1000000000 -s /tmp/plasma18329
[2m[36m(train_xt pid=78567)[0m self.time_record_filename ============= /tmp/16945267305582263
== Status ==
Current time: 2023-09-12 21:52:23 (running for 00:04:03.75)
Memory usage on this node: 27.3/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78524)[0m plasma_store -m 100000000 -s /tmp/plasma18856T0
[2m[36m(train_xt pid=78567)[0m plasma_store -m 100000000 -s /tmp/plasma19389T0
== Status ==
Current time: 2023-09-12 21:52:28 (running for 00:04:08.75)
Memory usage on this node: 27.7/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78630)[0m  16270
[2m[36m(train_xt pid=78630)[0m  16819
[2m[36m(train_xt pid=78630)[0m good
[2m[36m(train_xt pid=78630)[0m log filename ================== /tmp/16945266877822115
[2m[36m(train_xt pid=78630)[0m step_per_second ============ 812.0
[2m[36m(train_xt pid=78630)[0m tune_cost =================== True
[2m[36m(train_xt pid=78630)[0m  16825
== Status ==
Current time: 2023-09-12 21:52:33 (running for 00:04:13.76)
Memory usage on this node: 27.1/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78630)[0m =======================env_pool_size======================5
[2m[36m(train_xt pid=78630)[0m =======================env_pool_wait_nums======================4
[2m[36m(train_xt pid=78630)[0m get max throughput start_core============================= 20
[2m[36m(train_xt pid=78630)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945267525525646.yaml
[2m[36m(train_xt pid=78630)[0m run_log ======================== /tmp/test_opt_bys16945267525525646.log
== Status ==
Current time: 2023-09-12 21:52:38 (running for 00:04:18.76)
Memory usage on this node: 27.6/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78630)[0m start_core ======================================== 20
[2m[36m(train_xt pid=78630)[0m plasma_store -m 1000000000 -s /tmp/plasma22501
[2m[36m(train_xt pid=78630)[0m self.time_record_filename ============= /tmp/16945267525525646
== Status ==
Current time: 2023-09-12 21:52:43 (running for 00:04:23.77)
Memory usage on this node: 30.2/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


== Status ==
Current time: 2023-09-12 21:52:48 (running for 00:04:28.77)
Memory usage on this node: 31.3/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78630)[0m plasma_store -m 100000000 -s /tmp/plasma23626T0
== Status ==
Current time: 2023-09-12 21:52:53 (running for 00:04:33.78)
Memory usage on this node: 31.6/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=79720)[0m  17765
== Status ==
Current time: 2023-09-12 21:52:58 (running for 00:04:38.78)
Memory usage on this node: 31.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78524)[0m mean_env_step_ms:         4.677332	mean_explore_ms:        1092.401952	mean_inference_ms:        3.469219	mean_loop_time_ms:      296.241045
[2m[36m(train_xt pid=78524)[0m mean_prepare_data_ms:     1.497865	mean_restore_model_ms:   39.186925	mean_train_time_ms:      33.748782	mean_wait_model_ms:     5239.083111
[2m[36m(train_xt pid=78524)[0m mean_wait_sample_ms:    253.296602	step_per_second:             406.0	train_loss:             -14.769554	train_reward_avg:         0.535714
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:50: Task: T0         | Train_count:        60 | Steps:     31081 | Elapsed time: 39 seconds
[2m[36m(train_xt pid=79720)[0m mean_env_step_ms:         4.241716	mean_explore_ms:        981.777008	mean_inference_ms:        3.131166	mean_loop_time_ms:      302.813745
[2m[36m(train_xt pid=79720)[0m mean_prepare_data_ms:      1.53091	mean_restore_model_ms:   23.417821	mean_train_time_ms:      34.472454	mean_wait_model_ms:     3289.180572
[2m[36m(train_xt pid=79720)[0m mean_wait_sample_ms:    257.808506	step_per_second:             788.0	train_loss:             119.503204	train_reward_avg:         0.884615
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:50: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:51: speedup(3): binding env 0 to CPU 20
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:51: init explorer with id: 1, buf_path: /tmp/plasma_share23626
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:54: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:54: Task: T0         | Train_count:        42 | Steps:     10846 | Elapsed time: 32 seconds
[2m[36m(train_xt pid=78567)[0m mean_env_step_ms:         4.876264	mean_explore_ms:        1009.688746	mean_inference_ms:         2.81308	mean_loop_time_ms:      239.591837
[2m[36m(train_xt pid=78567)[0m mean_prepare_data_ms:     0.843108	mean_restore_model_ms:   33.252044	mean_train_time_ms:      19.886279	mean_wait_model_ms:     3781.300111
[2m[36m(train_xt pid=78567)[0m mean_wait_sample_ms:    211.721396	step_per_second:             331.0	train_loss:              45.784611	train_reward_avg:             0.95
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:55: speedup(3): binding env 1 to CPU 21
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:55: init explorer with id: 2, buf_path: /tmp/plasma_share23626
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:56: Task: T0         | Train_count:        42 | Steps:     21809 | Elapsed time: 34 seconds
[2m[36m(train_xt pid=78524)[0m mean_env_step_ms:         4.641225	mean_explore_ms:        1071.979544	mean_inference_ms:        3.403799	mean_loop_time_ms:       293.31702
[2m[36m(train_xt pid=78524)[0m mean_prepare_data_ms:     1.566398	mean_restore_model_ms:   29.815804	mean_train_time_ms:      33.264732	mean_wait_model_ms:     3923.27844
[2m[36m(train_xt pid=78524)[0m mean_wait_sample_ms:    251.090288	step_per_second:             628.0	train_loss:              26.680422	train_reward_avg:              0.8
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:57: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m /tmp/plasma17696:   
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:57: broker status timeout!
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:58: speedup(3): binding env 2 to CPU 22
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:58: init explorer with id: 3, buf_path: /tmp/plasma_share23626
[2m[36m(train_xt pid=79720)[0m /tmp/plasma_share17763:
[2m[36m(train_xt pid=79720)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=79720)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:52:59: Finished train job normally.
[2m[36m(train_xt pid=79720)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=79720)[0m [I 2023-09-12 21:52:59,987] Trial 12 finished with value: 456.8527918781726 and parameters: {'env_pool_size': 4, 'env_pool_wait_nums': 4, 'infer_size': 5}. Best is trial 6 with value: 330.57851239669424.
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:00: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=79720)[0m /tmp/plasma17763T0: 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:01: speedup(3): binding env 3 to CPU 23
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:02: Task: T0         | Train_count:        62 | Steps:     32249 | Elapsed time: 40 seconds
[2m[36m(train_xt pid=78524)[0m mean_env_step_ms:         4.514955	mean_explore_ms:        1047.240294	mean_inference_ms:          3.3642	mean_loop_time_ms:      278.475201
[2m[36m(train_xt pid=78524)[0m mean_prepare_data_ms:     1.728594	mean_restore_model_ms:   26.932588	mean_train_time_ms:      30.103183	mean_wait_model_ms:     3383.719774
[2m[36m(train_xt pid=78524)[0m mean_wait_sample_ms:    239.696085	step_per_second:             800.0	train_loss:              37.302063	train_reward_avg:         0.833333
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:03: Task: T0         | Train_count:        82 | Steps:     21245 | Elapsed time: 41 seconds
[2m[36m(train_xt pid=78567)[0m mean_env_step_ms:         4.568147	mean_explore_ms:        950.453225	mean_inference_ms:        2.692402	mean_loop_time_ms:      216.471672
[2m[36m(train_xt pid=78567)[0m mean_prepare_data_ms:     0.820172	mean_restore_model_ms:   23.215504	mean_train_time_ms:      19.411922	mean_wait_model_ms:     2534.10014
[2m[36m(train_xt pid=78567)[0m mean_wait_sample_ms:    189.782715	step_per_second:             513.0	train_loss:              62.999107	train_reward_avg:           1.0625
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=79720)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=79720)[0m Instructions for updating:
[2m[36m(train_xt pid=79720)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78630)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78630)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78630)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78630)[0m   self.run()
[2m[36m(train_xt pid=78630)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78630)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:06: Task: T0         | Train_count:         4 | Steps:      2384 | Elapsed time: 21 seconds
[2m[36m(train_xt pid=78630)[0m mean_env_step_ms:         3.192171	mean_explore_ms:        941.222966	mean_inference_ms:        3.520586	mean_loop_time_ms:        322.6946
[2m[36m(train_xt pid=78630)[0m mean_prepare_data_ms:     1.288795	mean_restore_model_ms:   53.624928	mean_train_time_ms:     487.087727	mean_wait_model_ms:     5766.237319
[2m[36m(train_xt pid=78630)[0m mean_wait_sample_ms:    3865.512276	step_per_second:             108.0	train_loss:               9.990923	train_reward_avg:              4.0
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78524)[0m /tmp/plasma18323:   
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:08: broker status timeout!
[2m[36m(train_xt pid=79720)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:08: 
[2m[36m(train_xt pid=79720)[0m **************************************************
[2m[36m(train_xt pid=79720)[0m  XT start work...
[2m[36m(train_xt pid=79720)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_LR_0.001824478_now_time_16945265283419323.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=79720)[0m **************************************************
[2m[36m(train_xt pid=78524)[0m /tmp/plasma_share18856:
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:09: init learner with:
[2m[36m(train_xt pid=79720)[0m {'agent_para': {'agent_config': {'complete_step': 500000,
[2m[36m(train_xt pid=79720)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=79720)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=79720)[0m               'agent_num': 1},
[2m[36m(train_xt pid=79720)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=79720)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=79720)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=79720)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=79720)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=79720)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=79720)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=79720)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=79720)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=79720)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=79720)[0m                           'instance_num': 8,
[2m[36m(train_xt pid=79720)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=79720)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=79720)[0m                           'save_model': True,
[2m[36m(train_xt pid=79720)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=79720)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=79720)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=79720)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=79720)[0m                                    'model_config': {'LR': 0.001824478,
[2m[36m(train_xt pid=79720)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=79720)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=79720)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=79720)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=79720)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=79720)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=79720)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=79720)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=79720)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=79720)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=79720)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=79720)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=79720)[0m                                                 84,
[2m[36m(train_xt pid=79720)[0m                                                 4],
[2m[36m(train_xt pid=79720)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=79720)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=79720)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=79720)[0m              'id': 'ImpalaCnnOpt_LR_0.001824478_now_time_16945265283419323',
[2m[36m(train_xt pid=79720)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=79720)[0m 'env_num': 8,
[2m[36m(train_xt pid=79720)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=79720)[0m                         'size': 2,
[2m[36m(train_xt pid=79720)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=79720)[0m                         'vision': False,
[2m[36m(train_xt pid=79720)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=79720)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=79720)[0m             'now_time': '16945265283419323'},
[2m[36m(train_xt pid=79720)[0m 'gpu': -1,
[2m[36m(train_xt pid=79720)[0m 'group_num': 1,
[2m[36m(train_xt pid=79720)[0m 'lock': 1,
[2m[36m(train_xt pid=79720)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=79720)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=79720)[0m                        'model_config': {'LR': 0.001824478,
[2m[36m(train_xt pid=79720)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=79720)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=79720)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=79720)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=79720)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=79720)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=79720)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=79720)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=79720)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=79720)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=79720)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=79720)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=79720)[0m                                     84,
[2m[36m(train_xt pid=79720)[0m                                     4],
[2m[36m(train_xt pid=79720)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=79720)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=79720)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=79720)[0m                'dummy_user',
[2m[36m(train_xt pid=79720)[0m                'dummy_password')],
[2m[36m(train_xt pid=79720)[0m 'speedup': 3,
[2m[36m(train_xt pid=79720)[0m 'start_core': 30}
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:09: Init Broker server info:
[2m[36m(train_xt pid=79720)[0m {'recv': {'port': 26385,
[2m[36m(train_xt pid=79720)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=79720)[0m 'send': [{'port': 37440,
[2m[36m(train_xt pid=79720)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:09: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 26385, 37440, '127.0.0.1', 'info')
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:09: launch local broker with lib success
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:09: **********
[2m[36m(train_xt pid=79720)[0m workspace:
[2m[36m(train_xt pid=79720)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_LR_0.001824478_now_time_16945265283419323
[2m[36m(train_xt pid=79720)[0m 
[2m[36m(train_xt pid=78524)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78524)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:10: Finished train job normally.
[2m[36m(train_xt pid=78524)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78524)[0m [I 2023-09-12 21:53:10,609] Trial 13 finished with value: 450.0 and parameters: {'env_pool_size': 4, 'env_pool_wait_nums': 4, 'infer_size': 5}. Best is trial 6 with value: 330.57851239669424.
[2m[36m(train_xt pid=78524)[0m /tmp/plasma18856T0: 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:11: Task: T0         | Train_count:       122 | Steps:     31323 | Elapsed time: 48 seconds
[2m[36m(train_xt pid=78567)[0m mean_env_step_ms:         4.195171	mean_explore_ms:         890.36984	mean_inference_ms:        2.612798	mean_loop_time_ms:      184.899676
[2m[36m(train_xt pid=78567)[0m mean_prepare_data_ms:     0.830185	mean_restore_model_ms:   19.315585	mean_train_time_ms:      19.028211	mean_wait_model_ms:     1930.327312
[2m[36m(train_xt pid=78567)[0m mean_wait_sample_ms:    157.995665	step_per_second:             640.0	train_loss:             -19.078875	train_reward_avg:         1.227273
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:11: Task: T0         | Train_count:        24 | Steps:     12716 | Elapsed time: 27 seconds
[2m[36m(train_xt pid=78630)[0m mean_env_step_ms:         2.961148	mean_explore_ms:        864.963089	mean_inference_ms:        3.338508	mean_loop_time_ms:      285.941005
[2m[36m(train_xt pid=78630)[0m mean_prepare_data_ms:     1.508248	mean_restore_model_ms:   32.509395	mean_train_time_ms:      31.911993	mean_wait_model_ms:     3783.343451
[2m[36m(train_xt pid=78630)[0m mean_wait_sample_ms:    243.740892	step_per_second:             460.0	train_loss:             -53.713921	train_reward_avg:         1.333333
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=79720)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=79720)[0m Instructions for updating:
[2m[36m(train_xt pid=79720)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78524)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78524)[0m Instructions for updating:
[2m[36m(train_xt pid=78524)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=79720)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:16: set verbosity in broker: info
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:16: init broker with id-0
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:17: share buf: plasma_store -m 400000000 -s /tmp/plasma_share25426
[2m[36m(train_xt pid=79720)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=79720)[0m   self.run()
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:17: init explorer with id: 0, buf_path: /tmp/plasma_share25426
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:17: init agent group for: explore
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:17: Task: T0         | Train_count:        44 | Steps:     22937 | Elapsed time: 33 seconds
[2m[36m(train_xt pid=78630)[0m mean_env_step_ms:         2.823581	mean_explore_ms:        824.709797	mean_inference_ms:          3.2354	mean_loop_time_ms:      290.047967
[2m[36m(train_xt pid=78630)[0m mean_prepare_data_ms:     1.477945	mean_restore_model_ms:   24.014831	mean_train_time_ms:      30.767047	mean_wait_model_ms:     2774.375939
[2m[36m(train_xt pid=78630)[0m mean_wait_sample_ms:    250.287879	step_per_second:             686.0	train_loss:              15.230663	train_reward_avg:              1.3
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78524)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:18: 
[2m[36m(train_xt pid=78524)[0m **************************************************
[2m[36m(train_xt pid=78524)[0m  XT start work...
[2m[36m(train_xt pid=78524)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_LR_0.001500138_now_time_16945265072179165.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=78524)[0m **************************************************
[2m[36m(train_xt pid=78567)[0m /tmp/plasma18329:   
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:19: init learner with:
[2m[36m(train_xt pid=78524)[0m {'agent_para': {'agent_config': {'complete_step': 500000,
[2m[36m(train_xt pid=78524)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=78524)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=78524)[0m               'agent_num': 1},
[2m[36m(train_xt pid=78524)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=78524)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=78524)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=78524)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=78524)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=78524)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=78524)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=78524)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=78524)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=78524)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=78524)[0m                           'instance_num': 8,
[2m[36m(train_xt pid=78524)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=78524)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=78524)[0m                           'save_model': True,
[2m[36m(train_xt pid=78524)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=78524)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=78524)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78524)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=78524)[0m                                    'model_config': {'LR': 0.001500138,
[2m[36m(train_xt pid=78524)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=78524)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=78524)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=78524)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=78524)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78524)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=78524)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=78524)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=78524)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=78524)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=78524)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78524)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=78524)[0m                                                 84,
[2m[36m(train_xt pid=78524)[0m                                                 4],
[2m[36m(train_xt pid=78524)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=78524)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=78524)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=78524)[0m              'id': 'ImpalaCnnOpt_LR_0.001500138_now_time_16945265072179165',
[2m[36m(train_xt pid=78524)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=78524)[0m 'env_num': 8,
[2m[36m(train_xt pid=78524)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=78524)[0m                         'size': 2,
[2m[36m(train_xt pid=78524)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=78524)[0m                         'vision': False,
[2m[36m(train_xt pid=78524)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=78524)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=78524)[0m             'now_time': '16945265072179165'},
[2m[36m(train_xt pid=78524)[0m 'gpu': -1,
[2m[36m(train_xt pid=78524)[0m 'group_num': 1,
[2m[36m(train_xt pid=78524)[0m 'lock': 1,
[2m[36m(train_xt pid=78524)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78524)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=78524)[0m                        'model_config': {'LR': 0.001500138,
[2m[36m(train_xt pid=78524)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=78524)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=78524)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=78524)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=78524)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78524)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=78524)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=78524)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=78524)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=78524)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=78524)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78524)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=78524)[0m                                     84,
[2m[36m(train_xt pid=78524)[0m                                     4],
[2m[36m(train_xt pid=78524)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=78524)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=78524)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=78524)[0m                'dummy_user',
[2m[36m(train_xt pid=78524)[0m                'dummy_password')],
[2m[36m(train_xt pid=78524)[0m 'speedup': 3,
[2m[36m(train_xt pid=78524)[0m 'start_core': 0}
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:19: Init Broker server info:
[2m[36m(train_xt pid=78524)[0m {'recv': {'port': 36531,
[2m[36m(train_xt pid=78524)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=78524)[0m 'send': [{'port': 21966,
[2m[36m(train_xt pid=78524)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:19: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 36531, 21966, '127.0.0.1', 'info')
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:19: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:19: launch local broker with lib success
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:19: **********
[2m[36m(train_xt pid=78524)[0m workspace:
[2m[36m(train_xt pid=78524)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_LR_0.001500138_now_time_16945265072179165
[2m[36m(train_xt pid=78524)[0m 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:19: broker status timeout!
[2m[36m(train_xt pid=78567)[0m /tmp/plasma_share19389:
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:20: speedup(3): binding env 0 to CPU 30
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:20: init explorer with id: 1, buf_path: /tmp/plasma_share25426
[2m[36m(train_xt pid=78567)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78567)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:21: Finished train job normally.
[2m[36m(train_xt pid=78567)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78567)[0m [I 2023-09-12 21:53:22,172] Trial 14 finished with value: 437.5 and parameters: {'env_pool_size': 2, 'env_pool_wait_nums': 2, 'infer_size': 5}. Best is trial 6 with value: 330.57851239669424.
[2m[36m(train_xt pid=78524)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78524)[0m Instructions for updating:
[2m[36m(train_xt pid=78524)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=78567)[0m /tmp/plasma19389T0: 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:22: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:23: Task: T0         | Train_count:        64 | Steps:     33123 | Elapsed time: 38 seconds
[2m[36m(train_xt pid=78630)[0m mean_env_step_ms:         2.733628	mean_explore_ms:        799.711117	mean_inference_ms:        3.172375	mean_loop_time_ms:      274.478579
[2m[36m(train_xt pid=78630)[0m mean_prepare_data_ms:     1.548827	mean_restore_model_ms:   19.740985	mean_train_time_ms:      29.024756	mean_wait_model_ms:     2215.881421
[2m[36m(train_xt pid=78630)[0m mean_wait_sample_ms:    236.311936	step_per_second:             851.0	train_loss:              96.261612	train_reward_avg:         1.244444
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:23: speedup(3): binding env 1 to CPU 31
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:23: init explorer with id: 2, buf_path: /tmp/plasma_share25426
[2m[36m(train_xt pid=78524)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:25: set verbosity in broker: info
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:25: init broker with id-0
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:25: share buf: plasma_store -m 400000000 -s /tmp/plasma_share26307
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:25: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=78524)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78524)[0m   self.run()
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:25: init explorer with id: 0, buf_path: /tmp/plasma_share26307
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:25: init agent group for: explore
[2m[36m(train_xt pid=78567)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78567)[0m Instructions for updating:
[2m[36m(train_xt pid=78567)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:26: speedup(3): binding env 2 to CPU 32
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:26: init explorer with id: 3, buf_path: /tmp/plasma_share25426
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:27: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=78630)[0m /tmp/plasma22501:   
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:28: broker status timeout!
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:28: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:28: speedup(3): binding env 0 to CPU 0
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:29: init explorer with id: 1, buf_path: /tmp/plasma_share26307
[2m[36m(train_xt pid=78567)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:29: 
[2m[36m(train_xt pid=78567)[0m **************************************************
[2m[36m(train_xt pid=78567)[0m  XT start work...
[2m[36m(train_xt pid=78567)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_LR_0.002928067_now_time_16945265136159422.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=78567)[0m **************************************************
[2m[36m(train_xt pid=78630)[0m /tmp/plasma_share23626:
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:29: init learner with:
[2m[36m(train_xt pid=78567)[0m {'agent_para': {'agent_config': {'complete_step': 500000,
[2m[36m(train_xt pid=78567)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=78567)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=78567)[0m               'agent_num': 1},
[2m[36m(train_xt pid=78567)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=78567)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=78567)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=78567)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=78567)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=78567)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=78567)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=78567)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=78567)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=78567)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=78567)[0m                           'instance_num': 8,
[2m[36m(train_xt pid=78567)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=78567)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=78567)[0m                           'save_model': True,
[2m[36m(train_xt pid=78567)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=78567)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=78567)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78567)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=78567)[0m                                    'model_config': {'LR': 0.002928067,
[2m[36m(train_xt pid=78567)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=78567)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=78567)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=78567)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=78567)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78567)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=78567)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=78567)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=78567)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=78567)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=78567)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78567)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=78567)[0m                                                 84,
[2m[36m(train_xt pid=78567)[0m                                                 4],
[2m[36m(train_xt pid=78567)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=78567)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=78567)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=78567)[0m              'id': 'ImpalaCnnOpt_LR_0.002928067_now_time_16945265136159422',
[2m[36m(train_xt pid=78567)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=78567)[0m 'env_num': 8,
[2m[36m(train_xt pid=78567)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=78567)[0m                         'size': 2,
[2m[36m(train_xt pid=78567)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=78567)[0m                         'vision': False,
[2m[36m(train_xt pid=78567)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=78567)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=78567)[0m             'now_time': '16945265136159422'},
[2m[36m(train_xt pid=78567)[0m 'gpu': -1,
[2m[36m(train_xt pid=78567)[0m 'group_num': 1,
[2m[36m(train_xt pid=78567)[0m 'lock': 1,
[2m[36m(train_xt pid=78567)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78567)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=78567)[0m                        'model_config': {'LR': 0.002928067,
[2m[36m(train_xt pid=78567)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=78567)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=78567)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=78567)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=78567)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78567)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=78567)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=78567)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=78567)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=78567)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=78567)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78567)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=78567)[0m                                     84,
[2m[36m(train_xt pid=78567)[0m                                     4],
[2m[36m(train_xt pid=78567)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=78567)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=78567)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=78567)[0m                'dummy_user',
[2m[36m(train_xt pid=78567)[0m                'dummy_password')],
[2m[36m(train_xt pid=78567)[0m 'speedup': 3,
[2m[36m(train_xt pid=78567)[0m 'start_core': 10}
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:29: Init Broker server info:
[2m[36m(train_xt pid=78567)[0m {'recv': {'port': 22539,
[2m[36m(train_xt pid=78567)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=78567)[0m 'send': [{'port': 34637,
[2m[36m(train_xt pid=78567)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:29: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 22539, 34637, '127.0.0.1', 'info')
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:29: launch local broker with lib success
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:29: speedup(3): binding env 3 to CPU 33
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:29: **********
[2m[36m(train_xt pid=78567)[0m workspace:
[2m[36m(train_xt pid=78567)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_LR_0.002928067_now_time_16945265136159422
[2m[36m(train_xt pid=78567)[0m 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:29: init explorer with id: 4, buf_path: /tmp/plasma_share25426
[2m[36m(train_xt pid=78630)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78630)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:30: Finished train job normally.
[2m[36m(train_xt pid=78630)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:30: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=78630)[0m [I 2023-09-12 21:53:30,721] Trial 15 finished with value: 423.0317273795535 and parameters: {'env_pool_size': 5, 'env_pool_wait_nums': 4, 'infer_size': 4}. Best is trial 6 with value: 330.57851239669424.
[2m[36m(train_xt pid=78630)[0m /tmp/plasma23626T0: 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:31: explorer-4 start with sync interval-1
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:32: speedup(3): binding env 1 to CPU 1
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:32: init explorer with id: 2, buf_path: /tmp/plasma_share26307
[2m[36m(train_xt pid=78567)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78567)[0m Instructions for updating:
[2m[36m(train_xt pid=78567)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:33: speedup(3): binding env 4 to CPU 34
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:33: init explorer with id: 5, buf_path: /tmp/plasma_share25426
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:33: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=78630)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=78630)[0m Instructions for updating:
[2m[36m(train_xt pid=78630)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:34: explorer-5 start with sync interval-1
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:35: speedup(3): binding env 2 to CPU 2
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:35: init explorer with id: 3, buf_path: /tmp/plasma_share26307
[2m[36m(train_xt pid=78567)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:35: set verbosity in broker: info
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:35: init broker with id-0
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:35: share buf: plasma_store -m 400000000 -s /tmp/plasma_share27991
[2m[36m(train_xt pid=78567)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=78567)[0m   self.run()
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:35: init explorer with id: 0, buf_path: /tmp/plasma_share27991
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:35: init agent group for: explore
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:36: speedup(3): binding env 5 to CPU 35
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:36: init explorer with id: 6, buf_path: /tmp/plasma_share25426
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:37: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:37: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=78630)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:37: 
[2m[36m(train_xt pid=78630)[0m **************************************************
[2m[36m(train_xt pid=78630)[0m  XT start work...
[2m[36m(train_xt pid=78630)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_LR_0.002047128_now_time_16945265204538767.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=78630)[0m **************************************************
2023-09-12 21:53:37,628	WARNING tune.py:687 -- Stop signal received (e.g. via SIGINT/Ctrl+C), ending Ray Tune run. This will try to checkpoint the experiment state one last time. Press CTRL+C (or send SIGINT/SIGKILL/SIGTERM) to skip. 
[2m[36m(train_xt pid=79720)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:37: explorer-6 start with sync interval-1
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:38: init learner with:
[2m[36m(train_xt pid=78630)[0m {'agent_para': {'agent_config': {'complete_step': 500000,
[2m[36m(train_xt pid=78630)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=78630)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=78630)[0m               'agent_num': 1},
[2m[36m(train_xt pid=78630)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=78630)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=78630)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=78630)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=78630)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=78630)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=78630)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=78630)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=78630)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=78630)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=78630)[0m                           'instance_num': 8,
[2m[36m(train_xt pid=78630)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=78630)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=78630)[0m                           'save_model': True,
[2m[36m(train_xt pid=78630)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=78630)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=78630)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78630)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=78630)[0m                                    'model_config': {'LR': 0.002047128,
[2m[36m(train_xt pid=78630)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=78630)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=78630)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=78630)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=78630)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78630)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=78630)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=78630)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=78630)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=78630)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=78630)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78630)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=78630)[0m                                                 84,
[2m[36m(train_xt pid=78630)[0m                                                 4],
[2m[36m(train_xt pid=78630)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=78630)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=78630)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=78630)[0m              'id': 'ImpalaCnnOpt_LR_0.002047128_now_time_16945265204538767',
[2m[36m(train_xt pid=78630)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=78630)[0m 'env_num': 8,
[2m[36m(train_xt pid=78630)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=78630)[0m                         'size': 2,
[2m[36m(train_xt pid=78630)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=78630)[0m                         'vision': False,
[2m[36m(train_xt pid=78630)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=78630)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=78630)[0m             'now_time': '16945265204538767'},
[2m[36m(train_xt pid=78630)[0m 'gpu': -1,
[2m[36m(train_xt pid=78630)[0m 'group_num': 1,
[2m[36m(train_xt pid=78630)[0m 'lock': 1,
[2m[36m(train_xt pid=78630)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=78630)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=78630)[0m                        'model_config': {'LR': 0.002047128,
[2m[36m(train_xt pid=78630)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=78630)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=78630)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=78630)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=78630)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=78630)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=78630)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=78630)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=78630)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=78630)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=78630)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=78630)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=78630)[0m                                     84,
[2m[36m(train_xt pid=78630)[0m                                     4],
[2m[36m(train_xt pid=78630)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=78630)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=78630)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=78630)[0m                'dummy_user',
[2m[36m(train_xt pid=78630)[0m                'dummy_password')],
[2m[36m(train_xt pid=78630)[0m 'speedup': 3,
[2m[36m(train_xt pid=78630)[0m 'start_core': 20}
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:38: Init Broker server info:
[2m[36m(train_xt pid=78630)[0m {'recv': {'port': 27659,
[2m[36m(train_xt pid=78630)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=78630)[0m 'send': [{'port': 35438,
[2m[36m(train_xt pid=78630)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=78630)[0m 
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:38: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 27659, 35438, '127.0.0.1', 'info')
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:38: launch local broker with lib success
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:38: speedup(3): binding env 3 to CPU 3
[2m[36m(train_xt pid=78630)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:38: **********
[2m[36m(train_xt pid=78630)[0m workspace:
[2m[36m(train_xt pid=78630)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_LR_0.002047128_now_time_16945265204538767
[2m[36m(train_xt pid=78630)[0m 

[2m[36m(train_xt pid=79720)[0m  18343
[2m[36m(train_xt pid=79720)[0m good
[2m[36m(train_xt pid=79720)[0m log filename ================== /tmp/16945267191861663
[2m[36m(train_xt pid=79720)[0m step_per_second ============ 788.0
[2m[36m(train_xt pid=79720)[0m tune_cost =================== True
[2m[36m(train_xt pid=79720)[0m study.best_params ===================== {'env_pool_size': 2, 'env_pool_wait_nums': 2, 'infer_size': 2}
[2m[36m(train_xt pid=79720)[0m study.best_value ========================330.57851239669424
[2m[36m(train_xt pid=79720)[0m get best throughput total time ============= 251.36501789093018
[2m[36m(train_xt pid=79720)[0m ray tune xt log  ================= /tmp/test_xt_with_tune16945265283419323.log
[2m[36m(train_xt pid=79720)[0m  18351
== Status ==
Current time: 2023-09-12 21:53:03 (running for 00:04:43.79)
Memory usage on this node: 30.1/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78524)[0m  18944
== Status ==
Current time: 2023-09-12 21:53:08 (running for 00:04:48.79)
Memory usage on this node: 30.9/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78524)[0m  20317
[2m[36m(train_xt pid=79720)[0m start_core ======================================== 30
[2m[36m(train_xt pid=79720)[0m plasma_store -m 1000000000 -s /tmp/plasma25344
[2m[36m(train_xt pid=79720)[0m self.time_record_filename ============= /tmp/16945265283419323
[2m[36m(train_xt pid=78524)[0m good
[2m[36m(train_xt pid=78524)[0m log filename ================== /tmp/16945267304021678
[2m[36m(train_xt pid=78524)[0m step_per_second ============ 800.0
[2m[36m(train_xt pid=78524)[0m tune_cost =================== True
[2m[36m(train_xt pid=78524)[0m study.best_params ===================== {'env_pool_size': 2, 'env_pool_wait_nums': 2, 'infer_size': 2}
[2m[36m(train_xt pid=78524)[0m study.best_value ========================330.57851239669424
[2m[36m(train_xt pid=78524)[0m get best throughput total time ============= 283.1240792274475
[2m[36m(train_xt pid=78524)[0m ray tune xt log  ================= /tmp/test_xt_with_tune16945265072179165.log
[2m[36m(train_xt pid=78524)[0m  20329
== Status ==
Current time: 2023-09-12 21:53:13 (running for 00:04:53.80)
Memory usage on this node: 29.3/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=79720)[0m plasma_store -m 100000000 -s /tmp/plasma25426T0
== Status ==
Current time: 2023-09-12 21:53:18 (running for 00:04:58.80)
Memory usage on this node: 29.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78567)[0m  19393
[2m[36m(train_xt pid=78524)[0m start_core ======================================== 0
[2m[36m(train_xt pid=78524)[0m plasma_store -m 1000000000 -s /tmp/plasma25963
[2m[36m(train_xt pid=78524)[0m self.time_record_filename ============= /tmp/16945265072179165
[2m[36m(train_xt pid=78567)[0m  20591
[2m[36m(train_xt pid=78567)[0m good
[2m[36m(train_xt pid=78567)[0m log filename ================== /tmp/16945267305582263
[2m[36m(train_xt pid=78567)[0m step_per_second ============ 640.0
[2m[36m(train_xt pid=78567)[0m tune_cost =================== True
[2m[36m(train_xt pid=78567)[0m study.best_params ===================== {'env_pool_size': 2, 'env_pool_wait_nums': 2, 'infer_size': 2}
[2m[36m(train_xt pid=78567)[0m study.best_value ========================330.57851239669424
[2m[36m(train_xt pid=78567)[0m get best throughput total time ============= 288.287273645401
[2m[36m(train_xt pid=78567)[0m ray tune xt log  ================= /tmp/test_xt_with_tune16945265136159422.log
[2m[36m(train_xt pid=78567)[0m  20600
== Status ==
Current time: 2023-09-12 21:53:23 (running for 00:05:03.81)
Memory usage on this node: 28.5/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78524)[0m plasma_store -m 100000000 -s /tmp/plasma26307T0
[2m[36m(train_xt pid=78630)[0m  23631
== Status ==
Current time: 2023-09-12 21:53:28 (running for 00:05:08.81)
Memory usage on this node: 29.1/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78630)[0m  24213
[2m[36m(train_xt pid=78567)[0m start_core ======================================== 10
[2m[36m(train_xt pid=78567)[0m plasma_store -m 1000000000 -s /tmp/plasma27124
[2m[36m(train_xt pid=78567)[0m self.time_record_filename ============= /tmp/16945265136159422
[2m[36m(train_xt pid=78630)[0m good
[2m[36m(train_xt pid=78630)[0m log filename ================== /tmp/16945267525525646
[2m[36m(train_xt pid=78630)[0m step_per_second ============ 851.0
[2m[36m(train_xt pid=78630)[0m tune_cost =================== True
[2m[36m(train_xt pid=78630)[0m study.best_params ===================== {'env_pool_size': 2, 'env_pool_wait_nums': 2, 'infer_size': 2}
[2m[36m(train_xt pid=78630)[0m study.best_value ========================330.57851239669424
[2m[36m(train_xt pid=78630)[0m get best throughput total time ============= 290.0176463127136
[2m[36m(train_xt pid=78630)[0m ray tune xt log  ================= /tmp/test_xt_with_tune16945265204538767.log
[2m[36m(train_xt pid=78630)[0m  24220
== Status ==
Current time: 2023-09-12 21:53:33 (running for 00:05:13.82)
Memory usage on this node: 27.9/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/161.82 GiB heap, 0.0/73.34 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


[2m[36m(train_xt pid=78567)[0m plasma_store -m 100000000 -s /tmp/plasma27991T0
[2m[36m(train_xt pid=78630)[0m start_core ======================================== 20
[2m[36m(train_xt pid=78630)[0m plasma_store -m 1000000000 -s /tmp/plasma29120
[2m[36m(train_xt pid=78630)[0m self.time_record_filename ============= /tmp/16945265204538767
Traceback (most recent call last):
  File "test_xt_with_tune.py", line 262, in <module>
    results_grid = tuner.fit()
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/tuner.py", line 234, in fit
    return self._local_tuner.fit()
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/impl/tuner_internal.py", line 283, in fit
    analysis = self._fit_internal(trainable, param_space)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/impl/tuner_internal.py", line 381, in _fit_internal
    **args,
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/tune.py", line 722, in run
    runner.step()
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/execution/trial_runner.py", line 879, in step
    self._wait_and_handle_event(next_trial)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/execution/trial_runner.py", line 823, in _wait_and_handle_event
    self._live_trials, next_trial is not None
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/execution/ray_trial_executor.py", line 953, in get_next_executor_event
    futures_to_wait, num_returns=1, timeout=self._get_next_event_wait
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/_private/client_mode_hook.py", line 105, in wrapper
    return func(*args, **kwargs)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/_private/worker.py", line 2471, in wait
    fetch_local,
  File "python/ray/_raylet.pyx", line 1414, in ray._raylet.CoreWorker.wait
  File "python/ray/_raylet.pyx", line 173, in ray._raylet.check_status
KeyboardInterrupt
[2m[36m(train_xt pid=78524)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:38: init explorer with id: 4, buf_path: /tmp/plasma_share26307
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:38: speedup(3): binding env 0 to CPU 10
[2m[36m(train_xt pid=78567)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 12 21:53:38: init explorer with id: 1, buf_path: /tmp/plasma_share27991
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/_private/client_mode_hook.py", line 105, in wrapper
    return func(*args, **kwargs)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/_private/worker.py", line 1580, in shutdown
    time.sleep(0.5)
KeyboardInterrupt
