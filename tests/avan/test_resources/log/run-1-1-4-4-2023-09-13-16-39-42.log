WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
Instructions for updating:
non-resource variables are not supported in the long term
2023-09-13 16:39:53,794	INFO worker.py:1515 -- Started a local Ray instance. View the dashboard at [1m[32mhttp://127.0.0.1:8265 [39m[22m
2023-09-13 16:39:55,824	WARNING function_trainable.py:620 -- Function checkpointing is disabled. This may result in unexpected behavior when using checkpointing features or certain schedulers. To enable, set the train function arguments to be `func(config, checkpoint_dir=None)`.
2023-09-13 16:39:55,877	WARNING trial_runner.py:1583 -- You are trying to access _search_alg interface of TrialRunner in TrialScheduler, which is being restricted. If you believe it is reasonable for your scheduler to access this TrialRunner API, please reach out to Ray team on GitHub. A more strict API access pattern would be enforced starting 1.12s.0
[2m[36m(train_xt pid=80034)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py:166: ExperimentalWarning: BoTorchSampler is experimental (supported from v2.4.0). The interface can change in the future.
[2m[36m(train_xt pid=80034)[0m   n_startup_trials=1,
[2m[36m(train_xt pid=80034)[0m 2023-09-13 16:40:03,857	ERROR function_trainable.py:298 -- Runner Thread raised error.
[2m[36m(train_xt pid=80034)[0m Traceback (most recent call last):
[2m[36m(train_xt pid=80034)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 289, in run
[2m[36m(train_xt pid=80034)[0m     self._entrypoint()
[2m[36m(train_xt pid=80034)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 365, in entrypoint
[2m[36m(train_xt pid=80034)[0m     self._status_reporter.get_checkpoint(),
[2m[36m(train_xt pid=80034)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/util/tracing/tracing_helper.py", line 466, in _resume_span
[2m[36m(train_xt pid=80034)[0m     return method(self, *_args, **_kwargs)
[2m[36m(train_xt pid=80034)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 684, in _trainable_func
[2m[36m(train_xt pid=80034)[0m     output = fn()
[2m[36m(train_xt pid=80034)[0m   File "test_xt_with_tune.py", line 149, in train_xt
[2m[36m(train_xt pid=80034)[0m     best_param = find_max_th(yaml_file_path, n_trials, start_core, with_samper)
[2m[36m(train_xt pid=80034)[0m   File "/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py", line 187, in find_max_th
[2m[36m(train_xt pid=80034)[0m     print("study.best_params ===================== {}".format(study.best_params))
[2m[36m(train_xt pid=80034)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/study/study.py", line 117, in best_params
[2m[36m(train_xt pid=80034)[0m     return self.best_trial.params
[2m[36m(train_xt pid=80034)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/study/study.py", line 160, in best_trial
[2m[36m(train_xt pid=80034)[0m     return copy.deepcopy(self._storage.get_best_trial(self._study_id))
[2m[36m(train_xt pid=80034)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/storages/_cached_storage.py", line 182, in get_best_trial
[2m[36m(train_xt pid=80034)[0m     return self._backend.get_best_trial(study_id)
[2m[36m(train_xt pid=80034)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/storages/_rdb/storage.py", line 912, in get_best_trial
[2m[36m(train_xt pid=80034)[0m     trial = models.TrialModel.find_min_value_trial(study_id, 0, session)
[2m[36m(train_xt pid=80034)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/storages/_rdb/models.py", line 231, in find_min_value_trial
[2m[36m(train_xt pid=80034)[0m     raise ValueError(NOT_FOUND_MSG)
[2m[36m(train_xt pid=80034)[0m ValueError: Record does not exist.
[2m[36m(train_xt pid=80079)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py:166: ExperimentalWarning: BoTorchSampler is experimental (supported from v2.4.0). The interface can change in the future.
[2m[36m(train_xt pid=80079)[0m   n_startup_trials=1,
[2m[36m(train_xt pid=80079)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80079)[0m Instructions for updating:
[2m[36m(train_xt pid=80079)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80141)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py:166: ExperimentalWarning: BoTorchSampler is experimental (supported from v2.4.0). The interface can change in the future.
[2m[36m(train_xt pid=80141)[0m   n_startup_trials=1,
[2m[36m(train_xt pid=80079)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:17: 
[2m[36m(train_xt pid=80079)[0m **************************************************
[2m[36m(train_xt pid=80079)[0m  XT start work...
[2m[36m(train_xt pid=80079)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_1694594411377282.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=80079)[0m **************************************************
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:17: init learner with:
[2m[36m(train_xt pid=80079)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=80079)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=80079)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=80079)[0m               'agent_num': 1},
[2m[36m(train_xt pid=80079)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=80079)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=80079)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=80079)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=80079)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=80079)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=80079)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=80079)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=80079)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=80079)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=80079)[0m                           'instance_num': 2,
[2m[36m(train_xt pid=80079)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=80079)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=80079)[0m                           'save_model': True,
[2m[36m(train_xt pid=80079)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=80079)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=80079)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80079)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=80079)[0m                                    'model_config': {'LR': 0.003695889,
[2m[36m(train_xt pid=80079)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=80079)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=80079)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=80079)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=80079)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80079)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=80079)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=80079)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=80079)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=80079)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=80079)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80079)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=80079)[0m                                                 84,
[2m[36m(train_xt pid=80079)[0m                                                 4],
[2m[36m(train_xt pid=80079)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=80079)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=80079)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=80079)[0m              'id': 'ImpalaCnnOpt_now_time_1694594411377282',
[2m[36m(train_xt pid=80079)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=80079)[0m 'env_num': 2,
[2m[36m(train_xt pid=80079)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=80079)[0m                         'size': 3,
[2m[36m(train_xt pid=80079)[0m                         'vector_env_size': 3,
[2m[36m(train_xt pid=80079)[0m                         'vision': False,
[2m[36m(train_xt pid=80079)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=80079)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=80079)[0m             'now_time': '1694594411377282'},
[2m[36m(train_xt pid=80079)[0m 'gpu': -1,
[2m[36m(train_xt pid=80079)[0m 'group_num': 1,
[2m[36m(train_xt pid=80079)[0m 'lock': 1,
[2m[36m(train_xt pid=80079)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80079)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=80079)[0m                        'model_config': {'LR': 0.003695889,
[2m[36m(train_xt pid=80079)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=80079)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=80079)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=80079)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=80079)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80079)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=80079)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=80079)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=80079)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=80079)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=80079)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80079)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=80079)[0m                                     84,
[2m[36m(train_xt pid=80079)[0m                                     4],
[2m[36m(train_xt pid=80079)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=80079)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=80079)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=80079)[0m                'dummy_user',
[2m[36m(train_xt pid=80079)[0m                'dummy_password')],
[2m[36m(train_xt pid=80079)[0m 'speedup': 3,
[2m[36m(train_xt pid=80079)[0m 'start_core': True}
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:17: Init Broker server info:
[2m[36m(train_xt pid=80079)[0m {'recv': {'port': 30993,
[2m[36m(train_xt pid=80079)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=80079)[0m 'send': [{'port': 25799,
[2m[36m(train_xt pid=80079)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:17: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 30993, 25799, '127.0.0.1', 'info')
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:18: launch local broker with lib success
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:18: **********
[2m[36m(train_xt pid=80079)[0m workspace:
[2m[36m(train_xt pid=80079)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_1694594411377282
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80079)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80079)[0m Instructions for updating:
[2m[36m(train_xt pid=80079)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80141)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80141)[0m Instructions for updating:
[2m[36m(train_xt pid=80141)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80079)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:23: set verbosity in broker: info
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:23: init broker with id-0
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:23: share buf: plasma_store -m 400000000 -s /tmp/plasma_share80231
[2m[36m(train_xt pid=80141)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:23: 
[2m[36m(train_xt pid=80141)[0m **************************************************
[2m[36m(train_xt pid=80141)[0m  XT start work...
[2m[36m(train_xt pid=80141)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945944179731953.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=80141)[0m **************************************************
[2m[36m(train_xt pid=80079)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80079)[0m   self.run()
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:23: init explorer with id: 0, buf_path: /tmp/plasma_share80231
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:23: init agent group for: explore
2023-09-13 16:40:24,177	ERROR trial_runner.py:987 -- Trial train_xt_1d8ae_00000: Error processing event.
ray.exceptions.RayTaskError(ValueError): [36mray::ImplicitFunc.train()[39m (pid=80034, ip=192.168.1.128, repr=train_xt)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/trainable.py", line 349, in train
    result = self.step()
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 417, in step
    self._report_thread_runner_error(block=True)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 589, in _report_thread_runner_error
    raise e
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 289, in run
    self._entrypoint()
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 365, in entrypoint
    self._status_reporter.get_checkpoint(),
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 684, in _trainable_func
    output = fn()
  File "test_xt_with_tune.py", line 149, in train_xt
    best_param = find_max_th(yaml_file_path, n_trials, start_core, with_samper)
  File "/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py", line 187, in find_max_th
    print("study.best_params ===================== {}".format(study.best_params))
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/study/study.py", line 117, in best_params
    return self.best_trial.params
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/study/study.py", line 160, in best_trial
    return copy.deepcopy(self._storage.get_best_trial(self._study_id))
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/storages/_cached_storage.py", line 182, in get_best_trial
    return self._backend.get_best_trial(study_id)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/storages/_rdb/storage.py", line 912, in get_best_trial
    trial = models.TrialModel.find_min_value_trial(study_id, 0, session)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/storages/_rdb/models.py", line 231, in find_min_value_trial
    raise ValueError(NOT_FOUND_MSG)
ValueError: Record does not exist.
[2m[36m(train_xt pid=80232)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py:166: ExperimentalWarning: BoTorchSampler is experimental (supported from v2.4.0). The interface can change in the future.
[2m[36m(train_xt pid=80232)[0m   n_startup_trials=1,
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:24: init learner with:
[2m[36m(train_xt pid=80141)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=80141)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=80141)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=80141)[0m               'agent_num': 1},
[2m[36m(train_xt pid=80141)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=80141)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=80141)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=80141)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=80141)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=80141)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=80141)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=80141)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=80141)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=80141)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=80141)[0m                           'instance_num': 2,
[2m[36m(train_xt pid=80141)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=80141)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=80141)[0m                           'save_model': True,
[2m[36m(train_xt pid=80141)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=80141)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=80141)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80141)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=80141)[0m                                    'model_config': {'LR': 0.00386824,
[2m[36m(train_xt pid=80141)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=80141)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=80141)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=80141)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=80141)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80141)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=80141)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=80141)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=80141)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=80141)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=80141)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80141)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=80141)[0m                                                 84,
[2m[36m(train_xt pid=80141)[0m                                                 4],
[2m[36m(train_xt pid=80141)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=80141)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=80141)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=80141)[0m              'id': 'ImpalaCnnOpt_now_time_16945944179731953',
[2m[36m(train_xt pid=80141)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=80141)[0m 'env_num': 2,
[2m[36m(train_xt pid=80141)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=80141)[0m                         'size': 2,
[2m[36m(train_xt pid=80141)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=80141)[0m                         'vision': False,
[2m[36m(train_xt pid=80141)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=80141)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=80141)[0m             'now_time': '16945944179731953'},
[2m[36m(train_xt pid=80141)[0m 'gpu': -1,
[2m[36m(train_xt pid=80141)[0m 'group_num': 1,
[2m[36m(train_xt pid=80141)[0m 'lock': 1,
[2m[36m(train_xt pid=80141)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80141)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=80141)[0m                        'model_config': {'LR': 0.00386824,
[2m[36m(train_xt pid=80141)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=80141)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=80141)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=80141)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=80141)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80141)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=80141)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=80141)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=80141)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=80141)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=80141)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80141)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=80141)[0m                                     84,
[2m[36m(train_xt pid=80141)[0m                                     4],
[2m[36m(train_xt pid=80141)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=80141)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=80141)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=80141)[0m                'dummy_user',
[2m[36m(train_xt pid=80141)[0m                'dummy_password')],
[2m[36m(train_xt pid=80141)[0m 'speedup': 3,
[2m[36m(train_xt pid=80141)[0m 'start_core': True}
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:24: Init Broker server info:
[2m[36m(train_xt pid=80141)[0m {'recv': {'port': 23694,
[2m[36m(train_xt pid=80141)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=80141)[0m 'send': [{'port': 29858,
[2m[36m(train_xt pid=80141)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:24: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 23694, 29858, '127.0.0.1', 'info')
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:24: launch local broker with lib success
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:24: **********
[2m[36m(train_xt pid=80141)[0m workspace:
[2m[36m(train_xt pid=80141)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945944179731953
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:25: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:26: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:27: init explorer with id: 1, buf_path: /tmp/plasma_share80231
[2m[36m(train_xt pid=80141)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80141)[0m Instructions for updating:
[2m[36m(train_xt pid=80141)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80232)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80232)[0m Instructions for updating:
[2m[36m(train_xt pid=80232)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:28: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:30: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=80141)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:30: set verbosity in broker: info
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:30: init broker with id-0
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:30: share buf: plasma_store -m 400000000 -s /tmp/plasma_share80888
[2m[36m(train_xt pid=80141)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80141)[0m   self.run()
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:30: init explorer with id: 0, buf_path: /tmp/plasma_share80888
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:30: init agent group for: explore
[2m[36m(train_xt pid=80232)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:31: 
[2m[36m(train_xt pid=80232)[0m **************************************************
[2m[36m(train_xt pid=80232)[0m  XT start work...
[2m[36m(train_xt pid=80232)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945944259777293.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=80232)[0m **************************************************
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:32: init learner with:
[2m[36m(train_xt pid=80232)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=80232)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=80232)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=80232)[0m               'agent_num': 1},
[2m[36m(train_xt pid=80232)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=80232)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=80232)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=80232)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=80232)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=80232)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=80232)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=80232)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=80232)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=80232)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=80232)[0m                           'instance_num': 3,
[2m[36m(train_xt pid=80232)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=80232)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=80232)[0m                           'save_model': True,
[2m[36m(train_xt pid=80232)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=80232)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=80232)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80232)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=80232)[0m                                    'model_config': {'LR': 0.002724888,
[2m[36m(train_xt pid=80232)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=80232)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=80232)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=80232)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=80232)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80232)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=80232)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=80232)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=80232)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=80232)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=80232)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80232)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=80232)[0m                                                 84,
[2m[36m(train_xt pid=80232)[0m                                                 4],
[2m[36m(train_xt pid=80232)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=80232)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=80232)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=80232)[0m              'id': 'ImpalaCnnOpt_now_time_16945944259777293',
[2m[36m(train_xt pid=80232)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=80232)[0m 'env_num': 3,
[2m[36m(train_xt pid=80232)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=80232)[0m                         'size': 4,
[2m[36m(train_xt pid=80232)[0m                         'vector_env_size': 4,
[2m[36m(train_xt pid=80232)[0m                         'vision': False,
[2m[36m(train_xt pid=80232)[0m                         'wait_num': 4},
[2m[36m(train_xt pid=80232)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=80232)[0m             'now_time': '16945944259777293'},
[2m[36m(train_xt pid=80232)[0m 'gpu': -1,
[2m[36m(train_xt pid=80232)[0m 'group_num': 1,
[2m[36m(train_xt pid=80232)[0m 'lock': 1,
[2m[36m(train_xt pid=80232)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80232)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=80232)[0m                        'model_config': {'LR': 0.002724888,
[2m[36m(train_xt pid=80232)[0m                                        'action_type': 'Categorical',tune_system ================== True
with_samper ================== True
== Status ==
Current time: 2023-09-13 16:40:03 (running for 00:00:07.27)
Memory usage on this node: 15.6/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 10.0/80 CPUs, 0.4/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (3 PENDING, 1 RUNNING)


[2m[36m(train_xt pid=80034)[0m {'lr': 0.0035537193544387244, 'checkpoint_interval': 1}
[2m[36m(train_xt pid=80034)[0m trail id ================= 1d8ae_00000
[2m[36m(train_xt pid=80034)[0m =================with_samper=========================
[2m[36m(train_xt pid=80034)[0m =================not with_samper=========================
== Status ==
Current time: 2023-09-13 16:40:09 (running for 00:00:13.71)
Memory usage on this node: 15.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 20.0/80 CPUs, 0.8/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (2 PENDING, 2 RUNNING)


[2m[36m(train_xt pid=80079)[0m {'lr': 0.0036958891080308793, 'checkpoint_interval': 1}
[2m[36m(train_xt pid=80079)[0m trail id ================= 1d8ae_00001
[2m[36m(train_xt pid=80079)[0m =================with_samper=========================
[2m[36m(train_xt pid=80079)[0m =================not with_samper=========================
[2m[36m(train_xt pid=80079)[0m =======================env_pool_size======================3
[2m[36m(train_xt pid=80079)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=80079)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=80079)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_1694594411377282.yaml
[2m[36m(train_xt pid=80079)[0m run_log ======================== /tmp/test_opt_bys1694594411377282.log
== Status ==
Current time: 2023-09-13 16:40:16 (running for 00:00:20.30)
Memory usage on this node: 16.4/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 PENDING, 3 RUNNING)


[2m[36m(train_xt pid=80141)[0m {'lr': 0.003868240388654023, 'checkpoint_interval': 1}
[2m[36m(train_xt pid=80141)[0m trail id ================= 1d8ae_00002
[2m[36m(train_xt pid=80141)[0m =================with_samper=========================
[2m[36m(train_xt pid=80141)[0m =================not with_samper=========================
[2m[36m(train_xt pid=80079)[0m start_core ======================================== True
[2m[36m(train_xt pid=80079)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=80141)[0m =======================env_pool_size======================2
[2m[36m(train_xt pid=80141)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=80141)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=80141)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945944179731953.yaml
[2m[36m(train_xt pid=80141)[0m run_log ======================== /tmp/test_opt_bys16945944179731953.log
[2m[36m(train_xt pid=80079)[0m plasma_store -m 1000000000 -s /tmp/plasma80150
[2m[36m(train_xt pid=80079)[0m self.time_record_filename ============= /tmp/1694594411377282
[2m[36m(train_xt pid=80079)[0m plasma_store -m 100000000 -s /tmp/plasma80231T0
== Status ==
Current time: 2023-09-13 16:40:24 (running for 00:00:28.30)
Memory usage on this node: 18.0/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


== Status ==
Current time: 2023-09-13 16:40:24 (running for 00:00:28.31)
Memory usage on this node: 18.0/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80232)[0m {'lr': 0.002724888446620349, 'checkpoint_interval': 1}
[2m[36m(train_xt pid=80232)[0m trail id ================= 1d8ae_00003
[2m[36m(train_xt pid=80232)[0m =================with_samper=========================
[2m[36m(train_xt pid=80232)[0m =================not with_samper=========================
[2m[36m(train_xt pid=80141)[0m start_core ======================================== True
[2m[36m(train_xt pid=80141)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=80141)[0m plasma_store -m 1000000000 -s /tmp/plasma80245
[2m[36m(train_xt pid=80141)[0m self.time_record_filename ============= /tmp/16945944179731953
[2m[36m(train_xt pid=80232)[0m =======================env_pool_size======================4
[2m[36m(train_xt pid=80232)[0m =======================env_pool_wait_nums======================4
[2m[36m(train_xt pid=80232)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=80232)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945944259777293.yaml
[2m[36m(train_xt pid=80232)[0m run_log ======================== /tmp/test_opt_bys16945944259777293.log
== Status ==
Current time: 2023-09-13 16:40:29 (running for 00:00:33.33)
Memory usage on this node: 19.0/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80141)[0m plasma_store -m 100000000 -s /tmp/plasma80888T0
[2m[36m(train_xt pid=80232)[0m start_core ======================================== True
[2m[36m(train_xt pid=80232)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=80232)[0m plasma_store -m 1000000000 -s /tmp/plasma81663
[2m[36m(train_xt pid=80232)[0m self.time_record_filename ============= /tmp/16945944259777293
== Status ==
Current time: 2023-09-13 16:40:34 (running for 00:00:38.33)
Memory usage on this node: 20.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80232)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=80232)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=80232)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=80232)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80232)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=80232)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=80232)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=80232)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=80232)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=80232)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80232)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=80232)[0m                                     84,
[2m[36m(train_xt pid=80232)[0m                                     4],
[2m[36m(train_xt pid=80232)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=80232)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=80232)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=80232)[0m                'dummy_user',
[2m[36m(train_xt pid=80232)[0m                'dummy_password')],
[2m[36m(train_xt pid=80232)[0m 'speedup': 3,
[2m[36m(train_xt pid=80232)[0m 'start_core': True}
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:32: Init Broker server info:
[2m[36m(train_xt pid=80232)[0m {'recv': {'port': 35177,
[2m[36m(train_xt pid=80232)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=80232)[0m 'send': [{'port': 24653,
[2m[36m(train_xt pid=80232)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:32: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 35177, 24653, '127.0.0.1', 'info')
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:32: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:32: launch local broker with lib success
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:32: **********
[2m[36m(train_xt pid=80232)[0m workspace:
[2m[36m(train_xt pid=80232)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945944259777293
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:33: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:33: init explorer with id: 1, buf_path: /tmp/plasma_share80888
[2m[36m(train_xt pid=80079)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80079)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=80079)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80079)[0m   self.run()
[2m[36m(train_xt pid=80079)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80079)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:34: Task: T0         | Train_count:         2 | Steps:       627 | Elapsed time: 13 seconds
[2m[36m(train_xt pid=80079)[0m mean_env_step_ms:          2.10546	mean_explore_ms:        632.810593	mean_inference_ms:        2.537688	mean_loop_time_ms:      476.229787
[2m[36m(train_xt pid=80079)[0m mean_prepare_data_ms:     0.764847	mean_restore_model_ms:   48.620462	mean_train_time_ms:     622.219642	mean_wait_model_ms:     2963.824391
[2m[36m(train_xt pid=80079)[0m mean_wait_sample_ms:    3722.113689	step_per_second:              47.0	train_loss:              -1.269304	train_reward_avg:              1.0
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80232)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80232)[0m Instructions for updating:
[2m[36m(train_xt pid=80232)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:35: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:36: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=80232)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:38: set verbosity in broker: info
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:38: init broker with id-0
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:38: share buf: plasma_store -m 400000000 -s /tmp/plasma_share894
[2m[36m(train_xt pid=80232)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80232)[0m   self.run()
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:38: init explorer with id: 0, buf_path: /tmp/plasma_share894
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:38: init agent group for: explore
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:40: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=80141)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80141)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=80141)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80141)[0m   self.run()
[2m[36m(train_xt pid=80141)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80141)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:41: Task: T0         | Train_count:         2 | Steps:       666 | Elapsed time: 13 seconds
[2m[36m(train_xt pid=80141)[0m mean_env_step_ms:         2.854306	mean_explore_ms:         723.65129	mean_inference_ms:         2.49686	mean_loop_time_ms:      454.841614
[2m[36m(train_xt pid=80232)[0m plasma_store -m 100000000 -s /tmp/plasma894T0
== Status ==
Current time: 2023-09-13 16:40:39 (running for 00:00:43.34)
Memory usage on this node: 21.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:40:44 (running for 00:00:48.35)
Memory usage on this node: 22.2/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:40:49 (running for 00:00:53.35)
Memory usage on this node: 22.6/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:40:54 (running for 00:00:58.36)
Memory usage on this node: 23.4/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:40:59 (running for 00:01:03.36)
Memory usage on this node: 23.5/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:41:04 (running for 00:01:08.37)
Memory usage on this node: 23.6/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:41:09 (running for 00:01:13.37)
Memory usage on this node: 23.6/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:41:14 (running for 00:01:18.38)
Memory usage on this node: 23.6/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80141)[0m mean_prepare_data_ms:     0.818412	mean_restore_model_ms:   53.440094	mean_train_time_ms:     676.608245	mean_wait_model_ms:     2946.87593
[2m[36m(train_xt pid=80141)[0m mean_wait_sample_ms:    3913.38857	step_per_second:              47.0	train_loss:              43.639572	train_reward_avg:              0.0
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:41: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:41: init explorer with id: 1, buf_path: /tmp/plasma_share894
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:43: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:44: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:44: init explorer with id: 2, buf_path: /tmp/plasma_share894
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:46: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:47: speedup(3): binding env 2 to CPU 3
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:49: Task: T0         | Train_count:        42 | Steps:     10938 | Elapsed time: 28 seconds
[2m[36m(train_xt pid=80079)[0m mean_env_step_ms:          2.20697	mean_explore_ms:        601.298779	mean_inference_ms:        2.324252	mean_loop_time_ms:      393.674016
[2m[36m(train_xt pid=80079)[0m mean_prepare_data_ms:     0.784206	mean_restore_model_ms:   15.685022	mean_train_time_ms:       17.43412	mean_wait_model_ms:     895.411134
[2m[36m(train_xt pid=80079)[0m mean_wait_sample_ms:    369.322276	step_per_second:             383.0	train_loss:             -31.400955	train_reward_avg:         1.277778
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80232)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80232)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=80232)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80232)[0m   self.run()
[2m[36m(train_xt pid=80232)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80232)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:51: Task: T0         | Train_count:         2 | Steps:      1405 | Elapsed time: 16 seconds
[2m[36m(train_xt pid=80232)[0m mean_env_step_ms:         4.496497	mean_explore_ms:        1158.671141	mean_inference_ms:        3.869414	mean_loop_time_ms:       57.311416
[2m[36m(train_xt pid=80232)[0m mean_prepare_data_ms:     1.126846	mean_restore_model_ms:   60.444832	mean_train_time_ms:      707.89663	mean_wait_model_ms:     4510.973612
[2m[36m(train_xt pid=80232)[0m mean_wait_sample_ms:    4837.645849	step_per_second:              83.0	train_loss:              -8.054222	train_reward_avg:              0.0
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:40:59: Task: T0         | Train_count:        42 | Steps:     10993 | Elapsed time: 32 seconds
[2m[36m(train_xt pid=80141)[0m mean_env_step_ms:         3.171186	mean_explore_ms:        721.006304	mean_inference_ms:        2.309472	mean_loop_time_ms:      485.701907
[2m[36m(train_xt pid=80141)[0m mean_prepare_data_ms:     0.928688	mean_restore_model_ms:   17.021716	mean_train_time_ms:      22.250545	mean_wait_model_ms:     886.274427
[2m[36m(train_xt pid=80141)[0m mean_wait_sample_ms:    454.143167	step_per_second:             336.0	train_loss:              40.782707	train_reward_avg:         0.857143
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:01: Task: T0         | Train_count:        22 | Steps:     11684 | Elapsed time: 26 seconds
[2m[36m(train_xt pid=80232)[0m mean_env_step_ms:         4.410431	mean_explore_ms:        1085.775654	mean_inference_ms:        3.634101	mean_loop_time_ms:      465.352273
[2m[36m(train_xt pid=80232)[0m mean_prepare_data_ms:     1.420939	mean_restore_model_ms:   32.767415	mean_train_time_ms:      30.107117	mean_wait_model_ms:     2716.293216
[2m[36m(train_xt pid=80232)[0m mean_wait_sample_ms:    425.939023	step_per_second:             448.0	train_loss:              87.221046	train_reward_avg:             1.25
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:06: Task: T0         | Train_count:        82 | Steps:     20999 | Elapsed time: 45 seconds
[2m[36m(train_xt pid=80079)[0m mean_env_step_ms:         2.334738	mean_explore_ms:        619.725287	mean_inference_ms:        2.351876	mean_loop_time_ms:      424.527991
[2m[36m(train_xt pid=80079)[0m mean_prepare_data_ms:     0.847363	mean_restore_model_ms:   12.634317	mean_train_time_ms:      18.447518	mean_wait_model_ms:     662.885427
[2m[36m(train_xt pid=80079)[0m mean_wait_sample_ms:    398.947585	step_per_second:             463.0	train_loss:              62.427788	train_reward_avg:         1.166667
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:10: Task: T0         | Train_count:        42 | Steps:     22014 | Elapsed time: 35 seconds
[2m[36m(train_xt pid=80232)[0m mean_env_step_ms:         4.460873	mean_explore_ms:        1070.071326	mean_inference_ms:        3.539302	mean_loop_time_ms:      466.621876
[2m[36m(train_xt pid=80232)[0m mean_prepare_data_ms:     1.477695	mean_restore_model_ms:   24.284177	mean_train_time_ms:      28.844452	mean_wait_model_ms:     1934.469965
[2m[36m(train_xt pid=80232)[0m mean_wait_sample_ms:    428.960586	step_per_second:             621.0	train_loss:             -52.297318	train_reward_avg:         0.928571
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:19: Task: T0         | Train_count:        62 | Steps:     32207 | Elapsed time: 44 seconds
[2m[36m(train_xt pid=80232)[0m mean_env_step_ms:          4.37187	mean_explore_ms:        1052.086691	mean_inference_ms:        3.524875	mean_loop_time_ms:      458.004677
[2m[36m(train_xt pid=80232)[0m mean_prepare_data_ms:     1.442993	mean_restore_model_ms:   19.738992	mean_train_time_ms:      28.686941	mean_wait_model_ms:     1540.675958
[2m[36m(train_xt pid=80232)[0m mean_wait_sample_ms:      420.0194	step_per_second:             722.0	train_loss:              25.945147	train_reward_avg:            0.875
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:19: Task: T0         | Train_count:        82 | Steps:     21128 | Elapsed time: 52 seconds
[2m[36m(train_xt pid=80141)[0m mean_env_step_ms:         3.346467	mean_explore_ms:        744.538109	mean_inference_ms:        2.331122	mean_loop_time_ms:      496.117949
[2m[36m(train_xt pid=80141)[0m mean_prepare_data_ms:     0.969017	mean_restore_model_ms:   13.095399	mean_train_time_ms:      23.538101	mean_wait_model_ms:     660.276751
[2m[36m(train_xt pid=80141)[0m mean_wait_sample_ms:    463.369143	step_per_second:             401.0	train_loss:             -11.891817	train_reward_avg:         0.954545
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:22: Task: T0         | Train_count:       122 | Steps:     31371 | Elapsed time: 1 minutes, 2 seconds
[2m[36m(train_xt pid=80079)[0m mean_env_step_ms:         2.396047	mean_explore_ms:        627.471844	mean_inference_ms:        2.356882	mean_loop_time_ms:      422.732067
[2m[36m(train_xt pid=80079)[0m mean_prepare_data_ms:      0.84548	mean_restore_model_ms:   10.076258	mean_train_time_ms:      17.965674	mean_wait_model_ms:     510.826137
[2m[36m(train_xt pid=80079)[0m mean_wait_sample_ms:    397.755492	step_per_second:             504.0	train_loss:              -3.253204	train_reward_avg:         1.083333
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80232)[0m /tmp/plasma81663:   
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:28: broker status timeout!
[2m[36m(train_xt pid=80232)[0m /tmp/plasma_share894:
[2m[36m(train_xt pid=80232)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80232)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:31: Finished train job normally.
[2m[36m(train_xt pid=80232)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80232)[0m [I 2023-09-13 16:41:31,435] Trial 2 finished with value: 387.81163434903044 and parameters: {'env_pool_size': 4, 'env_pool_wait_nums': 4, 'infer_size': 3}. Best is trial 2 with value: 387.81163434903044.
[2m[36m(train_xt pid=80232)[0m /tmp/plasma894T0:   
[2m[36m(train_xt pid=80232)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80232)[0m Instructions for updating:
[2m[36m(train_xt pid=80232)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80079)[0m /tmp/plasma80150:   
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:37: Task: T0         | Train_count:       122 | Steps:     31465 | Elapsed time: 1 minutes, 10 seconds
[2m[36m(train_xt pid=80141)[0m mean_env_step_ms:         3.324241	mean_explore_ms:        734.544105	mean_inference_ms:        2.289955	mean_loop_time_ms:      407.743156
[2m[36m(train_xt pid=80141)[0m mean_prepare_data_ms:     0.843441	mean_restore_model_ms:   10.280675	mean_train_time_ms:      20.749724	mean_wait_model_ms:     512.806919
[2m[36m(train_xt pid=80141)[0m mean_wait_sample_ms:    378.526926	step_per_second:             447.0	train_loss:               2.660226	train_reward_avg:              1.0
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:37: broker status timeout!
[2m[36m(train_xt pid=80079)[0m /tmp/plasma_share80231:
[2m[36m(train_xt pid=80232)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:38: 
[2m[36m(train_xt pid=80232)[0m **************************************************
[2m[36m(train_xt pid=80232)[0m  XT start work...
[2m[36m(train_xt pid=80232)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945944924701924.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=80232)[0m **************************************************
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:39: init learner with:
[2m[36m(train_xt pid=80232)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=80232)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=80232)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=80232)[0m               'agent_num': 1},
[2m[36m(train_xt pid=80232)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=80232)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=80232)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=80232)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=80232)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=80232)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=80232)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=80232)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=80232)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=80232)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=80232)[0m                           'instance_num': 5,
[2m[36m(train_xt pid=80232)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=80232)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=80232)[0m                           'save_model': True,
[2m[36m(train_xt pid=80232)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=80232)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=80232)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80232)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=80232)[0m                                    'model_config': {'LR': 0.002724888,
[2m[36m(train_xt pid=80232)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=80232)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=80232)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=80232)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=80232)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80232)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=80232)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=80232)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=80232)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=80232)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=80232)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80232)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=80232)[0m                                                 84,
[2m[36m(train_xt pid=80232)[0m                                                 4],
[2m[36m(train_xt pid=80232)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=80232)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=80232)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=80232)[0m              'id': 'ImpalaCnnOpt_now_time_16945944924701924',
[2m[36m(train_xt pid=80232)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=80232)[0m 'env_num': 5,
[2m[36m(train_xt pid=80232)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
== Status ==
Current time: 2023-09-13 16:41:19 (running for 00:01:23.38)
Memory usage on this node: 23.7/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:41:24 (running for 00:01:28.39)
Memory usage on this node: 23.7/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80232)[0m    897
== Status ==
Current time: 2023-09-13 16:41:29 (running for 00:01:33.40)
Memory usage on this node: 23.7/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80232)[0m   1771
[2m[36m(train_xt pid=80232)[0m good
[2m[36m(train_xt pid=80232)[0m log filename ================== /tmp/16945944259777293
[2m[36m(train_xt pid=80232)[0m step_per_second ============ 722.0
[2m[36m(train_xt pid=80232)[0m tune_cost =================== True
[2m[36m(train_xt pid=80232)[0m   1779
[2m[36m(train_xt pid=80232)[0m =======================env_pool_size======================5
[2m[36m(train_xt pid=80232)[0m =======================env_pool_wait_nums======================4
[2m[36m(train_xt pid=80232)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=80232)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945944924701924.yaml
[2m[36m(train_xt pid=80232)[0m run_log ======================== /tmp/test_opt_bys16945944924701924.log
== Status ==
Current time: 2023-09-13 16:41:34 (running for 00:01:38.40)
Memory usage on this node: 21.6/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80079)[0m  80240
[2m[36m(train_xt pid=80079)[0m  80835
== Status ==
Current time: 2023-09-13 16:41:39 (running for 00:01:43.41)
Memory usage on this node: 21.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80232)[0m start_core ======================================== True
[2m[36m(train_xt pid=80232)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=80232)[0m plasma_store -m 1000000000 -s /tmp/plasma3093
[2m[36m(train_xt pid=80232)[0m self.time_record_filename ============= /tmp/16945944924701924
[2m[36m(train_xt pid=80079)[0m good
[2m[36m(train_xt pid=80079)[0m log filename ================== /tmp/1694594411377282
[2m[36m(train_xt pid=80079)[0m step_per_second ============ 504.0
[2m[36m(train_xt pid=80079)[0m tune_cost =================== True
[2m[36m(train_xt pid=80079)[0m  80843
[2m[36m(train_xt pid=80079)[0m =======================env_pool_size======================3
[2m[36m(train_xt pid=80079)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=80079)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=80079)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_1694594501146219.yaml
[2m[36m(train_xt pid=80079)[0m run_log ======================== /tmp/test_opt_bys1694594501146219.log
== Status ==
Current time: 2023-09-13 16:41:44 (running for 00:01:48.41)
Memory usage on this node: 21.1/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80232)[0m                         'size': 5,
[2m[36m(train_xt pid=80232)[0m                         'vector_env_size': 5,
[2m[36m(train_xt pid=80232)[0m                         'vision': False,
[2m[36m(train_xt pid=80232)[0m                         'wait_num': 4},
[2m[36m(train_xt pid=80232)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=80232)[0m             'now_time': '16945944924701924'},
[2m[36m(train_xt pid=80232)[0m 'gpu': -1,
[2m[36m(train_xt pid=80232)[0m 'group_num': 1,
[2m[36m(train_xt pid=80232)[0m 'lock': 1,
[2m[36m(train_xt pid=80232)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80232)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=80232)[0m                        'model_config': {'LR': 0.002724888,
[2m[36m(train_xt pid=80232)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=80232)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=80232)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=80232)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=80232)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80232)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=80232)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=80232)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=80232)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=80232)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=80232)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80232)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=80232)[0m                                     84,
[2m[36m(train_xt pid=80232)[0m                                     4],
[2m[36m(train_xt pid=80232)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=80232)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=80232)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=80232)[0m                'dummy_user',
[2m[36m(train_xt pid=80232)[0m                'dummy_password')],
[2m[36m(train_xt pid=80232)[0m 'speedup': 3,
[2m[36m(train_xt pid=80232)[0m 'start_core': True}
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:39: Init Broker server info:
[2m[36m(train_xt pid=80232)[0m {'recv': {'port': 29919,
[2m[36m(train_xt pid=80232)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=80232)[0m 'send': [{'port': 39235,
[2m[36m(train_xt pid=80232)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:39: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 29919, 39235, '127.0.0.1', 'info')
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:39: launch local broker with lib success
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:39: **********
[2m[36m(train_xt pid=80232)[0m workspace:
[2m[36m(train_xt pid=80232)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945944924701924
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80079)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80079)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:39: Finished train job normally.
[2m[36m(train_xt pid=80079)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80079)[0m [I 2023-09-13 16:41:40,110] Trial 0 finished with value: 396.82539682539687 and parameters: {'env_pool_size': 3, 'env_pool_wait_nums': 2, 'infer_size': 2}. Best is trial 2 with value: 387.81163434903044.
[2m[36m(train_xt pid=80079)[0m /tmp/plasma80231T0: 
[2m[36m(train_xt pid=80232)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80232)[0m Instructions for updating:
[2m[36m(train_xt pid=80232)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80079)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80079)[0m Instructions for updating:
[2m[36m(train_xt pid=80079)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80232)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:45: set verbosity in broker: info
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:45: init broker with id-0
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:45: share buf: plasma_store -m 400000000 -s /tmp/plasma_share3275
[2m[36m(train_xt pid=80232)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80232)[0m   self.run()
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:45: init explorer with id: 0, buf_path: /tmp/plasma_share3275
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:45: init agent group for: explore
[2m[36m(train_xt pid=80079)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:47: 
[2m[36m(train_xt pid=80079)[0m **************************************************
[2m[36m(train_xt pid=80079)[0m  XT start work...
[2m[36m(train_xt pid=80079)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_1694594501146219.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=80079)[0m **************************************************
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:47: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:47: init learner with:
[2m[36m(train_xt pid=80079)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=80079)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=80079)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=80079)[0m               'agent_num': 1},
[2m[36m(train_xt pid=80079)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=80079)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=80079)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=80079)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=80079)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=80079)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=80079)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=80079)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=80079)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=80079)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=80079)[0m                           'instance_num': 3,
[2m[36m(train_xt pid=80079)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=80079)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=80079)[0m                           'save_model': True,
[2m[36m(train_xt pid=80079)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=80079)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=80079)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80079)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=80079)[0m                                    'model_config': {'LR': 0.003695889,
[2m[36m(train_xt pid=80079)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=80079)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=80079)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=80079)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=80079)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80079)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=80079)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=80079)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=80079)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=80079)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=80079)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80079)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=80079)[0m                                                 84,
[2m[36m(train_xt pid=80079)[0m                                                 4],
[2m[36m(train_xt pid=80079)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=80079)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=80079)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=80079)[0m              'id': 'ImpalaCnnOpt_now_time_1694594501146219',
[2m[36m(train_xt pid=80079)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=80079)[0m 'env_num': 3,
[2m[36m(train_xt pid=80079)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=80079)[0m                         'size': 3,
[2m[36m(train_xt pid=80079)[0m                         'vector_env_size': 3,
[2m[36m(train_xt pid=80079)[0m                         'vision': False,
[2m[36m(train_xt pid=80079)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=80079)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=80079)[0m             'now_time': '1694594501146219'},
[2m[36m(train_xt pid=80079)[0m 'gpu': -1,
[2m[36m(train_xt pid=80079)[0m 'group_num': 1,
[2m[36m(train_xt pid=80079)[0m 'lock': 1,
[2m[36m(train_xt pid=80079)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80079)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=80079)[0m                        'model_config': {'LR': 0.003695889,
[2m[36m(train_xt pid=80079)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=80079)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=80079)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=80079)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=80079)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80079)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=80079)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=80079)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=80079)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=80079)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=80079)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80079)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=80079)[0m                                     84,
[2m[36m(train_xt pid=80079)[0m                                     4],
[2m[36m(train_xt pid=80079)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=80079)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=80079)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=80079)[0m                'dummy_user',
[2m[36m(train_xt pid=80079)[0m                'dummy_password')],
[2m[36m(train_xt pid=80079)[0m 'speedup': 3,
[2m[36m(train_xt pid=80079)[0m 'start_core': True}
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:47: Init Broker server info:
[2m[36m(train_xt pid=80079)[0m {'recv': {'port': 34117,
[2m[36m(train_xt pid=80079)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=80079)[0m 'send': [{'port': 35070,
[2m[36m(train_xt pid=80079)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:47: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 34117, 35070, '127.0.0.1', 'info')
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:47: launch local broker with lib success
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:48: **********
[2m[36m(train_xt pid=80079)[0m workspace:
[2m[36m(train_xt pid=80079)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_1694594501146219
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:48: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:48: init explorer with id: 1, buf_path: /tmp/plasma_share3275
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:50: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=80079)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80079)[0m Instructions for updating:
[2m[36m(train_xt pid=80079)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80141)[0m /tmp/plasma80245:   
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:51: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:51: broker status timeout!
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:51: init explorer with id: 2, buf_path: /tmp/plasma_share3275
[2m[36m(train_xt pid=80141)[0m /tmp/plasma_share80888:
[2m[36m(train_xt pid=80079)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:53: set verbosity in broker: info
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:53: init broker with id-0
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:53: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:53: share buf: plasma_store -m 400000000 -s /tmp/plasma_share4553
[2m[36m(train_xt pid=80079)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80079)[0m   self.run()
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:53: init explorer with id: 0, buf_path: /tmp/plasma_share4553
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:53: init agent group for: explore
[2m[36m(train_xt pid=80141)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80141)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:54: Finished train job normally.
[2m[36m(train_xt pid=80141)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80141)[0m [I 2023-09-13 16:41:54,346] Trial 1 finished with value: 357.94183445190157 and parameters: {'env_pool_size': 2, 'env_pool_wait_nums': 2, 'infer_size': 2}. Best is trial 1 with value: 357.94183445190157.
[2m[36m(train_xt pid=80141)[0m /tmp/plasma80888T0: 
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:54: speedup(3): binding env 2 to CPU 3
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:54: init explorer with id: 3, buf_path: /tmp/plasma_share3275
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:55: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:56: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:56: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:57: init explorer with id: 1, buf_path: /tmp/plasma_share4553
[2m[36m(train_xt pid=80141)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80141)[0m Instructions for updating:
[2m[36m(train_xt pid=80141)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:57: speedup(3): binding env 3 to CPU 4
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:58: init explorer with id: 4, buf_path: /tmp/plasma_share3275
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:58: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:41:59: explorer-4 start with sync interval-1
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:00: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:00: init explorer with id: 2, buf_path: /tmp/plasma_share4553
[2m[36m(train_xt pid=80141)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:01: 
[2m[36m(train_xt pid=80141)[0m **************************************************
[2m[36m(train_xt pid=80141)[0m  XT start work...
[2m[36m(train_xt pid=80141)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945945153782115.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=80141)[0m **************************************************
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:01: speedup(3): binding env 4 to CPU 5
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:01: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:01: init learner with:
[2m[36m(train_xt pid=80141)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=80141)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=80141)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=80141)[0m               'agent_num': 1},
[2m[36m(train_xt pid=80141)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=80141)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=80141)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=80141)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=80141)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=80141)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=80141)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=80141)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=80141)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=80141)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=80141)[0m                           'instance_num': 2,
[2m[36m(train_xt pid=80141)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=80141)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=80141)[0m                           'save_model': True,
[2m[36m(train_xt pid=80141)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=80141)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=80141)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80141)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=80141)[0m                                    'model_config': {'LR': 0.00386824,
[2m[36m(train_xt pid=80141)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=80141)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=80141)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=80141)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=80141)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80141)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=80141)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=80141)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=80141)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=80141)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=80141)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80141)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=80141)[0m                                                 84,
[2m[36m(train_xt pid=80141)[0m                                                 4],
[2m[36m(train_xt pid=80141)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=80141)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=80141)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=80141)[0m              'id': 'ImpalaCnnOpt_now_time_16945945153782115',
[2m[36m(train_xt pid=80141)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=80141)[0m 'env_num': 2,
[2m[36m(train_xt pid=80141)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=80141)[0m                         'size': 5,
[2m[36m(train_xt pid=80141)[0m                         'vector_env_size': 5,
[2m[36m(train_xt pid=80141)[0m                         'vision': False,
[2m[36m(train_xt pid=80141)[0m                         'wait_num': 5},
[2m[36m(train_xt pid=80141)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=80141)[0m             'now_time': '16945945153782115'},
[2m[36m(train_xt pid=80141)[0m 'gpu': -1,
[2m[36m(train_xt pid=80141)[0m 'group_num': 1,
[2m[36m(train_xt pid=80141)[0m 'lock': 1,
[2m[36m(train_xt pid=80141)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80141)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=80141)[0m                        'model_config': {'LR': 0.00386824,
[2m[36m(train_xt pid=80141)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=80141)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=80141)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=80141)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=80141)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80141)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=80141)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=80141)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=80141)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=80141)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=80141)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80141)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=80141)[0m                                     84,
[2m[36m(train_xt pid=80141)[0m                                     4],
[2m[36m(train_xt pid=80141)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=80141)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=80141)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=80141)[0m                'dummy_user',
[2m[36m(train_xt pid=80141)[0m                'dummy_password')],
[2m[36m(train_xt pid=80141)[0m 'speedup': 3,
[2m[36m(train_xt pid=80141)[0m 'start_core': True}
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:01: Init Broker server info:
[2m[36m(train_xt pid=80141)[0m {'recv': {'port': 38649,
[2m[36m(train_xt pid=80141)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=80141)[0m 'send': [{'port': 36789,
[2m[36m(train_xt pid=80141)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:01: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 38649, 36789, '127.0.0.1', 'info')
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:01: launch local broker with lib success
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:02: **********
[2m[36m(train_xt pid=80141)[0m workspace:
[2m[36m(train_xt pid=80141)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945945153782115
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:03: speedup(3): binding env 2 to CPU 3
[2m[36m(train_xt pid=80141)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80141)[0m Instructions for updating:
[2m[36m(train_xt pid=80141)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80232)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80232)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=80232)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80232)[0m   self.run()
[2m[36m(train_xt pid=80232)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80232)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:05: Task: T0         | Train_count:         6 | Steps:      3580 | Elapsed time: 23 seconds
[2m[36m(train_xt pid=80232)[0m mean_env_step_ms:         3.546744	mean_explore_ms:         932.55802	mean_inference_ms:         3.25694	mean_loop_time_ms:      222.549717
[2m[36m(train_xt pid=80232)[0m mean_prepare_data_ms:     1.395294	mean_restore_model_ms:   42.593718	mean_train_time_ms:     315.071174	mean_wait_model_ms:     6767.992973
[2m[36m(train_xt pid=80232)[0m mean_wait_sample_ms:    3065.085377	step_per_second:             150.0	train_loss:               2.113467	train_reward_avg:              0.5
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80079)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80079)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=80079)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80079)[0m   self.run()
[2m[36m(train_xt pid=80079)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80079)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=80232)[0m plasma_store -m 100000000 -s /tmp/plasma3275T0
[2m[36m(train_xt pid=80079)[0m start_core ======================================== True
[2m[36m(train_xt pid=80079)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=80079)[0m plasma_store -m 1000000000 -s /tmp/plasma4193
[2m[36m(train_xt pid=80079)[0m self.time_record_filename ============= /tmp/1694594501146219
== Status ==
Current time: 2023-09-13 16:41:49 (running for 00:01:53.42)
Memory usage on this node: 22.0/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80141)[0m  80893
[2m[36m(train_xt pid=80141)[0m    534
[2m[36m(train_xt pid=80079)[0m plasma_store -m 100000000 -s /tmp/plasma4553T0
== Status ==
Current time: 2023-09-13 16:41:54 (running for 00:01:58.42)
Memory usage on this node: 20.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80141)[0m good
[2m[36m(train_xt pid=80141)[0m log filename ================== /tmp/16945944179731953
[2m[36m(train_xt pid=80141)[0m step_per_second ============ 447.0
[2m[36m(train_xt pid=80141)[0m tune_cost =================== True
[2m[36m(train_xt pid=80141)[0m    542
[2m[36m(train_xt pid=80141)[0m =======================env_pool_size======================5
[2m[36m(train_xt pid=80141)[0m =======================env_pool_wait_nums======================5
[2m[36m(train_xt pid=80141)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=80141)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945945153782115.yaml
[2m[36m(train_xt pid=80141)[0m run_log ======================== /tmp/test_opt_bys16945945153782115.log
== Status ==
Current time: 2023-09-13 16:41:59 (running for 00:02:03.43)
Memory usage on this node: 21.1/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80141)[0m start_core ======================================== True
[2m[36m(train_xt pid=80141)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=80141)[0m plasma_store -m 1000000000 -s /tmp/plasma5967
[2m[36m(train_xt pid=80141)[0m self.time_record_filename ============= /tmp/16945945153782115
== Status ==
Current time: 2023-09-13 16:42:04 (running for 00:02:08.44)
Memory usage on this node: 23.4/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80141)[0m plasma_store -m 100000000 -s /tmp/plasma7078T0
== Status ==
Current time: 2023-09-13 16:42:09 (running for 00:02:13.44)
Memory usage on this node: 24.5/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:42:14 (running for 00:02:18.45)
Memory usage on this node: 24.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:07: Task: T0         | Train_count:         4 | Steps:      1280 | Elapsed time: 16 seconds
[2m[36m(train_xt pid=80079)[0m mean_env_step_ms:         2.258286	mean_explore_ms:        636.175811	mean_inference_ms:        2.454178	mean_loop_time_ms:      224.666119
[2m[36m(train_xt pid=80079)[0m mean_prepare_data_ms:     0.976229	mean_restore_model_ms:   37.353992	mean_train_time_ms:     403.357315	mean_wait_model_ms:     3923.358142
[2m[36m(train_xt pid=80079)[0m mean_wait_sample_ms:    2923.818827	step_per_second:              76.0	train_loss:              13.920285	train_reward_avg:              0.5
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80141)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:08: set verbosity in broker: info
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:08: init broker with id-0
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:08: share buf: plasma_store -m 400000000 -s /tmp/plasma_share7078
[2m[36m(train_xt pid=80141)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80141)[0m   self.run()
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:08: init explorer with id: 0, buf_path: /tmp/plasma_share7078
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:08: init agent group for: explore
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:10: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:11: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:11: Task: T0         | Train_count:        28 | Steps:     14696 | Elapsed time: 29 seconds
[2m[36m(train_xt pid=80232)[0m mean_env_step_ms:         3.540066	mean_explore_ms:         934.51187	mean_inference_ms:        3.349851	mean_loop_time_ms:      271.432614
[2m[36m(train_xt pid=80232)[0m mean_prepare_data_ms:     1.525438	mean_restore_model_ms:    33.17681	mean_train_time_ms:      31.474543	mean_wait_model_ms:     5195.420951
[2m[36m(train_xt pid=80232)[0m mean_wait_sample_ms:     230.05569	step_per_second:             501.0	train_loss:              -5.944345	train_reward_avg:              1.1
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:11: init explorer with id: 1, buf_path: /tmp/plasma_share7078
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:13: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:14: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:16: Task: T0         | Train_count:        48 | Steps:     25063 | Elapsed time: 34 seconds
[2m[36m(train_xt pid=80232)[0m mean_env_step_ms:         3.368473	mean_explore_ms:        911.447187	mean_inference_ms:        3.406348	mean_loop_time_ms:      274.862838
[2m[36m(train_xt pid=80232)[0m mean_prepare_data_ms:     1.444817	mean_restore_model_ms:   23.843924	mean_train_time_ms:      31.867445	mean_wait_model_ms:     3596.50286
[2m[36m(train_xt pid=80232)[0m mean_wait_sample_ms:    233.291209	step_per_second:             719.0	train_loss:              -3.123787	train_reward_avg:         1.842857
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:18: Task: T0         | Train_count:        44 | Steps:     11418 | Elapsed time: 28 seconds
[2m[36m(train_xt pid=80079)[0m mean_env_step_ms:         2.331009	mean_explore_ms:        629.056825	mean_inference_ms:         2.40134	mean_loop_time_ms:      271.221781
[2m[36m(train_xt pid=80079)[0m mean_prepare_data_ms:     0.804591	mean_restore_model_ms:   19.655863	mean_train_time_ms:      17.505383	mean_wait_model_ms:     1859.294362
[2m[36m(train_xt pid=80079)[0m mean_wait_sample_ms:    246.441972	step_per_second:             407.0	train_loss:             -24.329149	train_reward_avg:         1.305556
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80141)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80141)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=80141)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80141)[0m   self.run()
[2m[36m(train_xt pid=80141)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80141)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:18: Task: T0         | Train_count:         0 | Steps:       509 | Elapsed time: 14 seconds
[2m[36m(train_xt pid=80141)[0m mean_env_step_ms:         5.261266	mean_explore_ms:        1358.214974	mean_inference_ms:         4.53248	mean_loop_time_ms:             nan
[2m[36m(train_xt pid=80141)[0m mean_prepare_data_ms:     1.765728	mean_restore_model_ms:   77.539444	mean_train_time_ms:            nan	mean_wait_model_ms:     2821.903706
[2m[36m(train_xt pid=80141)[0m mean_wait_sample_ms:    11789.641142	step_per_second:              35.0	train_loss:              72.249535	train_reward_avg:              0.0
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:22: Task: T0         | Train_count:        68 | Steps:     35325 | Elapsed time: 40 seconds
[2m[36m(train_xt pid=80232)[0m mean_env_step_ms:         3.377292	mean_explore_ms:        921.665351	mean_inference_ms:        3.489532	mean_loop_time_ms:      270.339262
[2m[36m(train_xt pid=80232)[0m mean_prepare_data_ms:     1.504469	mean_restore_model_ms:   20.555258	mean_train_time_ms:      28.869998	mean_wait_model_ms:     2953.963614
[2m[36m(train_xt pid=80232)[0m mean_wait_sample_ms:    231.030941	step_per_second:             878.0	train_loss:               6.602333	train_reward_avg:             1.95
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80232)[0m /tmp/plasma3093:    
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:26: broker status timeout!
[2m[36m(train_xt pid=80232)[0m /tmp/plasma_share3275:
[2m[36m(train_xt pid=80232)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80232)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:28: Finished train job normally.
[2m[36m(train_xt pid=80232)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80232)[0m [I 2023-09-13 16:42:28,964] Trial 3 finished with value: 455.58086560364467 and parameters: {'env_pool_size': 5, 'env_pool_wait_nums': 4, 'infer_size': 5}. Best is trial 1 with value: 357.94183445190157.
[2m[36m(train_xt pid=80232)[0m /tmp/plasma3275T0:  
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:30: Task: T0         | Train_count:        16 | Steps:     10822 | Elapsed time: 26 seconds
[2m[36m(train_xt pid=80141)[0m mean_env_step_ms:         4.650805	mean_explore_ms:        1157.830298	mean_inference_ms:        3.893844	mean_loop_time_ms:      756.685972
[2m[36m(train_xt pid=80141)[0m mean_prepare_data_ms:     1.771941	mean_restore_model_ms:   41.368425	mean_train_time_ms:     172.136994	mean_wait_model_ms:     1627.76953
[2m[36m(train_xt pid=80141)[0m mean_wait_sample_ms:    1355.137418	step_per_second:             412.0	train_loss:              44.689034	train_reward_avg:             0.45
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:31: Task: T0         | Train_count:        84 | Steps:     21754 | Elapsed time: 40 seconds
[2m[36m(train_xt pid=80079)[0m mean_env_step_ms:         2.493751	mean_explore_ms:        658.174531	mean_inference_ms:        2.482648	mean_loop_time_ms:      290.676916
[2m[36m(train_xt pid=80079)[0m mean_prepare_data_ms:     0.842452	mean_restore_model_ms:   13.779338	mean_train_time_ms:      17.397511	mean_wait_model_ms:     1198.854097
[2m[36m(train_xt pid=80079)[0m mean_wait_sample_ms:    265.203214	step_per_second:             537.0	train_loss:             -55.825848	train_reward_avg:         1.069444
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80232)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80232)[0m Instructions for updating:
[2m[36m(train_xt pid=80232)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80232)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:36: 
[2m[36m(train_xt pid=80232)[0m **************************************************
[2m[36m(train_xt pid=80232)[0m  XT start work...
[2m[36m(train_xt pid=80232)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945945499982073.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=80232)[0m **************************************************
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:36: init learner with:
[2m[36m(train_xt pid=80232)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=80232)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=80232)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=80232)[0m               'agent_num': 1},
[2m[36m(train_xt pid=80232)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=80232)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=80232)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=80232)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=80232)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=80232)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=80232)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=80232)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=80232)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=80232)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=80232)[0m                           'instance_num': 5,
[2m[36m(train_xt pid=80232)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=80232)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=80232)[0m                           'save_model': True,
[2m[36m(train_xt pid=80232)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=80232)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=80232)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80232)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=80232)[0m                                    'model_config': {'LR': 0.002724888,
[2m[36m(train_xt pid=80232)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=80232)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=80232)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=80232)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=80232)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80232)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=80232)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=80232)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=80232)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=80232)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=80232)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80232)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=80232)[0m                                                 84,
[2m[36m(train_xt pid=80232)[0m                                                 4],
[2m[36m(train_xt pid=80232)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=80232)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=80232)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=80232)[0m              'id': 'ImpalaCnnOpt_now_time_16945945499982073',
[2m[36m(train_xt pid=80232)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=80232)[0m 'env_num': 5,
[2m[36m(train_xt pid=80232)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=80232)[0m                         'size': 5,
[2m[36m(train_xt pid=80232)[0m                         'vector_env_size': 5,
[2m[36m(train_xt pid=80232)[0m                         'vision': False,
[2m[36m(train_xt pid=80232)[0m                         'wait_num': 3},
[2m[36m(train_xt pid=80232)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=80232)[0m             'now_time': '16945945499982073'},
[2m[36m(train_xt pid=80232)[0m 'gpu': -1,
[2m[36m(train_xt pid=80232)[0m 'group_num': 1,
[2m[36m(train_xt pid=80232)[0m 'lock': 1,
[2m[36m(train_xt pid=80232)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80232)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=80232)[0m                        'model_config': {'LR': 0.002724888,
[2m[36m(train_xt pid=80232)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=80232)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=80232)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=80232)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=80232)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80232)[0m                                        'n_actions': 7,
== Status ==
Current time: 2023-09-13 16:42:19 (running for 00:02:23.45)
Memory usage on this node: 25.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:42:24 (running for 00:02:28.46)
Memory usage on this node: 25.9/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80232)[0m   3286
[2m[36m(train_xt pid=80232)[0m   4239
[2m[36m(train_xt pid=80232)[0m good
[2m[36m(train_xt pid=80232)[0m log filename ================== /tmp/16945944924701924
[2m[36m(train_xt pid=80232)[0m step_per_second ============ 878.0
[2m[36m(train_xt pid=80232)[0m tune_cost =================== True
[2m[36m(train_xt pid=80232)[0m   4248
== Status ==
Current time: 2023-09-13 16:42:29 (running for 00:02:33.46)
Memory usage on this node: 23.4/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80232)[0m =======================env_pool_size======================5
[2m[36m(train_xt pid=80232)[0m =======================env_pool_wait_nums======================3
[2m[36m(train_xt pid=80232)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=80232)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945945499982073.yaml
[2m[36m(train_xt pid=80232)[0m run_log ======================== /tmp/test_opt_bys16945945499982073.log
== Status ==
Current time: 2023-09-13 16:42:34 (running for 00:02:38.47)
Memory usage on this node: 23.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80232)[0m start_core ======================================== True
[2m[36m(train_xt pid=80232)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=80232)[0m plasma_store -m 1000000000 -s /tmp/plasma8351
[2m[36m(train_xt pid=80232)[0m self.time_record_filename ============= /tmp/16945945499982073
== Status ==
Current time: 2023-09-13 16:42:39 (running for 00:02:43.47)
Memory usage on this node: 24.5/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80232)[0m plasma_store -m 100000000 -s /tmp/plasma8405T0
== Status ==
Current time: 2023-09-13 16:42:44 (running for 00:02:48.48)
Memory usage on this node: 24.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:42:49 (running for 00:02:53.49)
Memory usage on this node: 24.9/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80232)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=80232)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=80232)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=80232)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=80232)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80232)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=80232)[0m                                     84,
[2m[36m(train_xt pid=80232)[0m                                     4],
[2m[36m(train_xt pid=80232)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=80232)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=80232)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=80232)[0m                'dummy_user',
[2m[36m(train_xt pid=80232)[0m                'dummy_password')],
[2m[36m(train_xt pid=80232)[0m 'speedup': 3,
[2m[36m(train_xt pid=80232)[0m 'start_core': True}
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:36: Init Broker server info:
[2m[36m(train_xt pid=80232)[0m {'recv': {'port': 36966,
[2m[36m(train_xt pid=80232)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=80232)[0m 'send': [{'port': 21080,
[2m[36m(train_xt pid=80232)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:36: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 36966, 21080, '127.0.0.1', 'info')
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:36: launch local broker with lib success
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:37: **********
[2m[36m(train_xt pid=80232)[0m workspace:
[2m[36m(train_xt pid=80232)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945945499982073
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80232)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80232)[0m Instructions for updating:
[2m[36m(train_xt pid=80232)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:41: Task: T0         | Train_count:       124 | Steps:     31957 | Elapsed time: 51 seconds
[2m[36m(train_xt pid=80079)[0m mean_env_step_ms:         2.479731	mean_explore_ms:        649.546683	mean_inference_ms:        2.437565	mean_loop_time_ms:       261.14825
[2m[36m(train_xt pid=80079)[0m mean_prepare_data_ms:     0.826025	mean_restore_model_ms:   11.319983	mean_train_time_ms:      18.563247	mean_wait_model_ms:     948.557973
[2m[36m(train_xt pid=80079)[0m mean_wait_sample_ms:    235.589731	step_per_second:             622.0	train_loss:              39.003139	train_reward_avg:         1.068627
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:42: Task: T0         | Train_count:        32 | Steps:     20972 | Elapsed time: 37 seconds
[2m[36m(train_xt pid=80141)[0m mean_env_step_ms:         4.374062	mean_explore_ms:        1088.284373	mean_inference_ms:        3.707071	mean_loop_time_ms:      703.646195
[2m[36m(train_xt pid=80141)[0m mean_prepare_data_ms:     1.762605	mean_restore_model_ms:    29.67906	mean_train_time_ms:      41.784096	mean_wait_model_ms:     1233.454506
[2m[36m(train_xt pid=80141)[0m mean_wait_sample_ms:    652.826905	step_per_second:             560.0	train_loss:             -26.515989	train_reward_avg:              0.7
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80232)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:42: set verbosity in broker: info
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:42: init broker with id-0
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:42: share buf: plasma_store -m 400000000 -s /tmp/plasma_share8405
[2m[36m(train_xt pid=80232)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80232)[0m   self.run()
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:43: init explorer with id: 0, buf_path: /tmp/plasma_share8405
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:43: init agent group for: explore
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:45: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:46: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:46: init explorer with id: 1, buf_path: /tmp/plasma_share8405
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:48: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:49: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:49: init explorer with id: 2, buf_path: /tmp/plasma_share8405
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:51: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=80079)[0m /tmp/plasma4193:    
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:52: broker status timeout!
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:52: Task: T0         | Train_count:        48 | Steps:     31302 | Elapsed time: 48 seconds
[2m[36m(train_xt pid=80141)[0m mean_env_step_ms:         4.198697	mean_explore_ms:        1044.725746	mean_inference_ms:        3.603013	mean_loop_time_ms:      678.542328
[2m[36m(train_xt pid=80141)[0m mean_prepare_data_ms:     1.722288	mean_restore_model_ms:   24.363369	mean_train_time_ms:      43.016732	mean_wait_model_ms:     1045.980006
[2m[36m(train_xt pid=80141)[0m mean_wait_sample_ms:    625.787449	step_per_second:             649.0	train_loss:              24.861242	train_reward_avg:            0.975
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:52: speedup(3): binding env 2 to CPU 3
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:52: init explorer with id: 3, buf_path: /tmp/plasma_share8405
[2m[36m(train_xt pid=80079)[0m /tmp/plasma_share4553:
[2m[36m(train_xt pid=80079)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80079)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:54: Finished train job normally.
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:54: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=80079)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80079)[0m [I 2023-09-13 16:42:54,798] Trial 4 finished with value: 385.85209003215436 and parameters: {'env_pool_size': 3, 'env_pool_wait_nums': 2, 'infer_size': 3}. Best is trial 1 with value: 357.94183445190157.
[2m[36m(train_xt pid=80079)[0m /tmp/plasma4553T0:  
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:55: speedup(3): binding env 3 to CPU 4
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:55: init explorer with id: 4, buf_path: /tmp/plasma_share8405
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:57: explorer-4 start with sync interval-1
[2m[36m(train_xt pid=80079)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80079)[0m Instructions for updating:
[2m[36m(train_xt pid=80079)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:42:58: speedup(3): binding env 4 to CPU 5
[2m[36m(train_xt pid=80079)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:01: 
[2m[36m(train_xt pid=80079)[0m **************************************************
[2m[36m(train_xt pid=80079)[0m  XT start work...
[2m[36m(train_xt pid=80079)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945945758302133.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=80079)[0m **************************************************
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:02: init learner with:
[2m[36m(train_xt pid=80079)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=80079)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=80079)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=80079)[0m               'agent_num': 1},
[2m[36m(train_xt pid=80079)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=80079)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=80079)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=80079)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=80079)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=80079)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=80079)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=80079)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=80079)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=80079)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=80079)[0m                           'instance_num': 4,
[2m[36m(train_xt pid=80079)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=80079)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=80079)[0m                           'save_model': True,
[2m[36m(train_xt pid=80079)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=80079)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=80079)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80079)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=80079)[0m                                    'model_config': {'LR': 0.003695889,
[2m[36m(train_xt pid=80079)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=80079)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=80079)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=80079)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=80079)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80079)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=80079)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=80079)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=80079)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=80079)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=80079)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80079)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=80079)[0m                                                 84,
[2m[36m(train_xt pid=80079)[0m                                                 4],
[2m[36m(train_xt pid=80079)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=80079)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=80079)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=80079)[0m              'id': 'ImpalaCnnOpt_now_time_16945945758302133',
[2m[36m(train_xt pid=80079)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=80079)[0m 'env_num': 4,
[2m[36m(train_xt pid=80079)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=80079)[0m                         'size': 3,
[2m[36m(train_xt pid=80079)[0m                         'vector_env_size': 3,
[2m[36m(train_xt pid=80079)[0m                         'vision': False,
[2m[36m(train_xt pid=80079)[0m                         'wait_num': 3},
[2m[36m(train_xt pid=80079)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=80079)[0m             'now_time': '16945945758302133'},
[2m[36m(train_xt pid=80079)[0m 'gpu': -1,
[2m[36m(train_xt pid=80079)[0m 'group_num': 1,
[2m[36m(train_xt pid=80079)[0m 'lock': 1,
[2m[36m(train_xt pid=80079)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80079)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=80079)[0m                        'model_config': {'LR': 0.003695889,
[2m[36m(train_xt pid=80079)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=80079)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=80079)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=80079)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=80079)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80079)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=80079)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=80079)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=80079)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=80079)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=80079)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80079)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=80079)[0m                                     84,
[2m[36m(train_xt pid=80079)[0m                                     4],
[2m[36m(train_xt pid=80079)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=80079)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=80079)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=80079)[0m                'dummy_user',
[2m[36m(train_xt pid=80079)[0m                'dummy_password')],
[2m[36m(train_xt pid=80079)[0m 'speedup': 3,
[2m[36m(train_xt pid=80079)[0m 'start_core': True}
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:02: Init Broker server info:
[2m[36m(train_xt pid=80079)[0m {'recv': {'port': 37506,
[2m[36m(train_xt pid=80079)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=80079)[0m 'send': [{'port': 35657,
[2m[36m(train_xt pid=80079)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:02: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 37506, 35657, '127.0.0.1', 'info')
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:02: launch local broker with lib success
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:02: **********
[2m[36m(train_xt pid=80079)[0m workspace:
[2m[36m(train_xt pid=80079)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945945758302133
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80232)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80232)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=80232)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80232)[0m   self.run()
[2m[36m(train_xt pid=80232)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80232)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:03: Task: T0         | Train_count:         6 | Steps:      2665 | Elapsed time: 23 seconds
[2m[36m(train_xt pid=80232)[0m mean_env_step_ms:         2.971627	mean_explore_ms:        841.023803	mean_inference_ms:        3.158329	mean_loop_time_ms:      184.546431
[2m[36m(train_xt pid=80232)[0m mean_prepare_data_ms:     1.131603	mean_restore_model_ms:   45.291901	mean_train_time_ms:     309.042454	mean_wait_model_ms:     6747.520606
[2m[36m(train_xt pid=80232)[0m mean_wait_sample_ms:    3059.243917	step_per_second:             112.0	train_loss:              27.611691	train_reward_avg:              0.0
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80141)[0m /tmp/plasma5967:    
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:03: broker status timeout!
[2m[36m(train_xt pid=80141)[0m /tmp/plasma_share7078:
[2m[36m(train_xt pid=80079)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80079)[0m Instructions for updating:
[2m[36m(train_xt pid=80079)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80141)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80141)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:05: Finished train job normally.
[2m[36m(train_xt pid=80141)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80141)[0m [I 2023-09-13 16:43:06,041] Trial 5 finished with value: 431.43297380585517 and parameters: {'env_pool_size': 5, 'env_pool_wait_nums': 5, 'infer_size': 2}. Best is trial 1 with value: 357.94183445190157.
[2m[36m(train_xt pid=80141)[0m /tmp/plasma7078T0:  
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:08: Task: T0         | Train_count:        34 | Steps:     13350 | Elapsed time: 28 seconds
[2m[36m(train_xt pid=80232)[0m mean_env_step_ms:         2.672466	mean_explore_ms:        765.220483	mean_inference_ms:        2.959006	mean_loop_time_ms:      189.007854
[2m[36m(train_xt pid=80232)[0m mean_prepare_data_ms:     1.190329	mean_restore_model_ms:   31.557613	mean_train_time_ms:      26.378143	mean_wait_model_ms:     4606.310262
[2m[36m(train_xt pid=80232)[0m mean_wait_sample_ms:    154.126847	step_per_second:             468.0	train_loss:              -9.559021	train_reward_avg:           0.6625
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80079)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:09: set verbosity in broker: info
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:09: init broker with id-0
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:09: share buf: plasma_store -m 400000000 -s /tmp/plasma_share10411
[2m[36m(train_xt pid=80079)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80079)[0m   self.run()
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:09: init explorer with id: 0, buf_path: /tmp/plasma_share10411
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:09: init agent group for: explore
[2m[36m(train_xt pid=80141)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80141)[0m Instructions for updating:
[2m[36m(train_xt pid=80141)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:11: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:12: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:12: init explorer with id: 1, buf_path: /tmp/plasma_share10411
[2m[36m(train_xt pid=80141)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:13: 
[2m[36m(train_xt pid=80141)[0m **************************************************
[2m[36m(train_xt pid=80141)[0m  XT start work...
[2m[36m(train_xt pid=80141)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945945870821695.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=80141)[0m **************************************************
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:13: Task: T0         | Train_count:        60 | Steps:     23424 | Elapsed time: 33 seconds
[2m[36m(train_xt pid=80232)[0m mean_env_step_ms:          2.48137	mean_explore_ms:        719.965861	mean_inference_ms:        2.854161	mean_loop_time_ms:      184.228992
[2m[36m(train_xt pid=80232)[0m mean_prepare_data_ms:     1.200283	mean_restore_model_ms:   23.302518	mean_train_time_ms:      28.900993	mean_wait_model_ms:     3287.314855
[2m[36m(train_xt pid=80232)[0m mean_wait_sample_ms:    146.609104	step_per_second:             689.0	train_loss:             -11.375416	train_reward_avg:          1.03125
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:14: init learner with:
[2m[36m(train_xt pid=80141)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=80141)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=80141)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=80141)[0m               'agent_num': 1},
[2m[36m(train_xt pid=80141)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=80141)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=80141)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=80141)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=80141)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=80141)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=80141)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=80141)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=80141)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=80141)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=80141)[0m                           'instance_num': 2,
[2m[36m(train_xt pid=80141)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=80141)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=80141)[0m                           'save_model': True,
[2m[36m(train_xt pid=80141)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=80141)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=80141)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80141)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=80141)[0m                                    'model_config': {'LR': 0.00386824,
[2m[36m(train_xt pid=80141)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=80141)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=80141)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=80141)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=80141)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80141)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=80141)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=80141)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=80141)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=80141)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=80141)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80141)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=80141)[0m                                                 84,
[2m[36m(train_xt pid=80141)[0m                                                 4],
[2m[36m(train_xt pid=80141)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=80141)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=80141)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=80141)[0m              'id': 'ImpalaCnnOpt_now_time_16945945870821695',
[2m[36m(train_xt pid=80141)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=80141)[0m 'env_num': 2,
[2m[36m(train_xt pid=80141)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=80141)[0m                         'size': 2,
[2m[36m(train_xt pid=80141)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=80141)[0m                         'vision': False,
[2m[36m(train_xt pid=80141)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=80141)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=80141)[0m             'now_time': '16945945870821695'},
[2m[36m(train_xt pid=80141)[0m 'gpu': -1,
[2m[36m(train_xt pid=80141)[0m 'group_num': 1,
[2m[36m(train_xt pid=80141)[0m 'lock': 1,
[2m[36m(train_xt pid=80141)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80141)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=80141)[0m                        'model_config': {'LR': 0.00386824,
[2m[36m(train_xt pid=80141)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=80141)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=80141)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=80141)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=80141)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80141)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=80141)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=80141)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=80141)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=80141)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=80141)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80141)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=80141)[0m                                     84,
[2m[36m(train_xt pid=80141)[0m                                     4],
[2m[36m(train_xt pid=80141)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=80141)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=80141)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=80141)[0m                'dummy_user',
[2m[36m(train_xt pid=80141)[0m                'dummy_password')],
[2m[36m(train_xt pid=80141)[0m 'speedup': 3,
[2m[36m(train_xt pid=80141)[0m 'start_core': True}
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:14: Init Broker server info:
[2m[36m(train_xt pid=80141)[0m {'recv': {'port': 34577,
[2m[36m(train_xt pid=80141)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=80141)[0m 'send': [{'port': 30806,
[2m[36m(train_xt pid=80141)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:14: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:14: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 34577, 30806, '127.0.0.1', 'info')
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:14: launch local broker with lib success
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:14: **********
[2m[36m(train_xt pid=80079)[0m   4555
[2m[36m(train_xt pid=80079)[0m   5661
== Status ==
Current time: 2023-09-13 16:42:54 (running for 00:02:58.49)
Memory usage on this node: 25.0/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80079)[0m good
[2m[36m(train_xt pid=80079)[0m log filename ================== /tmp/1694594501146219
[2m[36m(train_xt pid=80079)[0m step_per_second ============ 622.0
[2m[36m(train_xt pid=80079)[0m tune_cost =================== True
[2m[36m(train_xt pid=80079)[0m   5669
[2m[36m(train_xt pid=80079)[0m =======================env_pool_size======================3
[2m[36m(train_xt pid=80079)[0m =======================env_pool_wait_nums======================3
[2m[36m(train_xt pid=80079)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=80079)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945945758302133.yaml
[2m[36m(train_xt pid=80079)[0m run_log ======================== /tmp/test_opt_bys16945945758302133.log
== Status ==
Current time: 2023-09-13 16:42:59 (running for 00:03:03.50)
Memory usage on this node: 23.5/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80079)[0m start_core ======================================== True
[2m[36m(train_xt pid=80079)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=80079)[0m plasma_store -m 1000000000 -s /tmp/plasma10080
[2m[36m(train_xt pid=80079)[0m self.time_record_filename ============= /tmp/16945945758302133
[2m[36m(train_xt pid=80141)[0m   7083
[2m[36m(train_xt pid=80141)[0m   7670
== Status ==
Current time: 2023-09-13 16:43:04 (running for 00:03:08.50)
Memory usage on this node: 25.2/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80141)[0m good
[2m[36m(train_xt pid=80141)[0m log filename ================== /tmp/16945945153782115
[2m[36m(train_xt pid=80141)[0m step_per_second ============ 649.0
[2m[36m(train_xt pid=80141)[0m tune_cost =================== True
[2m[36m(train_xt pid=80141)[0m   7678
[2m[36m(train_xt pid=80141)[0m =======================env_pool_size======================2
[2m[36m(train_xt pid=80141)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=80141)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=80141)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945945870821695.yaml
[2m[36m(train_xt pid=80141)[0m run_log ======================== /tmp/test_opt_bys16945945870821695.log
== Status ==
Current time: 2023-09-13 16:43:09 (running for 00:03:13.51)
Memory usage on this node: 23.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80079)[0m plasma_store -m 100000000 -s /tmp/plasma10411T0
[2m[36m(train_xt pid=80141)[0m start_core ======================================== True
[2m[36m(train_xt pid=80141)[0m 	[WARN] start_core % 10 == 0 recommended.
== Status ==
Current time: 2023-09-13 16:43:14 (running for 00:03:18.52)
Memory usage on this node: 24.2/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80141)[0m plasma_store -m 1000000000 -s /tmp/plasma10972
[2m[36m(train_xt pid=80141)[0m self.time_record_filename ============= /tmp/16945945870821695
== Status ==
Current time: 2023-09-13 16:43:19 (running for 00:03:23.52)
Memory usage on this node: 25.1/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80141)[0m workspace:
[2m[36m(train_xt pid=80141)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945945870821695
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:15: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:15: init explorer with id: 2, buf_path: /tmp/plasma_share10411
[2m[36m(train_xt pid=80141)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80141)[0m Instructions for updating:
[2m[36m(train_xt pid=80141)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:17: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:18: Task: T0         | Train_count:        87 | Steps:     33766 | Elapsed time: 38 seconds
[2m[36m(train_xt pid=80232)[0m mean_env_step_ms:         2.365635	mean_explore_ms:        691.556454	mean_inference_ms:        2.775499	mean_loop_time_ms:      185.840344
[2m[36m(train_xt pid=80232)[0m mean_prepare_data_ms:     1.174998	mean_restore_model_ms:   18.494487	mean_train_time_ms:      26.039302	mean_wait_model_ms:     2460.890624
[2m[36m(train_xt pid=80232)[0m mean_wait_sample_ms:    150.756741	step_per_second:             872.0	train_loss:             148.197952	train_reward_avg:             1.05
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:18: speedup(3): binding env 2 to CPU 3
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:18: init explorer with id: 3, buf_path: /tmp/plasma_share10411
[2m[36m(train_xt pid=80141)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:20: set verbosity in broker: info
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:20: init broker with id-0
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:20: share buf: plasma_store -m 400000000 -s /tmp/plasma_share11559
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:20: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=80141)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80141)[0m   self.run()
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:20: init explorer with id: 0, buf_path: /tmp/plasma_share11559
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:20: init agent group for: explore
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:21: speedup(3): binding env 3 to CPU 4
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:22: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=80232)[0m /tmp/plasma8351:    
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:22: broker status timeout!
[2m[36m(train_xt pid=80232)[0m /tmp/plasma_share8405:
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:23: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:24: init explorer with id: 1, buf_path: /tmp/plasma_share11559
[2m[36m(train_xt pid=80232)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80232)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:24: Finished train job normally.
[2m[36m(train_xt pid=80079)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80079)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=80079)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80079)[0m   self.run()
[2m[36m(train_xt pid=80079)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80079)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:25: Task: T0         | Train_count:         1 | Steps:       637 | Elapsed time: 19 seconds
[2m[36m(train_xt pid=80079)[0m mean_env_step_ms:         3.920412	mean_explore_ms:        916.480601	mean_inference_ms:        2.860101	mean_loop_time_ms:       59.297681
[2m[36m(train_xt pid=80079)[0m mean_prepare_data_ms:      1.15029	mean_restore_model_ms:   49.425662	mean_train_time_ms:     667.494377	mean_wait_model_ms:     6013.056993
[2m[36m(train_xt pid=80079)[0m mean_wait_sample_ms:    5890.270789	step_per_second:              32.0	train_loss:               1.522702	train_reward_avg:              0.0
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80232)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80232)[0m [I 2023-09-13 16:43:25,225] Trial 6 finished with value: 458.7155963302752 and parameters: {'env_pool_size': 5, 'env_pool_wait_nums': 3, 'infer_size': 5}. Best is trial 1 with value: 357.94183445190157.
[2m[36m(train_xt pid=80232)[0m /tmp/plasma8405T0:  
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:25: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:27: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=80232)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80232)[0m Instructions for updating:
[2m[36m(train_xt pid=80232)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80141)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80141)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=80141)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80141)[0m   self.run()
[2m[36m(train_xt pid=80141)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80141)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:31: Task: T0         | Train_count:         2 | Steps:       684 | Elapsed time: 14 seconds
[2m[36m(train_xt pid=80141)[0m mean_env_step_ms:         3.302327	mean_explore_ms:         801.34511	mean_inference_ms:        2.659963	mean_loop_time_ms:      459.379315
[2m[36m(train_xt pid=80141)[0m mean_prepare_data_ms:     0.652711	mean_restore_model_ms:   49.108863	mean_train_time_ms:     680.157264	mean_wait_model_ms:     2965.389371
[2m[36m(train_xt pid=80141)[0m mean_wait_sample_ms:    4015.182336	step_per_second:              48.0	train_loss:              -2.597051	train_reward_avg:              2.0
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:32: Task: T0         | Train_count:        28 | Steps:     11115 | Elapsed time: 26 seconds
[2m[36m(train_xt pid=80079)[0m mean_env_step_ms:         3.543942	mean_explore_ms:         829.52565	mean_inference_ms:        2.681868	mean_loop_time_ms:      249.673188
[2m[36m(train_xt pid=80079)[0m mean_prepare_data_ms:     1.152062	mean_restore_model_ms:   27.325183	mean_train_time_ms:      24.955571	mean_wait_model_ms:     3376.012206
[2m[36m(train_xt pid=80079)[0m mean_wait_sample_ms:    216.768873	step_per_second:             414.0	train_loss:             -37.968918	train_reward_avg:         0.666667
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80232)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:32: 
[2m[36m(train_xt pid=80232)[0m **************************************************
[2m[36m(train_xt pid=80232)[0m  XT start work...
[2m[36m(train_xt pid=80232)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945946062622192.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=80232)[0m **************************************************
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:33: init learner with:
[2m[36m(train_xt pid=80232)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=80232)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=80232)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=80232)[0m               'agent_num': 1},
[2m[36m(train_xt pid=80232)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=80232)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=80232)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=80232)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=80232)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=80232)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=80232)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=80232)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=80232)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=80232)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=80232)[0m                           'instance_num': 2,
[2m[36m(train_xt pid=80232)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=80232)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=80232)[0m                           'save_model': True,
[2m[36m(train_xt pid=80232)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=80232)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=80232)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80232)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=80232)[0m                                    'model_config': {'LR': 0.002724888,
[2m[36m(train_xt pid=80232)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=80232)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=80232)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=80232)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=80232)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80232)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=80232)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=80232)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=80232)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=80232)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=80232)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80232)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=80232)[0m                                                 84,
[2m[36m(train_xt pid=80232)[0m                                                 4],
[2m[36m(train_xt pid=80232)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=80232)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=80232)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=80232)[0m              'id': 'ImpalaCnnOpt_now_time_16945946062622192',
[2m[36m(train_xt pid=80232)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=80232)[0m 'env_num': 2,
[2m[36m(train_xt pid=80232)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=80232)[0m                         'size': 5,
[2m[36m(train_xt pid=80232)[0m                         'vector_env_size': 5,
[2m[36m(train_xt pid=80232)[0m                         'vision': False,
[2m[36m(train_xt pid=80232)[0m                         'wait_num': 5},
[2m[36m(train_xt pid=80232)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=80232)[0m             'now_time': '16945946062622192'},
[2m[36m(train_xt pid=80232)[0m 'gpu': -1,
[2m[36m(train_xt pid=80232)[0m 'group_num': 1,
[2m[36m(train_xt pid=80232)[0m 'lock': 1,
[2m[36m(train_xt pid=80232)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80232)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=80232)[0m                        'model_config': {'LR': 0.002724888,
[2m[36m(train_xt pid=80232)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=80232)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=80232)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=80232)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=80232)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80232)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=80232)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=80232)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=80232)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=80232)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=80141)[0m plasma_store -m 100000000 -s /tmp/plasma11559T0
[2m[36m(train_xt pid=80232)[0m   8407
[2m[36m(train_xt pid=80232)[0m   8955
== Status ==
Current time: 2023-09-13 16:43:24 (running for 00:03:28.53)
Memory usage on this node: 26.1/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80232)[0m good
[2m[36m(train_xt pid=80232)[0m log filename ================== /tmp/16945945499982073
[2m[36m(train_xt pid=80232)[0m step_per_second ============ 872.0
[2m[36m(train_xt pid=80232)[0m tune_cost =================== True
[2m[36m(train_xt pid=80232)[0m   8963
[2m[36m(train_xt pid=80232)[0m =======================env_pool_size======================5
[2m[36m(train_xt pid=80232)[0m =======================env_pool_wait_nums======================5
[2m[36m(train_xt pid=80232)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=80232)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945946062622192.yaml
[2m[36m(train_xt pid=80232)[0m run_log ======================== /tmp/test_opt_bys16945946062622192.log
== Status ==
Current time: 2023-09-13 16:43:29 (running for 00:03:33.53)
Memory usage on this node: 24.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80232)[0m start_core ======================================== True
[2m[36m(train_xt pid=80232)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=80232)[0m plasma_store -m 1000000000 -s /tmp/plasma13221
[2m[36m(train_xt pid=80232)[0m self.time_record_filename ============= /tmp/16945946062622192
== Status ==
Current time: 2023-09-13 16:43:34 (running for 00:03:38.54)
Memory usage on this node: 25.6/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:43:39 (running for 00:03:43.54)
Memory usage on this node: 26.1/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80232)[0m plasma_store -m 100000000 -s /tmp/plasma13284T0
== Status ==
Current time: 2023-09-13 16:43:44 (running for 00:03:48.55)
Memory usage on this node: 26.3/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:43:49 (running for 00:03:53.55)
Memory usage on this node: 27.3/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:43:54 (running for 00:03:58.56)
Memory usage on this node: 27.5/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80232)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80232)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=80232)[0m                                     84,
[2m[36m(train_xt pid=80232)[0m                                     4],
[2m[36m(train_xt pid=80232)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=80232)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=80232)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=80232)[0m                'dummy_user',
[2m[36m(train_xt pid=80232)[0m                'dummy_password')],
[2m[36m(train_xt pid=80232)[0m 'speedup': 3,
[2m[36m(train_xt pid=80232)[0m 'start_core': True}
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:33: Init Broker server info:
[2m[36m(train_xt pid=80232)[0m {'recv': {'port': 35483,
[2m[36m(train_xt pid=80232)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=80232)[0m 'send': [{'port': 22451,
[2m[36m(train_xt pid=80232)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:33: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 35483, 22451, '127.0.0.1', 'info')
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:33: launch local broker with lib success
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:33: **********
[2m[36m(train_xt pid=80232)[0m workspace:
[2m[36m(train_xt pid=80232)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945946062622192
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80232)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80232)[0m Instructions for updating:
[2m[36m(train_xt pid=80232)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:39: Task: T0         | Train_count:        55 | Steps:     21486 | Elapsed time: 33 seconds
[2m[36m(train_xt pid=80079)[0m mean_env_step_ms:         3.429442	mean_explore_ms:        809.444865	mean_inference_ms:        2.678869	mean_loop_time_ms:      252.550554
[2m[36m(train_xt pid=80079)[0m mean_prepare_data_ms:     1.178288	mean_restore_model_ms:   20.173828	mean_train_time_ms:      26.702857	mean_wait_model_ms:     2342.222015
[2m[36m(train_xt pid=80079)[0m mean_wait_sample_ms:    217.563903	step_per_second:             633.0	train_loss:              28.705751	train_reward_avg:              1.2
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80232)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:39: set verbosity in broker: info
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:39: init broker with id-0
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:39: share buf: plasma_store -m 400000000 -s /tmp/plasma_share13284
[2m[36m(train_xt pid=80232)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80232)[0m   self.run()
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:39: init explorer with id: 0, buf_path: /tmp/plasma_share13284
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:39: init agent group for: explore
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:41: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:42: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:43: init explorer with id: 1, buf_path: /tmp/plasma_share13284
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:44: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:46: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:46: Task: T0         | Train_count:        82 | Steps:     31857 | Elapsed time: 41 seconds
[2m[36m(train_xt pid=80079)[0m mean_env_step_ms:         3.362602	mean_explore_ms:        800.917149	mean_inference_ms:        2.695662	mean_loop_time_ms:      260.157251
[2m[36m(train_xt pid=80079)[0m mean_prepare_data_ms:     1.139367	mean_restore_model_ms:   16.495883	mean_train_time_ms:      25.966215	mean_wait_model_ms:     1830.227107
[2m[36m(train_xt pid=80079)[0m mean_wait_sample_ms:    226.359928	step_per_second:             773.0	train_loss:             -46.885872	train_reward_avg:         1.428571
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:48: Task: T0         | Train_count:        42 | Steps:     10902 | Elapsed time: 31 seconds
[2m[36m(train_xt pid=80141)[0m mean_env_step_ms:         2.984073	mean_explore_ms:        712.331861	mean_inference_ms:        2.426188	mean_loop_time_ms:      448.576367
[2m[36m(train_xt pid=80141)[0m mean_prepare_data_ms:     0.823772	mean_restore_model_ms:    17.77631	mean_train_time_ms:      19.475698	mean_wait_model_ms:     897.056073
[2m[36m(train_xt pid=80141)[0m mean_wait_sample_ms:    420.733845	step_per_second:             345.0	train_loss:              53.660507	train_reward_avg:              1.0
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80232)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80232)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=80232)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80232)[0m   self.run()
[2m[36m(train_xt pid=80232)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80232)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:50: Task: T0         | Train_count:         0 | Steps:       509 | Elapsed time: 13 seconds
[2m[36m(train_xt pid=80232)[0m mean_env_step_ms:         4.526468	mean_explore_ms:        1181.371689	mean_inference_ms:        4.003271	mean_loop_time_ms:             nan
[2m[36m(train_xt pid=80232)[0m mean_prepare_data_ms:     1.669884	mean_restore_model_ms:   59.080601	mean_train_time_ms:            nan	mean_wait_model_ms:     2880.338669
[2m[36m(train_xt pid=80232)[0m mean_wait_sample_ms:    11632.591248	step_per_second:              36.0	train_loss:              45.664932	train_reward_avg:              0.0
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80079)[0m /tmp/plasma10080:   
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:55: broker status timeout!
[2m[36m(train_xt pid=80079)[0m /tmp/plasma_share10411:
[2m[36m(train_xt pid=80079)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80079)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:43:57: Finished train job normally.
[2m[36m(train_xt pid=80079)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80079)[0m [I 2023-09-13 16:43:57,849] Trial 7 finished with value: 362.22509702457955 and parameters: {'env_pool_size': 3, 'env_pool_wait_nums': 3, 'infer_size': 4}. Best is trial 1 with value: 357.94183445190157.
[2m[36m(train_xt pid=80079)[0m /tmp/plasma10411T0: 
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:01: Task: T0         | Train_count:        16 | Steps:     10784 | Elapsed time: 25 seconds
[2m[36m(train_xt pid=80232)[0m mean_env_step_ms:         3.860824	mean_explore_ms:        1006.972969	mean_inference_ms:         3.55634	mean_loop_time_ms:      695.807353
[2m[36m(train_xt pid=80232)[0m mean_prepare_data_ms:     1.659407	mean_restore_model_ms:   32.299936	mean_train_time_ms:     167.573578	mean_wait_model_ms:     1657.330871
[2m[36m(train_xt pid=80232)[0m mean_wait_sample_ms:    1288.130045	step_per_second:             431.0	train_loss:               7.929952	train_reward_avg:              0.4
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80079)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80079)[0m Instructions for updating:
[2m[36m(train_xt pid=80079)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80079)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:05: 
[2m[36m(train_xt pid=80079)[0m **************************************************
[2m[36m(train_xt pid=80079)[0m  XT start work...
[2m[36m(train_xt pid=80079)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945946388902004.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=80079)[0m **************************************************
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:05: init learner with:
[2m[36m(train_xt pid=80079)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=80079)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=80079)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=80079)[0m               'agent_num': 1},
[2m[36m(train_xt pid=80079)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=80079)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=80079)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=80079)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=80079)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=80079)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=80079)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=80079)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=80079)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=80079)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=80079)[0m                           'instance_num': 3,
[2m[36m(train_xt pid=80079)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=80079)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=80079)[0m                           'save_model': True,
[2m[36m(train_xt pid=80079)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=80079)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=80079)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80079)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=80079)[0m                                    'model_config': {'LR': 0.003695889,
[2m[36m(train_xt pid=80079)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=80079)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=80079)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=80079)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=80079)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80079)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=80079)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=80079)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=80079)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=80079)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=80079)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80079)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=80079)[0m                                                 84,
[2m[36m(train_xt pid=80079)[0m                                                 4],
[2m[36m(train_xt pid=80079)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=80079)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=80079)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=80079)[0m              'id': 'ImpalaCnnOpt_now_time_16945946388902004',
[2m[36m(train_xt pid=80079)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=80079)[0m 'env_num': 3,
[2m[36m(train_xt pid=80079)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=80079)[0m                         'size': 5,
[2m[36m(train_xt pid=80079)[0m                         'vector_env_size': 5,
[2m[36m(train_xt pid=80079)[0m                         'vision': False,
[2m[36m(train_xt pid=80079)[0m                         'wait_num': 4},
[2m[36m(train_xt pid=80079)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=80079)[0m             'now_time': '16945946388902004'},
[2m[36m(train_xt pid=80079)[0m 'gpu': -1,
[2m[36m(train_xt pid=80079)[0m 'group_num': 1,
[2m[36m(train_xt pid=80079)[0m 'lock': 1,
[2m[36m(train_xt pid=80079)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80079)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=80079)[0m                        'model_config': {'LR': 0.003695889,
[2m[36m(train_xt pid=80079)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=80079)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=80079)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=80079)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=80079)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80079)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=80079)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=80079)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=80079)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=80079)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=80079)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80079)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=80079)[0m                                     84,
[2m[36m(train_xt pid=80079)[0m                                     4],
[2m[36m(train_xt pid=80079)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=80079)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=80079)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=80079)[0m                'dummy_user',
[2m[36m(train_xt pid=80079)[0m                'dummy_password')],
[2m[36m(train_xt pid=80079)[0m 'speedup': 3,
[2m[36m(train_xt pid=80079)[0m 'start_core': True}
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:05: Init Broker server info:
[2m[36m(train_xt pid=80079)[0m {'recv': {'port': 31904,
[2m[36m(train_xt pid=80079)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=80079)[0m 'send': [{'port': 27124,
[2m[36m(train_xt pid=80079)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:05: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 31904, 27124, '127.0.0.1', 'info')
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:05: launch local broker with lib success
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:06: **********
[2m[36m(train_xt pid=80079)[0m workspace:
[2m[36m(train_xt pid=80079)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945946388902004
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:06: Task: T0         | Train_count:        82 | Steps:     21145 | Elapsed time: 49 seconds
[2m[36m(train_xt pid=80141)[0m mean_env_step_ms:         2.991857	mean_explore_ms:        701.128391	mean_inference_ms:        2.350611	mean_loop_time_ms:      444.502342
[2m[36m(train_xt pid=80141)[0m mean_prepare_data_ms:     0.794196	mean_restore_model_ms:   12.771423	mean_train_time_ms:       18.80697	mean_wait_model_ms:     633.309915
[2m[36m(train_xt pid=80141)[0m mean_wait_sample_ms:    417.498171	step_per_second:             425.0	train_loss:             -14.529829	train_reward_avg:         1.045455
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80079)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80079)[0m Instructions for updating:
[2m[36m(train_xt pid=80079)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80079)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:12: set verbosity in broker: info
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:12: init broker with id-0
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:12: share buf: plasma_store -m 400000000 -s /tmp/plasma_share14577
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:12: Task: T0         | Train_count:        32 | Steps:     21068 | Elapsed time: 35 seconds
[2m[36m(train_xt pid=80232)[0m mean_env_step_ms:         3.779278	mean_explore_ms:        973.755836	mean_inference_ms:        3.459123	mean_loop_time_ms:      673.502851
[2m[36m(train_xt pid=80232)[0m mean_prepare_data_ms:     2.052116	mean_restore_model_ms:   23.227612	mean_train_time_ms:      41.488695	mean_wait_model_ms:     1251.216769
[2m[36m(train_xt pid=80232)[0m mean_wait_sample_ms:    622.018445	step_per_second:             588.0	train_loss:              -1.711286	train_reward_avg:              0.8
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80079)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=80079)[0m   self.run()
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:12: init explorer with id: 0, buf_path: /tmp/plasma_share14577
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:12: init agent group for: explore
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:14: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:15: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:15: init explorer with id: 1, buf_path: /tmp/plasma_share14577
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:17: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:18: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:18: init explorer with id: 2, buf_path: /tmp/plasma_share14577
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:20: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=80079)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:21: speedup(3): binding env 2 to CPU 3
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:22: Task: T0         | Train_count:        48 | Steps:     31325 | Elapsed time: 46 seconds
[2m[36m(train_xt pid=80232)[0m mean_env_step_ms:         3.713422	mean_explore_ms:        948.469162	mean_inference_ms:        3.372705	mean_loop_time_ms:      678.556895
[2m[36m(train_xt pid=80232)[0m mean_prepare_data_ms:     1.704764	mean_restore_model_ms:   18.536478	mean_train_time_ms:      43.269145	mean_wait_model_ms:     1053.979605
[2m[36m(train_xt pid=80232)[0m mean_wait_sample_ms:    626.338291	step_per_second:             670.0	train_loss:              69.472832	train_reward_avg:            0.975
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80079)[0m Killed
2023-09-13 16:44:23,694	ERROR trial_runner.py:987 -- Trial train_xt_1d8ae_00001: Error processing event.
ray.exceptions.RayTaskError(FileNotFoundError): [36mray::ImplicitFunc.train()[39m (pid=80079, ip=192.168.1.128, repr=train_xt)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/trainable.py", line 349, in train
    result = self.step()
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 417, in step
    self._report_thread_runner_error(block=True)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 589, in _report_thread_runner_error
    raise e
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 289, in run
    self._entrypoint()
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 365, in entrypoint
    self._status_reporter.get_checkpoint(),
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 684, in _trainable_func
    output = fn()
  File "test_xt_with_tune.py", line 149, in train_xt
    print("tune with_samper ===================== {}".format(with_samper))
  File "/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py", line 185, in find_max_th
    study.optimize(lambda trial: fn(trial, start_core, with_samper), n_trials=n_trials)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/study/study.py", line 451, in optimize
    show_progress_bar=show_progress_bar,
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/study/_optimize.py", line 76, in _optimize
    progress_bar=progress_bar,
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/study/_optimize.py", line 163, in _optimize_sequential
    frozen_trial = _run_trial(study, func, catch)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/study/_optimize.py", line 251, in _run_trial
    raise func_err
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/study/_optimize.py", line 200, in _run_trial
    value_or_values = func(trial)
  File "/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py", line 185, in <lambda>
    study.optimize(lambda trial: fn(trial, start_core, with_samper), n_trials=n_trials)
  File "/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py", line 134, in fn
    step_per_second = get_throughput([filename])
  File "/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py", line 40, in get_throughput
    with open(file, "r") as f:
FileNotFoundError: [Errno 2] No such file or directory: '/tmp/16945946388902004'

[2m[36m(train_xt pid=80079)[0m  10413
[2m[36m(train_xt pid=80079)[0m  10985
[2m[36m(train_xt pid=80079)[0m good
[2m[36m(train_xt pid=80079)[0m log filename ================== /tmp/16945945758302133
[2m[36m(train_xt pid=80079)[0m step_per_second ============ 773.0
[2m[36m(train_xt pid=80079)[0m tune_cost =================== True
[2m[36m(train_xt pid=80079)[0m  10993
[2m[36m(train_xt pid=80079)[0m =======================env_pool_size======================5
[2m[36m(train_xt pid=80079)[0m =======================env_pool_wait_nums======================4
[2m[36m(train_xt pid=80079)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=80079)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945946388902004.yaml
[2m[36m(train_xt pid=80079)[0m run_log ======================== /tmp/test_opt_bys16945946388902004.log
== Status ==
Current time: 2023-09-13 16:43:59 (running for 00:04:03.57)
Memory usage on this node: 25.3/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:44:04 (running for 00:04:08.57)
Memory usage on this node: 25.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80079)[0m start_core ======================================== True
[2m[36m(train_xt pid=80079)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=80079)[0m plasma_store -m 1000000000 -s /tmp/plasma14532
[2m[36m(train_xt pid=80079)[0m self.time_record_filename ============= /tmp/16945946388902004
== Status ==
Current time: 2023-09-13 16:44:09 (running for 00:04:13.58)
Memory usage on this node: 26.5/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80079)[0m plasma_store -m 100000000 -s /tmp/plasma14577T0
== Status ==
Current time: 2023-09-13 16:44:14 (running for 00:04:18.58)
Memory usage on this node: 26.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:44:19 (running for 00:04:23.59)
Memory usage on this node: 26.9/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80079)[0m good
[2m[36m(train_xt pid=80079)[0m log filename ================== /tmp/16945946388902004
[2m[36m(train_xt pid=80141)[0m good
[2m[36m(train_xt pid=80141)[0m log filename ================== /tmp/16945945870821695
[2m[36m(train_xt pid=80141)[0m step_per_second ============ 425.0
[2m[36m(train_xt pid=80141)[0m tune_cost =================== True
[2m[36m(train_xt pid=80232)[0m good
[2m[36m(train_xt pid=80232)[0m log filename ================== /tmp/16945946062622192
[2m[36m(train_xt pid=80232)[0m step_per_second ============ 670.0
[2m[36m(train_xt pid=80232)[0m tune_cost =================== True
[2m[36m(train_xt pid=80141)[0m =======================env_pool_size======================2
[2m[36m(train_xt pid=80141)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=80141)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=80141)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945946648992784.yaml
[2m[36m(train_xt pid=80141)[0m run_log ======================== /tmp/test_opt_bys16945946648992784.log
[2m[36m(train_xt pid=80232)[0m =======================env_pool_size======================2
[2m[36m(train_xt pid=80232)[0m =======================env_pool_wait_nums======================2[2m[36m(train_xt pid=80079)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=80079)[0m 
[2m[36m(train_xt pid=80079)[0m [W 2023-09-13 16:44:23,645] Trial 10 failed with parameters: {'env_pool_size': 5, 'env_pool_wait_nums': 4, 'infer_size': 3} because of the following error: FileNotFoundError(2, 'No such file or directory').
[2m[36m(train_xt pid=80079)[0m Traceback (most recent call last):
[2m[36m(train_xt pid=80079)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/study/_optimize.py", line 200, in _run_trial
[2m[36m(train_xt pid=80079)[0m     value_or_values = func(trial)
[2m[36m(train_xt pid=80079)[0m   File "/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py", line 185, in <lambda>
[2m[36m(train_xt pid=80079)[0m     study.optimize(lambda trial: fn(trial, start_core, with_samper), n_trials=n_trials)
[2m[36m(train_xt pid=80079)[0m   File "/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py", line 134, in fn
[2m[36m(train_xt pid=80079)[0m     step_per_second = get_throughput([filename])
[2m[36m(train_xt pid=80079)[0m   File "/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py", line 40, in get_throughput
[2m[36m(train_xt pid=80079)[0m     with open(file, "r") as f:
[2m[36m(train_xt pid=80079)[0m FileNotFoundError: [Errno 2] No such file or directory: '/tmp/16945946388902004'
[2m[36m(train_xt pid=80079)[0m [W 2023-09-13 16:44:23,647] Trial 10 failed with value None.
[2m[36m(train_xt pid=80079)[0m 2023-09-13 16:44:23,647	ERROR function_trainable.py:298 -- Runner Thread raised error.
[2m[36m(train_xt pid=80079)[0m Traceback (most recent call last):
[2m[36m(train_xt pid=80079)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 289, in run
[2m[36m(train_xt pid=80079)[0m     self._entrypoint()
[2m[36m(train_xt pid=80079)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 365, in entrypoint
[2m[36m(train_xt pid=80079)[0m     self._status_reporter.get_checkpoint(),
[2m[36m(train_xt pid=80079)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/util/tracing/tracing_helper.py", line 466, in _resume_span
[2m[36m(train_xt pid=80079)[0m     return method(self, *_args, **_kwargs)
[2m[36m(train_xt pid=80079)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 684, in _trainable_func
[2m[36m(train_xt pid=80079)[0m     output = fn()
[2m[36m(train_xt pid=80079)[0m   File "test_xt_with_tune.py", line 149, in train_xt
[2m[36m(train_xt pid=80079)[0m     print("tune with_samper ===================== {}".format(with_samper))
[2m[36m(train_xt pid=80079)[0m   File "/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py", line 185, in find_max_th
[2m[36m(train_xt pid=80079)[0m     study.optimize(lambda trial: fn(trial, start_core, with_samper), n_trials=n_trials)
[2m[36m(train_xt pid=80079)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/study/study.py", line 451, in optimize
[2m[36m(train_xt pid=80079)[0m     show_progress_bar=show_progress_bar,
[2m[36m(train_xt pid=80079)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/study/_optimize.py", line 76, in _optimize
[2m[36m(train_xt pid=80079)[0m     progress_bar=progress_bar,
[2m[36m(train_xt pid=80079)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/study/_optimize.py", line 163, in _optimize_sequential
[2m[36m(train_xt pid=80079)[0m     frozen_trial = _run_trial(study, func, catch)
[2m[36m(train_xt pid=80079)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/study/_optimize.py", line 251, in _run_trial
[2m[36m(train_xt pid=80079)[0m     raise func_err
[2m[36m(train_xt pid=80079)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/study/_optimize.py", line 200, in _run_trial
[2m[36m(train_xt pid=80079)[0m     value_or_values = func(trial)
[2m[36m(train_xt pid=80079)[0m   File "/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py", line 185, in <lambda>
[2m[36m(train_xt pid=80079)[0m     study.optimize(lambda trial: fn(trial, start_core, with_samper), n_trials=n_trials)
[2m[36m(train_xt pid=80079)[0m   File "/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py", line 134, in fn
[2m[36m(train_xt pid=80079)[0m     step_per_second = get_throughput([filename])
[2m[36m(train_xt pid=80079)[0m   File "/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py", line 40, in get_throughput
[2m[36m(train_xt pid=80079)[0m     with open(file, "r") as f:
[2m[36m(train_xt pid=80079)[0m FileNotFoundError: [Errno 2] No such file or directory: '/tmp/16945946388902004'
[2m[36m(train_xt pid=80141)[0m Killed
[2m[36m(train_xt pid=80141)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80232)[0m Killed
[2m[36m(train_xt pid=80232)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80141)[0m [I 2023-09-13 16:44:23,853] Trial 8 finished with value: 376.47058823529414 and parameters: {'env_pool_size': 2, 'env_pool_wait_nums': 2, 'infer_size': 2}. Best is trial 1 with value: 357.94183445190157.
[2m[36m(train_xt pid=80232)[0m [I 2023-09-13 16:44:23,850] Trial 9 finished with value: 417.91044776119406 and parameters: {'env_pool_size': 5, 'env_pool_wait_nums': 5, 'infer_size': 2}. Best is trial 1 with value: 357.94183445190157.
[2m[36m(train_xt pid=80141)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80141)[0m Instructions for updating:
[2m[36m(train_xt pid=80141)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80232)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80232)[0m Instructions for updating:
[2m[36m(train_xt pid=80232)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80141)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:30: 
[2m[36m(train_xt pid=80141)[0m **************************************************
[2m[36m(train_xt pid=80141)[0m  XT start work...
[2m[36m(train_xt pid=80141)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945946648992784.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=80141)[0m **************************************************
[2m[36m(train_xt pid=80232)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:30: 
[2m[36m(train_xt pid=80232)[0m **************************************************
[2m[36m(train_xt pid=80232)[0m  XT start work...
[2m[36m(train_xt pid=80232)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945946648913267.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=80232)[0m **************************************************
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:31: init learner with:
[2m[36m(train_xt pid=80141)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=80141)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=80141)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=80141)[0m               'agent_num': 1},
[2m[36m(train_xt pid=80141)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=80141)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=80141)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=80141)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=80141)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=80141)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=80141)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=80141)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=80141)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=80141)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=80141)[0m                           'instance_num': 4,
[2m[36m(train_xt pid=80141)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=80141)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=80141)[0m                           'save_model': True,
[2m[36m(train_xt pid=80141)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=80141)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=80141)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80141)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=80141)[0m                                    'model_config': {'LR': 0.00386824,
[2m[36m(train_xt pid=80141)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=80141)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=80141)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=80141)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=80141)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80141)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=80141)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=80141)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=80141)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=80141)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=80141)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80141)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=80141)[0m                                                 84,
[2m[36m(train_xt pid=80141)[0m                                                 4],
[2m[36m(train_xt pid=80141)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=80141)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=80141)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=80141)[0m              'id': 'ImpalaCnnOpt_now_time_16945946648992784',
[2m[36m(train_xt pid=80141)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=80141)[0m 'env_num': 4,
[2m[36m(train_xt pid=80141)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=80141)[0m                         'size': 2,
[2m[36m(train_xt pid=80141)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=80141)[0m                         'vision': False,
[2m[36m(train_xt pid=80141)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=80141)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=80141)[0m             'now_time': '16945946648992784'},
[2m[36m(train_xt pid=80141)[0m 'gpu': -1,
[2m[36m(train_xt pid=80141)[0m 'group_num': 1,
[2m[36m(train_xt pid=80141)[0m 'lock': 1,
[2m[36m(train_xt pid=80141)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80141)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=80141)[0m                        'model_config': {'LR': 0.00386824,
[2m[36m(train_xt pid=80141)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=80141)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=80141)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=80141)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=80141)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80141)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=80141)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=80141)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=80141)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=80141)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=80141)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80141)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=80141)[0m                                     84,
[2m[36m(train_xt pid=80141)[0m                                     4],
[2m[36m(train_xt pid=80141)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=80141)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=80141)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=80141)[0m                'dummy_user',
[2m[36m(train_xt pid=80141)[0m                'dummy_password')],
[2m[36m(train_xt pid=80141)[0m 'speedup': 3,
[2m[36m(train_xt pid=80141)[0m 'start_core': True}
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:31: Init Broker server info:
[2m[36m(train_xt pid=80141)[0m {'recv': {'port': 28011,
[2m[36m(train_xt pid=80141)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=80141)[0m 'send': [{'port': 33793,
[2m[36m(train_xt pid=80141)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:31: init learner with:
[2m[36m(train_xt pid=80232)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=80232)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=80232)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=80232)[0m               'agent_num': 1},
[2m[36m(train_xt pid=80232)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=80232)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=80232)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=80232)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=80232)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=80232)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=80232)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=80232)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=80232)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=80232)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=80232)[0m                           'instance_num': 4,
[2m[36m(train_xt pid=80232)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=80232)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=80232)[0m                           'save_model': True,
[2m[36m(train_xt pid=80232)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=80232)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=80232)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80232)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=80232)[0m                                    'model_config': {'LR': 0.002724888,
[2m[36m(train_xt pid=80232)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=80232)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=80232)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=80232)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=80232)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80232)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=80232)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=80232)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=80232)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=80232)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=80232)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80232)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=80232)[0m                                                 84,
[2m[36m(train_xt pid=80232)[0m                                                 4],
[2m[36m(train_xt pid=80232)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=80232)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=80232)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=80232)[0m              'id': 'ImpalaCnnOpt_now_time_16945946648913267',
[2m[36m(train_xt pid=80232)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=80232)[0m 'env_num': 4,
[2m[36m(train_xt pid=80232)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=80232)[0m                         'size': 2,
[2m[36m(train_xt pid=80232)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=80232)[0m                         'vision': False,
[2m[36m(train_xt pid=80232)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=80232)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=80232)[0m             'now_time': '16945946648913267'},
[2m[36m(train_xt pid=80232)[0m 'gpu': -1,
[2m[36m(train_xt pid=80232)[0m 'group_num': 1,
[2m[36m(train_xt pid=80232)[0m 'lock': 1,
[2m[36m(train_xt pid=80232)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=80232)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=80232)[0m                        'model_config': {'LR': 0.002724888,
[2m[36m(train_xt pid=80232)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=80232)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=80232)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=80232)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=80232)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=80232)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=80232)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=80232)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=80232)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=80232)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=80232)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=80232)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=80232)[0m                                     84,
[2m[36m(train_xt pid=80232)[0m                                     4],
[2m[36m(train_xt pid=80232)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=80232)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=80232)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=80232)[0m                'dummy_user',
[2m[36m(train_xt pid=80232)[0m                'dummy_password')],
[2m[36m(train_xt pid=80232)[0m 'speedup': 3,
[2m[36m(train_xt pid=80232)[0m 'start_core': True}
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:31: Init Broker server info:
[2m[36m(train_xt pid=80232)[0m {'recv': {'port': 34475,
[2m[36m(train_xt pid=80232)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=80232)[0m 'send': [{'port': 30715,
[2m[36m(train_xt pid=80232)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=80232)[0m 
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:31: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 34475, 30715, '127.0.0.1', 'info')
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:31: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 28011, 33793, '127.0.0.1', 'info')
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:31: launch local broker with lib success
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:31: launch local broker with lib success
[2m[36m(train_xt pid=80141)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:31: **********
[2m[36m(train_xt pid=80141)[0m workspace:
[2m[36m(train_xt pid=80141)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945946648992784
[2m[36m(train_xt pid=80141)[0m 
[2m[36m(train_xt pid=80232)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:44:31: **********
[2m[36m(train_xt pid=80232)[0m workspace:
[2m[36m(train_xt pid=80232)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945946648913267
[2m[36m(train_xt pid=80232)[0m 
2023-09-13 16:44:32,718	WARNING tune.py:687 -- Stop signal received (e.g. via SIGINT/Ctrl+C), ending Ray Tune run. This will try to checkpoint the experiment state one last time. Press CTRL+C (or send SIGINT/SIGKILL/SIGTERM) to skip. 

[2m[36m(train_xt pid=80232)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=80232)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945946648913267.yaml
[2m[36m(train_xt pid=80232)[0m run_log ======================== /tmp/test_opt_bys16945946648913267.log
== Status ==
Current time: 2023-09-13 16:44:28 (running for 00:04:32.84)
Memory usage on this node: 18.3/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 20.0/80 CPUs, 0.8/3 GPUs, 0.0/160.87 GiB heap, 0.0/72.94 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (2 ERROR, 2 RUNNING)
Number of errored trials: 2
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_1d8ae_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00000_0_lr=0.0036_2023-09-13_16-39-56/error.txt |
| train_xt_1d8ae_00001 |            1 | /tmp/ray_results/pb2_test4/train_xt_1d8ae_00001_1_lr=0.0037_2023-09-13_16-40-03/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=80141)[0m start_core ======================================== True
[2m[36m(train_xt pid=80141)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=80232)[0m start_core ======================================== True
[2m[36m(train_xt pid=80232)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=80141)[0m plasma_store -m 1000000000 -s /tmp/plasma16001
[2m[36m(train_xt pid=80141)[0m self.time_record_filename ============= /tmp/16945946648992784
[2m[36m(train_xt pid=80232)[0m plasma_store -m 1000000000 -s /tmp/plasma15999
[2m[36m(train_xt pid=80232)[0m self.time_record_filename ============= /tmp/16945946648913267
Traceback (most recent call last):
  File "test_xt_with_tune.py", line 262, in <module>
    
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/tuner.py", line 234, in fit
    return self._local_tuner.fit()
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/impl/tuner_internal.py", line 283, in fit
    analysis = self._fit_internal(trainable, param_space)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/impl/tuner_internal.py", line 381, in _fit_internal
    **args,
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/tune.py", line 722, in run
    runner.step()
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/execution/trial_runner.py", line 879, in step
    self._wait_and_handle_event(next_trial)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/execution/trial_runner.py", line 823, in _wait_and_handle_event
    self._live_trials, next_trial is not None
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/execution/ray_trial_executor.py", line 953, in get_next_executor_event
    futures_to_wait, num_returns=1, timeout=self._get_next_event_wait
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/_private/client_mode_hook.py", line 105, in wrapper
    return func(*args, **kwargs)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/_private/worker.py", line 2471, in wait
    fetch_local,
  File "python/ray/_raylet.pyx", line 1414, in ray._raylet.CoreWorker.wait
  File "python/ray/_raylet.pyx", line 173, in ray._raylet.check_status
KeyboardInterrupt
[2m[36m(train_xt pid=80141)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80141)[0m Instructions for updating:
[2m[36m(train_xt pid=80141)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=80232)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=80232)[0m Instructions for updating:
[2m[36m(train_xt pid=80232)[0m non-resource variables are not supported in the long term
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/_private/client_mode_hook.py", line 105, in wrapper
    return func(*args, **kwargs)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/_private/worker.py", line 1581, in shutdown
    disconnect(_exiting_interpreter)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/_private/worker.py", line 2131, in disconnect
    worker.logger_thread.join()
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py", line 1044, in join
    self._wait_for_tstate_lock()
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py", line 1060, in _wait_for_tstate_lock
    elif lock.acquire(block, timeout):
KeyboardInterrupt
