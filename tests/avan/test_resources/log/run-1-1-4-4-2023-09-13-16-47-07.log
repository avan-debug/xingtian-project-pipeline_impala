WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
Instructions for updating:
non-resource variables are not supported in the long term
2023-09-13 16:47:18,637	INFO worker.py:1515 -- Started a local Ray instance. View the dashboard at [1m[32mhttp://127.0.0.1:8265 [39m[22m
2023-09-13 16:47:20,507	WARNING function_trainable.py:620 -- Function checkpointing is disabled. This may result in unexpected behavior when using checkpointing features or certain schedulers. To enable, set the train function arguments to be `func(config, checkpoint_dir=None)`.
2023-09-13 16:47:20,562	WARNING trial_runner.py:1583 -- You are trying to access _search_alg interface of TrialRunner in TrialScheduler, which is being restricted. If you believe it is reasonable for your scheduler to access this TrialRunner API, please reach out to Ray team on GitHub. A more strict API access pattern would be enforced starting 1.12s.0
[2m[36m(train_xt pid=30598)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py:166: ExperimentalWarning: BoTorchSampler is experimental (supported from v2.4.0). The interface can change in the future.
[2m[36m(train_xt pid=30598)[0m   n_startup_trials=1,
[2m[36m(train_xt pid=30598)[0m 2023-09-13 16:47:28,674	ERROR function_trainable.py:298 -- Runner Thread raised error.
[2m[36m(train_xt pid=30598)[0m Traceback (most recent call last):
[2m[36m(train_xt pid=30598)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 289, in run
[2m[36m(train_xt pid=30598)[0m     self._entrypoint()
[2m[36m(train_xt pid=30598)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 365, in entrypoint
[2m[36m(train_xt pid=30598)[0m     self._status_reporter.get_checkpoint(),
[2m[36m(train_xt pid=30598)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/util/tracing/tracing_helper.py", line 466, in _resume_span
[2m[36m(train_xt pid=30598)[0m     return method(self, *_args, **_kwargs)
[2m[36m(train_xt pid=30598)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 684, in _trainable_func
[2m[36m(train_xt pid=30598)[0m     output = fn()
[2m[36m(train_xt pid=30598)[0m   File "test_xt_with_tune.py", line 150, in train_xt
[2m[36m(train_xt pid=30598)[0m     best_param = find_max_th(yaml_file_path, n_trials, start_core, with_samper)
[2m[36m(train_xt pid=30598)[0m   File "/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py", line 187, in find_max_th
[2m[36m(train_xt pid=30598)[0m     print("study.best_params ===================== {}".format(study.best_params))
[2m[36m(train_xt pid=30598)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/study/study.py", line 117, in best_params
[2m[36m(train_xt pid=30598)[0m     return self.best_trial.params
[2m[36m(train_xt pid=30598)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/study/study.py", line 160, in best_trial
[2m[36m(train_xt pid=30598)[0m     return copy.deepcopy(self._storage.get_best_trial(self._study_id))
[2m[36m(train_xt pid=30598)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/storages/_cached_storage.py", line 182, in get_best_trial
[2m[36m(train_xt pid=30598)[0m     return self._backend.get_best_trial(study_id)
[2m[36m(train_xt pid=30598)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/storages/_rdb/storage.py", line 912, in get_best_trial
[2m[36m(train_xt pid=30598)[0m     trial = models.TrialModel.find_min_value_trial(study_id, 0, session)
[2m[36m(train_xt pid=30598)[0m   File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/storages/_rdb/models.py", line 231, in find_min_value_trial
[2m[36m(train_xt pid=30598)[0m     raise ValueError(NOT_FOUND_MSG)
[2m[36m(train_xt pid=30598)[0m ValueError: Record does not exist.
[2m[36m(train_xt pid=30643)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py:166: ExperimentalWarning: BoTorchSampler is experimental (supported from v2.4.0). The interface can change in the future.
[2m[36m(train_xt pid=30643)[0m   n_startup_trials=1,
[2m[36m(train_xt pid=30643)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30643)[0m Instructions for updating:
[2m[36m(train_xt pid=30643)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30691)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py:166: ExperimentalWarning: BoTorchSampler is experimental (supported from v2.4.0). The interface can change in the future.
[2m[36m(train_xt pid=30691)[0m   n_startup_trials=1,
[2m[36m(train_xt pid=30643)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:41: 
[2m[36m(train_xt pid=30643)[0m **************************************************
[2m[36m(train_xt pid=30643)[0m  XT start work...
[2m[36m(train_xt pid=30643)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945948561220045.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=30643)[0m **************************************************
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:42: init learner with:
[2m[36m(train_xt pid=30643)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=30643)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=30643)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=30643)[0m               'agent_num': 1},
[2m[36m(train_xt pid=30643)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=30643)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=30643)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=30643)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=30643)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=30643)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=30643)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=30643)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=30643)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=30643)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=30643)[0m                           'instance_num': 5,
[2m[36m(train_xt pid=30643)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=30643)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=30643)[0m                           'save_model': True,
[2m[36m(train_xt pid=30643)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=30643)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=30643)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30643)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=30643)[0m                                    'model_config': {'LR': 0.002986026,
[2m[36m(train_xt pid=30643)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=30643)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=30643)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=30643)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=30643)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30643)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=30643)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=30643)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=30643)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=30643)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=30643)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30643)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=30643)[0m                                                 84,
[2m[36m(train_xt pid=30643)[0m                                                 4],
[2m[36m(train_xt pid=30643)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=30643)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=30643)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=30643)[0m              'id': 'ImpalaCnnOpt_now_time_16945948561220045',
[2m[36m(train_xt pid=30643)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=30643)[0m 'env_num': 5,
[2m[36m(train_xt pid=30643)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=30643)[0m                         'size': 3,
[2m[36m(train_xt pid=30643)[0m                         'vector_env_size': 3,
[2m[36m(train_xt pid=30643)[0m                         'vision': False,
[2m[36m(train_xt pid=30643)[0m                         'wait_num': 3},
[2m[36m(train_xt pid=30643)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=30643)[0m             'now_time': '16945948561220045'},
[2m[36m(train_xt pid=30643)[0m 'gpu': -1,
[2m[36m(train_xt pid=30643)[0m 'group_num': 1,
[2m[36m(train_xt pid=30643)[0m 'lock': 1,
[2m[36m(train_xt pid=30643)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30643)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=30643)[0m                        'model_config': {'LR': 0.002986026,
[2m[36m(train_xt pid=30643)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=30643)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=30643)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=30643)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=30643)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30643)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=30643)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=30643)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=30643)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=30643)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=30643)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30643)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=30643)[0m                                     84,
[2m[36m(train_xt pid=30643)[0m                                     4],
[2m[36m(train_xt pid=30643)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=30643)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=30643)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=30643)[0m                'dummy_user',
[2m[36m(train_xt pid=30643)[0m                'dummy_password')],
[2m[36m(train_xt pid=30643)[0m 'speedup': 3,
[2m[36m(train_xt pid=30643)[0m 'start_core': True}
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:42: Init Broker server info:
[2m[36m(train_xt pid=30643)[0m {'recv': {'port': 34501,
[2m[36m(train_xt pid=30643)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=30643)[0m 'send': [{'port': 28893,
[2m[36m(train_xt pid=30643)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:42: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 34501, 28893, '127.0.0.1', 'info')
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:42: launch local broker with lib success
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:42: **********
[2m[36m(train_xt pid=30643)[0m workspace:
[2m[36m(train_xt pid=30643)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945948561220045
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30691)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30691)[0m Instructions for updating:
[2m[36m(train_xt pid=30691)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30643)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30643)[0m Instructions for updating:
[2m[36m(train_xt pid=30643)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30643)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:48: set verbosity in broker: info
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:48: init broker with id-0
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:48: share buf: plasma_store -m 400000000 -s /tmp/plasma_share30773
[2m[36m(train_xt pid=30691)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:48: 
[2m[36m(train_xt pid=30691)[0m **************************************************
[2m[36m(train_xt pid=30691)[0m  XT start work...
[2m[36m(train_xt pid=30691)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_1694594862706202.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=30691)[0m **************************************************
[2m[36m(train_xt pid=30643)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   self.run()
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:48: init explorer with id: 0, buf_path: /tmp/plasma_share30773
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:48: init agent group for: explore
2023-09-13 16:47:49,030	ERROR trial_runner.py:987 -- Trial train_xt_26987_00000: Error processing event.
ray.exceptions.RayTaskError(ValueError): [36mray::ImplicitFunc.train()[39m (pid=30598, ip=192.168.1.128, repr=train_xt)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/trainable.py", line 349, in train
    result = self.step()
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 417, in step
    self._report_thread_runner_error(block=True)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 589, in _report_thread_runner_error
    raise e
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 289, in run
    self._entrypoint()
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 365, in entrypoint
    self._status_reporter.get_checkpoint(),
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/trainable/function_trainable.py", line 684, in _trainable_func
    output = fn()
  File "test_xt_with_tune.py", line 150, in train_xt
    best_param = find_max_th(yaml_file_path, n_trials, start_core, with_samper)
  File "/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py", line 187, in find_max_th
    print("study.best_params ===================== {}".format(study.best_params))
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/study/study.py", line 117, in best_params
    return self.best_trial.params
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/study/study.py", line 160, in best_trial
    return copy.deepcopy(self._storage.get_best_trial(self._study_id))
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/storages/_cached_storage.py", line 182, in get_best_trial
    return self._backend.get_best_trial(study_id)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/storages/_rdb/storage.py", line 912, in get_best_trial
    trial = models.TrialModel.find_min_value_trial(study_id, 0, session)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/optuna/storages/_rdb/models.py", line 231, in find_min_value_trial
    raise ValueError(NOT_FOUND_MSG)
ValueError: Record does not exist.
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:49: init learner with:
[2m[36m(train_xt pid=30691)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=30691)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=30691)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=30691)[0m               'agent_num': 1},
[2m[36m(train_xt pid=30691)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=30691)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=30691)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=30691)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=30691)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=30691)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=30691)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=30691)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=30691)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=30691)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=30691)[0m                           'instance_num': 3,
[2m[36m(train_xt pid=30691)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=30691)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=30691)[0m                           'save_model': True,
[2m[36m(train_xt pid=30691)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=30691)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=30691)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30691)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=30691)[0m                                    'model_config': {'LR': 0.002974385,
[2m[36m(train_xt pid=30691)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=30691)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=30691)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=30691)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=30691)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30691)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=30691)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=30691)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=30691)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=30691)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=30691)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30691)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=30691)[0m                                                 84,
[2m[36m(train_xt pid=30691)[0m                                                 4],
[2m[36m(train_xt pid=30691)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=30691)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=30691)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=30691)[0m              'id': 'ImpalaCnnOpt_now_time_1694594862706202',
[2m[36m(train_xt pid=30691)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=30691)[0m 'env_num': 3,
[2m[36m(train_xt pid=30691)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=30691)[0m                         'size': 2,
[2m[36m(train_xt pid=30691)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=30691)[0m                         'vision': False,
[2m[36m(train_xt pid=30691)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=30691)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=30691)[0m             'now_time': '1694594862706202'},
[2m[36m(train_xt pid=30691)[0m 'gpu': -1,
[2m[36m(train_xt pid=30691)[0m 'group_num': 1,
[2m[36m(train_xt pid=30691)[0m 'lock': 1,
[2m[36m(train_xt pid=30691)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30691)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=30691)[0m                        'model_config': {'LR': 0.002974385,
[2m[36m(train_xt pid=30691)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=30691)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=30691)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=30691)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=30691)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30691)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=30691)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=30691)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=30691)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=30691)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=30691)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30691)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=30691)[0m                                     84,
[2m[36m(train_xt pid=30691)[0m                                     4],
[2m[36m(train_xt pid=30691)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=30691)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=30691)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=30691)[0m                'dummy_user',
[2m[36m(train_xt pid=30691)[0m                'dummy_password')],
[2m[36m(train_xt pid=30691)[0m 'speedup': 3,
[2m[36m(train_xt pid=30691)[0m 'start_core': True}
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:49: Init Broker server info:
[2m[36m(train_xt pid=30691)[0m {'recv': {'port': 22793,
[2m[36m(train_xt pid=30691)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=30691)[0m 'send': [{'port': 23871,
[2m[36m(train_xt pid=30691)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:49: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 22793, 23871, '127.0.0.1', 'info')
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:49: launch local broker with lib success
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:49: **********
[2m[36m(train_xt pid=30691)[0m workspace:
[2m[36m(train_xt pid=30691)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_1694594862706202
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30781)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/test_resources/test_optuna_bys.py:166: ExperimentalWarning: BoTorchSampler is experimental (supported from v2.4.0). The interface can change in the future.
[2m[36m(train_xt pid=30781)[0m   n_startup_trials=1,
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:50: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:51: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=30691)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30691)[0m Instructions for updating:
[2m[36m(train_xt pid=30691)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:51: init explorer with id: 1, buf_path: /tmp/plasma_share30773
[2m[36m(train_xt pid=30781)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30781)[0m Instructions for updating:
[2m[36m(train_xt pid=30781)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:53: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=30691)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:54: set verbosity in broker: info
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:54: init broker with id-0
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:54: share buf: plasma_store -m 400000000 -s /tmp/plasma_share31472
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:54: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:55: init explorer with id: 2, buf_path: /tmp/plasma_share30773
[2m[36m(train_xt pid=30691)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   self.run()
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:55: init explorer with id: 0, buf_path: /tmp/plasma_share31472
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:55: init agent group for: explore
[2m[36m(train_xt pid=30781)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:56: 
[2m[36m(train_xt pid=30781)[0m **************************************************
[2m[36m(train_xt pid=30781)[0m  XT start work...
[2m[36m(train_xt pid=30781)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945948708345783.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=30781)[0m **************************************************
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:56: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:56: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:57: init learner with:
[2m[36m(train_xt pid=30781)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=30781)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=30781)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=30781)[0m               'agent_num': 1},
[2m[36m(train_xt pid=30781)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=30781)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=30781)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=30781)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=30781)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=30781)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=30781)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=30781)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=30781)[0m                           'instance_num': 4,
[2m[36m(train_xt pid=30781)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=30781)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=30781)[0m                           'save_model': True,
[2m[36m(train_xt pid=30781)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=30781)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=30781)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30781)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=30781)[0m                                    'model_config': {'LR': 0.004760203,
[2m[36m(train_xt pid=30781)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=30781)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=30781)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=30781)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30781)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=30781)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=30781)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=30781)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=30781)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=30781)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30781)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=30781)[0m                                                 84,
[2m[36m(train_xt pid=30781)[0m                                                 4],
[2m[36m(train_xt pid=30781)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=30781)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=30781)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=30781)[0m              'id': 'ImpalaCnnOpt_now_time_16945948708345783',
[2m[36m(train_xt pid=30781)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=30781)[0m 'env_num': 4,
[2m[36m(train_xt pid=30781)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=30781)[0m                         'size': 4,
[2m[36m(train_xt pid=30781)[0m                         'vector_env_size': 4,
[2m[36m(train_xt pid=30781)[0m                         'vision': False,
[2m[36m(train_xt pid=30781)[0m                         'wait_num': 4},
[2m[36m(train_xt pid=30781)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=30781)[0m             'now_time': '16945948708345783'},
[2m[36m(train_xt pid=30781)[0m 'gpu': -1,
[2m[36m(train_xt pid=30781)[0m 'group_num': 1,tune_system ================== True
with_samper ================== True
== Status ==
Current time: 2023-09-13 16:47:27 (running for 00:00:07.37)
Memory usage on this node: 15.7/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 10.0/80 CPUs, 0.4/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (3 PENDING, 1 RUNNING)


[2m[36m(train_xt pid=30598)[0m {'lr': 0.004985845258513113, 'checkpoint_interval': 1}
[2m[36m(train_xt pid=30598)[0m trail id ================= 26987_00000
[2m[36m(train_xt pid=30598)[0m tune with_samper ===================== True
[2m[36m(train_xt pid=30598)[0m =================with_samper=========================False
[2m[36m(train_xt pid=30598)[0m =================not with_samper=========================
== Status ==
Current time: 2023-09-13 16:47:34 (running for 00:00:13.80)
Memory usage on this node: 15.9/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 20.0/80 CPUs, 0.8/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (2 PENDING, 2 RUNNING)


[2m[36m(train_xt pid=30643)[0m {'lr': 0.002986025661441615, 'checkpoint_interval': 1}
[2m[36m(train_xt pid=30643)[0m trail id ================= 26987_00001
[2m[36m(train_xt pid=30643)[0m tune with_samper ===================== True
[2m[36m(train_xt pid=30643)[0m =================with_samper=========================False
[2m[36m(train_xt pid=30643)[0m =================not with_samper=========================
[2m[36m(train_xt pid=30643)[0m =======================env_pool_size======================3
[2m[36m(train_xt pid=30643)[0m =======================env_pool_wait_nums======================3
[2m[36m(train_xt pid=30643)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=30643)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945948561220045.yaml
[2m[36m(train_xt pid=30643)[0m run_log ======================== /tmp/test_opt_bys16945948561220045.log
== Status ==
Current time: 2023-09-13 16:47:40 (running for 00:00:20.33)
Memory usage on this node: 16.4/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 PENDING, 3 RUNNING)


[2m[36m(train_xt pid=30691)[0m {'lr': 0.0029743848697910366, 'checkpoint_interval': 1}
[2m[36m(train_xt pid=30691)[0m trail id ================= 26987_00002
[2m[36m(train_xt pid=30691)[0m tune with_samper ===================== True
[2m[36m(train_xt pid=30691)[0m =================with_samper=========================False
[2m[36m(train_xt pid=30691)[0m =================not with_samper=========================
[2m[36m(train_xt pid=30643)[0m start_core ======================================== True
[2m[36m(train_xt pid=30643)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=30691)[0m =======================env_pool_size======================2
[2m[36m(train_xt pid=30691)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=30691)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=30691)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_1694594862706202.yaml
[2m[36m(train_xt pid=30691)[0m run_log ======================== /tmp/test_opt_bys1694594862706202.log
[2m[36m(train_xt pid=30643)[0m plasma_store -m 1000000000 -s /tmp/plasma30701
[2m[36m(train_xt pid=30643)[0m self.time_record_filename ============= /tmp/16945948561220045
[2m[36m(train_xt pid=30643)[0m plasma_store -m 100000000 -s /tmp/plasma30773T0
== Status ==
Current time: 2023-09-13 16:47:49 (running for 00:00:28.47)
Memory usage on this node: 18.1/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 40.0/80 CPUs, 1.6/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (4 RUNNING)


== Status ==
Current time: 2023-09-13 16:47:49 (running for 00:00:28.48)
Memory usage on this node: 18.1/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30781)[0m {'lr': 0.004760203010412771, 'checkpoint_interval': 1}
[2m[36m(train_xt pid=30781)[0m trail id ================= 26987_00003
[2m[36m(train_xt pid=30781)[0m tune with_samper ===================== True
[2m[36m(train_xt pid=30691)[0m start_core ======================================== True
[2m[36m(train_xt pid=30691)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=30691)[0m plasma_store -m 1000000000 -s /tmp/plasma30780
[2m[36m(train_xt pid=30691)[0m self.time_record_filename ============= /tmp/1694594862706202
[2m[36m(train_xt pid=30781)[0m =================with_samper=========================False
[2m[36m(train_xt pid=30781)[0m =================not with_samper=========================
[2m[36m(train_xt pid=30781)[0m =======================env_pool_size======================4
[2m[36m(train_xt pid=30781)[0m =======================env_pool_wait_nums======================4
[2m[36m(train_xt pid=30781)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=30781)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945948708345783.yaml
[2m[36m(train_xt pid=30781)[0m run_log ======================== /tmp/test_opt_bys16945948708345783.log
== Status ==
Current time: 2023-09-13 16:47:54 (running for 00:00:33.49)
Memory usage on this node: 19.0/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30691)[0m plasma_store -m 100000000 -s /tmp/plasma31472T0
[2m[36m(train_xt pid=30781)[0m start_core ======================================== True
[2m[36m(train_xt pid=30781)[0m 'lock': 1,
[2m[36m(train_xt pid=30781)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30781)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=30781)[0m                        'model_config': {'LR': 0.004760203,
[2m[36m(train_xt pid=30781)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=30781)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=30781)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=30781)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30781)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=30781)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=30781)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=30781)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=30781)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=30781)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30781)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=30781)[0m                                     84,
[2m[36m(train_xt pid=30781)[0m                                     4],
[2m[36m(train_xt pid=30781)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=30781)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=30781)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=30781)[0m                'dummy_user',
[2m[36m(train_xt pid=30781)[0m                'dummy_password')],
[2m[36m(train_xt pid=30781)[0m 'speedup': 3,
[2m[36m(train_xt pid=30781)[0m 'start_core': True}
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:57: Init Broker server info:
[2m[36m(train_xt pid=30781)[0m {'recv': {'port': 20995,
[2m[36m(train_xt pid=30781)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=30781)[0m 'send': [{'port': 27544,
[2m[36m(train_xt pid=30781)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:57: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 20995, 27544, '127.0.0.1', 'info')
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:57: launch local broker with lib success
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:57: **********
[2m[36m(train_xt pid=30781)[0m workspace:
[2m[36m(train_xt pid=30781)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945948708345783
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:58: speedup(3): binding env 2 to CPU 3
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:58: init explorer with id: 3, buf_path: /tmp/plasma_share30773
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:58: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:58: init explorer with id: 1, buf_path: /tmp/plasma_share31472
[2m[36m(train_xt pid=30781)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30781)[0m Instructions for updating:
[2m[36m(train_xt pid=30781)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:47:59: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:00: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:01: speedup(3): binding env 3 to CPU 4
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:01: init explorer with id: 4, buf_path: /tmp/plasma_share30773
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:01: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:01: init explorer with id: 2, buf_path: /tmp/plasma_share31472
[2m[36m(train_xt pid=30781)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:02: set verbosity in broker: info
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:02: init broker with id-0
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:03: explorer-4 start with sync interval-1
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:02: share buf: plasma_store -m 400000000 -s /tmp/plasma_share33161
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:03: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=30781)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   self.run()
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:03: init explorer with id: 0, buf_path: /tmp/plasma_share33161
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:03: init agent group for: explore
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:04: speedup(3): binding env 4 to CPU 5
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:04: speedup(3): binding env 2 to CPU 3
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:05: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:06: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:06: init explorer with id: 1, buf_path: /tmp/plasma_share33161
[2m[36m(train_xt pid=30691)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30691)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   self.run()
[2m[36m(train_xt pid=30691)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:07: Task: T0         | Train_count:         2 | Steps:       765 | Elapsed time: 16 seconds
[2m[36m(train_xt pid=30691)[0m mean_env_step_ms:         3.380864	mean_explore_ms:        818.280061	mean_inference_ms:        2.693919	mean_loop_time_ms:       48.764706
[2m[36m(train_xt pid=30691)[0m mean_prepare_data_ms:     0.928561	mean_restore_model_ms:   44.492563	mean_train_time_ms:     643.789927	mean_wait_model_ms:     4543.331226
[2m[36m(train_xt pid=30691)[0m mean_wait_sample_ms:    4667.709668	step_per_second:              47.0	train_loss:              -4.027114	train_reward_avg:              0.0
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30643)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30643)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   self.run()
[2m[36m(train_xt pid=30643)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:07: Task: T0         | Train_count:         0 | Steps:       253 | Elapsed time: 22 seconds
[2m[36m(train_xt pid=30643)[0m mean_env_step_ms:         4.448162	mean_explore_ms:        1071.365261	mean_inference_ms:        3.534178	mean_loop_time_ms:             nan
[2m[36m(train_xt pid=30643)[0m mean_prepare_data_ms:     1.106501	mean_restore_model_ms:   49.123001	mean_train_time_ms:            nan	mean_wait_model_ms:     7679.140902
[2m[36m(train_xt pid=30643)[0m mean_wait_sample_ms:    20434.684992	step_per_second:              11.0	train_loss:              181.75148	train_reward_avg:              0.0
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:08: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:09: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:09: init explorer with id: 2, buf_path: /tmp/plasma_share33161
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:11: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:12: speedup(3): binding env 2 to CPU 3
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:12: init explorer with id: 3, buf_path: /tmp/plasma_share33161
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:14: Task: T0         | Train_count:        26 | Steps:     10328 | Elapsed time: 28 seconds
[2m[36m(train_xt pid=30643)[0m mean_env_step_ms:         4.300259	mean_explore_ms:        1028.672725	mean_inference_ms:         3.43311	mean_loop_time_ms:      230.771208
[2m[36m(train_xt pid=30643)[0m mean_prepare_data_ms:     1.239276	mean_restore_model_ms:   32.923251	mean_train_time_ms:      25.930595	mean_wait_model_ms:     5131.507128
[2m[36m(train_xt pid=30643)[0m mean_wait_sample_ms:    196.501744	step_per_second:             364.0	train_loss:               4.383183	train_reward_avg:             0.75
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:14: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:15: speedup(3): binding env 3 to CPU 4
[2m[36m(train_xt pid=30781)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30781)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   self.run()
[2m[36m(train_xt pid=30781)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:19: Task: T0         | Train_count:         2 | Steps:      1533 | Elapsed time: 20 seconds
[2m[36m(train_xt pid=30781)[0m mean_env_step_ms:         7.150249	mean_explore_ms:        1574.055135	mean_inference_ms:        4.473934	mean_loop_time_ms:       78.583717
[2m[36m(train_xt pid=30781)[0m mean_prepare_data_ms:     1.544317	mean_restore_model_ms:   75.219154	mean_train_time_ms:     778.499842	mean_wait_model_ms:     6044.391811
[2m[36m(train_xt pid=30781)[0m mean_wait_sample_ms:    5984.301885	step_per_second:              75.0	train_loss:              -5.056167	train_reward_avg:              0.0
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:20: Task: T0         | Train_count:        42 | Steps:     10899 | Elapsed time: 29 seconds
[2m[36m(train_xt pid=30691)[0m mean_env_step_ms:         3.087435	mean_explore_ms:        731.744617	mean_inference_ms:        2.446417	mean_loop_time_ms:      334.212554
[2m[36m(train_xt pid=30691)[0m mean_prepare_data_ms:     0.876296	mean_restore_model_ms:   19.367486	mean_train_time_ms:      20.012367	mean_wait_model_ms:     2066.943735
[2m[36m(train_xt pid=30691)[0m mean_wait_sample_ms:    305.649626	step_per_second:             374.0	train_loss:               5.579504	train_reward_avg:         1.142857
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:21: Task: T0         | Train_count:        54 | Steps:     20983 | Elapsed time: 36 seconds
[2m[36m(train_xt pid=30643)[0m mean_env_step_ms:         4.333388	mean_explore_ms:        1014.092426	mean_inference_ms:         3.33398	mean_loop_time_ms:       286.66445
[2m[36m(train_xt pid=30643)[0m mean_prepare_data_ms:     1.301038	mean_restore_model_ms:   23.744444	mean_train_time_ms:      26.667535	mean_wait_model_ms:     3526.208242
[2m[36m(train_xt pid=30643)[0m mean_wait_sample_ms:    251.856554	step_per_second:             578.0	train_loss:              28.142797	train_reward_avg:         1.083333
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:29: Task: T0         | Train_count:        22 | Steps:     11759 | Elapsed time: 29 seconds
[2m[36m(train_xt pid=30781)[0m mean_env_step_ms:         7.087419	mean_explore_ms:        1535.913507	mean_inference_ms:        4.372812	mean_loop_time_ms:      447.603559
[2m[36m(train_xt pid=30781)[0m mean_prepare_data_ms:     1.492631	mean_restore_model_ms:   52.831054	mean_train_time_ms:      39.695716	mean_wait_model_ms:     4508.109212
[2m[36m(train_xt pid=30781)[0m mean_wait_sample_ms:    396.676326	step_per_second:             400.0	train_loss:              42.733925	train_reward_avg:             0.35
[2m[36m(train_xt pid=30781)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=30781)[0m plasma_store -m 1000000000 -s /tmp/plasma32280
[2m[36m(train_xt pid=30781)[0m self.time_record_filename ============= /tmp/16945948708345783
== Status ==
Current time: 2023-09-13 16:47:59 (running for 00:00:38.50)
Memory usage on this node: 20.0/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30781)[0m plasma_store -m 100000000 -s /tmp/plasma33161T0
== Status ==
Current time: 2023-09-13 16:48:04 (running for 00:00:43.50)
Memory usage on this node: 20.6/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:48:09 (running for 00:00:48.51)
Memory usage on this node: 22.7/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:48:14 (running for 00:00:53.52)
Memory usage on this node: 22.9/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:48:19 (running for 00:00:58.52)
Memory usage on this node: 23.9/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:48:24 (running for 00:01:03.53)
Memory usage on this node: 24.3/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:48:29 (running for 00:01:08.53)
Memory usage on this node: 24.4/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:48:34 (running for 00:01:13.54)
Memory usage on this node: 24.5/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:29: Task: T0         | Train_count:        80 | Steps:     31015 | Elapsed time: 44 seconds
[2m[36m(train_xt pid=30643)[0m mean_env_step_ms:         4.879848	mean_explore_ms:        1097.847387	mean_inference_ms:        3.461964	mean_loop_time_ms:      329.696953
[2m[36m(train_xt pid=30643)[0m mean_prepare_data_ms:     1.248932	mean_restore_model_ms:   19.295514	mean_train_time_ms:      24.938536	mean_wait_model_ms:     2722.155616
[2m[36m(train_xt pid=30643)[0m mean_wait_sample_ms:    296.103919	step_per_second:             696.0	train_loss:             -25.256329	train_reward_avg:         1.104167
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:36: Task: T0         | Train_count:        82 | Steps:     21175 | Elapsed time: 44 seconds
[2m[36m(train_xt pid=30691)[0m mean_env_step_ms:         3.619841	mean_explore_ms:        806.375333	mean_inference_ms:        2.526159	mean_loop_time_ms:      401.931667
[2m[36m(train_xt pid=30691)[0m mean_prepare_data_ms:     0.890791	mean_restore_model_ms:   13.897606	mean_train_time_ms:       19.56104	mean_wait_model_ms:     1284.48362
[2m[36m(train_xt pid=30691)[0m mean_wait_sample_ms:    373.694944	step_per_second:             478.0	train_loss:             -43.633026	train_reward_avg:         1.461538
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:38: Task: T0         | Train_count:        42 | Steps:     21852 | Elapsed time: 39 seconds
[2m[36m(train_xt pid=30781)[0m mean_env_step_ms:         7.242354	mean_explore_ms:        1517.535901	mean_inference_ms:        4.205863	mean_loop_time_ms:      484.833431
[2m[36m(train_xt pid=30781)[0m mean_prepare_data_ms:     1.472509	mean_restore_model_ms:   35.214496	mean_train_time_ms:      32.733595	mean_wait_model_ms:     2862.855291
[2m[36m(train_xt pid=30781)[0m mean_wait_sample_ms:    442.221415	step_per_second:             559.0	train_loss:             -86.112244	train_reward_avg:         1.027778
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30643)[0m /tmp/plasma30701:   
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:40: broker status timeout!
[2m[36m(train_xt pid=30643)[0m /tmp/plasma_share30773:
[2m[36m(train_xt pid=30643)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:42: Finished train job normally.
[2m[36m(train_xt pid=30643)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30643)[0m [I 2023-09-13 16:48:42,558] Trial 0 finished with value: 459.7701149425287 and parameters: {'env_pool_size': 3, 'env_pool_wait_nums': 3, 'infer_size': 5}. Best is trial 0 with value: 459.7701149425287.
[2m[36m(train_xt pid=30643)[0m /tmp/plasma30773T0: 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:45: Task: T0         | Train_count:        62 | Steps:     32156 | Elapsed time: 46 seconds
[2m[36m(train_xt pid=30781)[0m mean_env_step_ms:         6.486251	mean_explore_ms:        1380.712161	mean_inference_ms:        3.940405	mean_loop_time_ms:      361.932671
[2m[36m(train_xt pid=30781)[0m mean_prepare_data_ms:     1.449335	mean_restore_model_ms:   28.479209	mean_train_time_ms:      35.268652	mean_wait_model_ms:     2299.422924
[2m[36m(train_xt pid=30781)[0m mean_wait_sample_ms:    317.448676	step_per_second:             694.0	train_loss:             -42.698517	train_reward_avg:         1.083333
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30643)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30643)[0m Instructions for updating:
[2m[36m(train_xt pid=30643)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:49: Task: T0         | Train_count:       122 | Steps:     31449 | Elapsed time: 57 seconds
[2m[36m(train_xt pid=30691)[0m mean_env_step_ms:         3.729392	mean_explore_ms:        817.022361	mean_inference_ms:        2.509405	mean_loop_time_ms:      331.625712
[2m[36m(train_xt pid=30691)[0m mean_prepare_data_ms:     0.881732	mean_restore_model_ms:   11.313627	mean_train_time_ms:      18.717241	mean_wait_model_ms:     1009.838983
[2m[36m(train_xt pid=30691)[0m mean_wait_sample_ms:      304.6103	step_per_second:             546.0	train_loss:             -13.983823	train_reward_avg:         1.388889
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30643)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:50: 
[2m[36m(train_xt pid=30643)[0m **************************************************
[2m[36m(train_xt pid=30643)[0m  XT start work...
[2m[36m(train_xt pid=30643)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_1694594923594203.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=30643)[0m **************************************************
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:50: init learner with:
[2m[36m(train_xt pid=30643)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=30643)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=30643)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=30643)[0m               'agent_num': 1},
[2m[36m(train_xt pid=30643)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=30643)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=30643)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=30643)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=30643)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=30643)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=30643)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=30643)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=30643)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=30643)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=30643)[0m                           'instance_num': 2,
[2m[36m(train_xt pid=30643)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=30643)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=30643)[0m                           'save_model': True,
[2m[36m(train_xt pid=30643)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=30643)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=30643)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30643)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=30643)[0m                                    'model_config': {'LR': 0.002986026,
[2m[36m(train_xt pid=30643)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=30643)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=30643)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=30643)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=30643)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30643)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=30643)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=30643)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=30643)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=30643)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=30643)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30643)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=30643)[0m                                                 84,
[2m[36m(train_xt pid=30643)[0m                                                 4],
[2m[36m(train_xt pid=30643)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=30643)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=30643)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=30643)[0m              'id': 'ImpalaCnnOpt_now_time_1694594923594203',
[2m[36m(train_xt pid=30643)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=30643)[0m 'env_num': 2,
[2m[36m(train_xt pid=30643)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=30643)[0m                         'size': 2,
[2m[36m(train_xt pid=30643)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=30643)[0m                         'vision': False,
[2m[36m(train_xt pid=30643)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=30643)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=30643)[0m             'now_time': '1694594923594203'},
[2m[36m(train_xt pid=30643)[0m 'gpu': -1,
[2m[36m(train_xt pid=30643)[0m 'group_num': 1,
[2m[36m(train_xt pid=30643)[0m 'lock': 1,
[2m[36m(train_xt pid=30643)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30643)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=30643)[0m                        'model_config': {'LR': 0.002986026,
[2m[36m(train_xt pid=30643)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=30643)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=30643)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=30643)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=30643)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30643)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=30643)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=30643)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=30643)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=30643)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=30643)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30643)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=30643)[0m                                     84,
[2m[36m(train_xt pid=30643)[0m                                     4],
[2m[36m(train_xt pid=30643)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=30643)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=30643)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=30643)[0m                'dummy_user',
[2m[36m(train_xt pid=30643)[0m                'dummy_password')],
[2m[36m(train_xt pid=30643)[0m 'speedup': 3,
[2m[36m(train_xt pid=30643)[0m 'start_core': True}
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:50: Init Broker server info:
[2m[36m(train_xt pid=30643)[0m {'recv': {'port': 36546,
[2m[36m(train_xt pid=30643)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=30643)[0m 'send': [{'port': 29804,
[2m[36m(train_xt pid=30643)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:50: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 36546, 29804, '127.0.0.1', 'info')
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:50: launch local broker with lib success
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:51: **********
[2m[36m(train_xt pid=30643)[0m workspace:
[2m[36m(train_xt pid=30643)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_1694594923594203
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30781)[0m /tmp/plasma32280:   
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:53: broker status timeout!
[2m[36m(train_xt pid=30643)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30643)[0m Instructions for updating:
[2m[36m(train_xt pid=30643)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30781)[0m /tmp/plasma_share33161:
[2m[36m(train_xt pid=30781)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:55: Finished train job normally.
[2m[36m(train_xt pid=30781)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m [I 2023-09-13 16:48:55,716] Trial 2 finished with value: 461.09510086455333 and parameters: {'env_pool_size': 4, 'env_pool_wait_nums': 4, 'infer_size': 4}. Best is trial 0 with value: 459.7701149425287.
[2m[36m(train_xt pid=30781)[0m /tmp/plasma33161T0: 
[2m[36m(train_xt pid=30643)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:56: set verbosity in broker: info
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:56: init broker with id-0
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:56: share buf: plasma_store -m 400000000 -s /tmp/plasma_share36092
[2m[36m(train_xt pid=30643)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   self.run()
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:57: init explorer with id: 0, buf_path: /tmp/plasma_share36092
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:57: init agent group for: explore
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:48:58: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=30781)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30781)[0m Instructions for updating:
[2m[36m(train_xt pid=30781)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30691)[0m /tmp/plasma30780:   
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:00: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:00: broker status timeout!
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:00: init explorer with id: 1, buf_path: /tmp/plasma_share36092
[2m[36m(train_xt pid=30691)[0m /tmp/plasma_share31472:
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:01: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=30691)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:02: Finished train job normally.
[2m[36m(train_xt pid=30781)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:02: 
[2m[36m(train_xt pid=30781)[0m **************************************************
[2m[36m(train_xt pid=30781)[0m  XT start work...
[2m[36m(train_xt pid=30781)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945949367490609.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=30781)[0m **************************************************
[2m[36m(train_xt pid=30691)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30691)[0m [I 2023-09-13 16:49:02,705] Trial 1 finished with value: 366.30036630036625 and parameters: {'env_pool_size': 2, 'env_pool_wait_nums': 2, 'infer_size': 3}. Best is trial 1 with value: 366.30036630036625.
[2m[36m(train_xt pid=30691)[0m /tmp/plasma31472T0: 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:03: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:03: init learner with:
[2m[36m(train_xt pid=30781)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=30781)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=30781)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=30781)[0m               'agent_num': 1},
[2m[36m(train_xt pid=30781)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=30781)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=30781)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=30781)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=30781)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=30781)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=30781)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=30781)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=30781)[0m                           'instance_num': 5,
[2m[36m(train_xt pid=30781)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=30781)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=30781)[0m                           'save_model': True,
[2m[36m(train_xt pid=30781)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=30781)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=30781)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30781)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=30781)[0m                                    'model_config': {'LR': 0.004760203,
[2m[36m(train_xt pid=30781)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=30781)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=30781)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=30781)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30781)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=30781)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=30781)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=30781)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=30781)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=30781)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30781)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=30781)[0m                                                 84,
[2m[36m(train_xt pid=30781)[0m                                                 4],
[2m[36m(train_xt pid=30781)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=30781)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=30781)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=30781)[0m              'id': 'ImpalaCnnOpt_now_time_16945949367490609',
[2m[36m(train_xt pid=30781)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=30781)[0m 'env_num': 5,
[2m[36m(train_xt pid=30781)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=30781)[0m                         'size': 3,
[2m[36m(train_xt pid=30781)[0m                         'vector_env_size': 3,
[2m[36m(train_xt pid=30781)[0m                         'vision': False,
[2m[36m(train_xt pid=30781)[0m                         'wait_num': 3},
[2m[36m(train_xt pid=30781)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=30781)[0m             'now_time': '16945949367490609'},
[2m[36m(train_xt pid=30781)[0m 'gpu': -1,
[2m[36m(train_xt pid=30781)[0m 'group_num': 1,
[2m[36m(train_xt pid=30781)[0m 'lock': 1,
[2m[36m(train_xt pid=30781)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30781)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=30781)[0m                        'model_config': {'LR': 0.004760203,
[2m[36m(train_xt pid=30781)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=30781)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=30781)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                                        'episode_limit': 300,
== Status ==
Current time: 2023-09-13 16:48:39 (running for 00:01:18.54)
Memory usage on this node: 24.5/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30643)[0m  30776
[2m[36m(train_xt pid=30643)[0m  31424
[2m[36m(train_xt pid=30643)[0m good
[2m[36m(train_xt pid=30643)[0m log filename ================== /tmp/16945948561220045
[2m[36m(train_xt pid=30643)[0m step_per_second ============ 696.0
[2m[36m(train_xt pid=30643)[0m tune_cost =================== True
[2m[36m(train_xt pid=30643)[0m  31433
[2m[36m(train_xt pid=30643)[0m =======================env_pool_size======================2
[2m[36m(train_xt pid=30643)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=30643)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=30643)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_1694594923594203.yaml
[2m[36m(train_xt pid=30643)[0m run_log ======================== /tmp/test_opt_bys1694594923594203.log
== Status ==
Current time: 2023-09-13 16:48:44 (running for 00:01:23.55)
Memory usage on this node: 22.2/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:48:49 (running for 00:01:28.56)
Memory usage on this node: 22.6/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30643)[0m start_core ======================================== True
[2m[36m(train_xt pid=30643)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=30643)[0m plasma_store -m 1000000000 -s /tmp/plasma36038
[2m[36m(train_xt pid=30643)[0m self.time_record_filename ============= /tmp/1694594923594203
[2m[36m(train_xt pid=30781)[0m  33163
[2m[36m(train_xt pid=30781)[0m  34757
== Status ==
Current time: 2023-09-13 16:48:54 (running for 00:01:33.56)
Memory usage on this node: 23.3/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30781)[0m good
[2m[36m(train_xt pid=30781)[0m log filename ================== /tmp/16945948708345783
[2m[36m(train_xt pid=30781)[0m step_per_second ============ 694.0
[2m[36m(train_xt pid=30781)[0m tune_cost =================== True
[2m[36m(train_xt pid=30781)[0m  34767
[2m[36m(train_xt pid=30781)[0m =======================env_pool_size======================3
[2m[36m(train_xt pid=30781)[0m =======================env_pool_wait_nums======================3
[2m[36m(train_xt pid=30781)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=30781)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945949367490609.yaml
[2m[36m(train_xt pid=30781)[0m run_log ======================== /tmp/test_opt_bys16945949367490609.log
[2m[36m(train_xt pid=30643)[0m plasma_store -m 100000000 -s /tmp/plasma36092T0
== Status ==
Current time: 2023-09-13 16:48:59 (running for 00:01:38.57)
Memory usage on this node: 21.3/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30691)[0m  31474
[2m[36m(train_xt pid=30691)[0m  32585
[2m[36m(train_xt pid=30691)[0m good
[2m[36m(train_xt pid=30691)[0m log filename ================== /tmp/1694594862706202
[2m[36m(train_xt pid=30691)[0m step_per_second ============ 546.0
[2m[36m(train_xt pid=30691)[0m tune_cost =================== True
[2m[36m(train_xt pid=30691)[0m  32594
[2m[36m(train_xt pid=30781)[0m start_core ======================================== True
[2m[36m(train_xt pid=30781)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30781)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=30781)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=30781)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=30781)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=30781)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=30781)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30781)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=30781)[0m                                     84,
[2m[36m(train_xt pid=30781)[0m                                     4],
[2m[36m(train_xt pid=30781)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=30781)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=30781)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=30781)[0m                'dummy_user',
[2m[36m(train_xt pid=30781)[0m                'dummy_password')],
[2m[36m(train_xt pid=30781)[0m 'speedup': 3,
[2m[36m(train_xt pid=30781)[0m 'start_core': True}
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:03: Init Broker server info:
[2m[36m(train_xt pid=30781)[0m {'recv': {'port': 37425,
[2m[36m(train_xt pid=30781)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=30781)[0m 'send': [{'port': 23168,
[2m[36m(train_xt pid=30781)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:03: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 37425, 23168, '127.0.0.1', 'info')
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:03: launch local broker with lib success
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:03: **********
[2m[36m(train_xt pid=30781)[0m workspace:
[2m[36m(train_xt pid=30781)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945949367490609
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30781)[0m Instructions for updating:
[2m[36m(train_xt pid=30781)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30691)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30691)[0m Instructions for updating:
[2m[36m(train_xt pid=30691)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30643)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30643)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   self.run()
[2m[36m(train_xt pid=30643)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:07: Task: T0         | Train_count:         2 | Steps:       556 | Elapsed time: 13 seconds
[2m[36m(train_xt pid=30643)[0m mean_env_step_ms:         2.308801	mean_explore_ms:        663.823366	mean_inference_ms:        2.596674	mean_loop_time_ms:      426.721334
[2m[36m(train_xt pid=30643)[0m mean_prepare_data_ms:     0.822703	mean_restore_model_ms:    49.69275	mean_train_time_ms:     622.872194	mean_wait_model_ms:     2985.226989
[2m[36m(train_xt pid=30643)[0m mean_wait_sample_ms:    3827.720722	step_per_second:              41.0	train_loss:              15.616911	train_reward_avg:              0.0
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30781)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:09: set verbosity in broker: info
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:09: init broker with id-0
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:09: share buf: plasma_store -m 400000000 -s /tmp/plasma_share37279
[2m[36m(train_xt pid=30691)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:09: 
[2m[36m(train_xt pid=30691)[0m **************************************************
[2m[36m(train_xt pid=30691)[0m  XT start work...
[2m[36m(train_xt pid=30691)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945949437426012.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=30691)[0m **************************************************
[2m[36m(train_xt pid=30781)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   self.run()
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:09: init explorer with id: 0, buf_path: /tmp/plasma_share37279
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:09: init agent group for: explore
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:10: init learner with:
[2m[36m(train_xt pid=30691)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=30691)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=30691)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=30691)[0m               'agent_num': 1},
[2m[36m(train_xt pid=30691)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=30691)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=30691)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=30691)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=30691)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=30691)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=30691)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=30691)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=30691)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=30691)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=30691)[0m                           'instance_num': 2,
[2m[36m(train_xt pid=30691)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=30691)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=30691)[0m                           'save_model': True,
[2m[36m(train_xt pid=30691)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=30691)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=30691)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30691)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=30691)[0m                                    'model_config': {'LR': 0.002974385,
[2m[36m(train_xt pid=30691)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=30691)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=30691)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=30691)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=30691)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30691)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=30691)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=30691)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=30691)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=30691)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=30691)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30691)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=30691)[0m                                                 84,
[2m[36m(train_xt pid=30691)[0m                                                 4],
[2m[36m(train_xt pid=30691)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=30691)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=30691)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=30691)[0m              'id': 'ImpalaCnnOpt_now_time_16945949437426012',
[2m[36m(train_xt pid=30691)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=30691)[0m 'env_num': 2,
[2m[36m(train_xt pid=30691)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=30691)[0m                         'size': 2,
[2m[36m(train_xt pid=30691)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=30691)[0m                         'vision': False,
[2m[36m(train_xt pid=30691)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=30691)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=30691)[0m             'now_time': '16945949437426012'},
[2m[36m(train_xt pid=30691)[0m 'gpu': -1,
[2m[36m(train_xt pid=30691)[0m 'group_num': 1,
[2m[36m(train_xt pid=30691)[0m 'lock': 1,
[2m[36m(train_xt pid=30691)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30691)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=30691)[0m                        'model_config': {'LR': 0.002974385,
[2m[36m(train_xt pid=30691)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=30691)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=30691)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=30691)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=30691)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30691)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=30691)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=30691)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=30691)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=30691)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=30691)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30691)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=30691)[0m                                     84,
[2m[36m(train_xt pid=30691)[0m                                     4],
[2m[36m(train_xt pid=30691)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=30691)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=30691)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=30691)[0m                'dummy_user',
[2m[36m(train_xt pid=30691)[0m                'dummy_password')],
[2m[36m(train_xt pid=30691)[0m 'speedup': 3,
[2m[36m(train_xt pid=30691)[0m 'start_core': True}
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:10: Init Broker server info:
[2m[36m(train_xt pid=30691)[0m {'recv': {'port': 29384,
[2m[36m(train_xt pid=30691)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=30691)[0m 'send': [{'port': 39828,
[2m[36m(train_xt pid=30691)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:10: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 29384, 39828, '127.0.0.1', 'info')
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:10: launch local broker with lib success
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:10: **********
[2m[36m(train_xt pid=30691)[0m workspace:
[2m[36m(train_xt pid=30691)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945949437426012
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:11: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:12: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:12: init explorer with id: 1, buf_path: /tmp/plasma_share37279
[2m[36m(train_xt pid=30691)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30691)[0m Instructions for updating:
[2m[36m(train_xt pid=30691)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:14: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:15: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:15: init explorer with id: 2, buf_path: /tmp/plasma_share37279
[2m[36m(train_xt pid=30691)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:15: set verbosity in broker: info
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:15: init broker with id-0
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:15: share buf: plasma_store -m 400000000 -s /tmp/plasma_share38002
[2m[36m(train_xt pid=30691)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=30781)[0m plasma_store -m 1000000000 -s /tmp/plasma36675
[2m[36m(train_xt pid=30781)[0m self.time_record_filename ============= /tmp/16945949367490609
[2m[36m(train_xt pid=30691)[0m =======================env_pool_size======================2
[2m[36m(train_xt pid=30691)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=30691)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=30691)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945949437426012.yaml
[2m[36m(train_xt pid=30691)[0m run_log ======================== /tmp/test_opt_bys16945949437426012.log
== Status ==
Current time: 2023-09-13 16:49:04 (running for 00:01:43.57)
Memory usage on this node: 20.0/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:49:09 (running for 00:01:48.58)
Memory usage on this node: 21.6/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30781)[0m plasma_store -m 100000000 -s /tmp/plasma37279T0
[2m[36m(train_xt pid=30691)[0m start_core ======================================== True
[2m[36m(train_xt pid=30691)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=30691)[0m plasma_store -m 1000000000 -s /tmp/plasma37727
[2m[36m(train_xt pid=30691)[0m self.time_record_filename ============= /tmp/16945949437426012
== Status ==
Current time: 2023-09-13 16:49:14 (running for 00:01:53.58)
Memory usage on this node: 22.7/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30691)[0m plasma_store -m 100000000 -s /tmp/plasma38002T0
== Status ==
Current time: 2023-09-13 16:49:19 (running for 00:01:58.59)
Memory usage on this node: 22.9/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:49:24 (running for 00:02:03.59)
Memory usage on this node: 23.5/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:49:29 (running for 00:02:08.60)
Memory usage on this node: 25.0/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:49:34 (running for 00:02:13.60)
Memory usage on this node: 25.2/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30691)[0m   self.run()
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:16: init explorer with id: 0, buf_path: /tmp/plasma_share38002
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:16: init agent group for: explore
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:17: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:17: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:18: speedup(3): binding env 2 to CPU 3
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:18: init explorer with id: 3, buf_path: /tmp/plasma_share37279
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:19: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:19: init explorer with id: 1, buf_path: /tmp/plasma_share38002
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:20: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:21: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:21: speedup(3): binding env 3 to CPU 4
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:22: init explorer with id: 4, buf_path: /tmp/plasma_share37279
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:22: Task: T0         | Train_count:        42 | Steps:     10990 | Elapsed time: 28 seconds
[2m[36m(train_xt pid=30643)[0m mean_env_step_ms:         2.196369	mean_explore_ms:        574.729264	mean_inference_ms:        2.158222	mean_loop_time_ms:      379.430997
[2m[36m(train_xt pid=30643)[0m mean_prepare_data_ms:     0.787294	mean_restore_model_ms:   15.513092	mean_train_time_ms:      19.378912	mean_wait_model_ms:     897.613138
[2m[36m(train_xt pid=30643)[0m mean_wait_sample_ms:    352.855015	step_per_second:             384.0	train_loss:              44.705753	train_reward_avg:         1.928571
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:22: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:23: explorer-4 start with sync interval-1
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:25: speedup(3): binding env 4 to CPU 5
[2m[36m(train_xt pid=30691)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30691)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   self.run()
[2m[36m(train_xt pid=30691)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:26: Task: T0         | Train_count:         2 | Steps:       714 | Elapsed time: 13 seconds
[2m[36m(train_xt pid=30691)[0m mean_env_step_ms:         2.939758	mean_explore_ms:         757.26378	mean_inference_ms:        2.662376	mean_loop_time_ms:      553.018332
[2m[36m(train_xt pid=30691)[0m mean_prepare_data_ms:     0.952005	mean_restore_model_ms:   55.299282	mean_train_time_ms:      647.22236	mean_wait_model_ms:     2949.897528
[2m[36m(train_xt pid=30691)[0m mean_wait_sample_ms:    3898.362875	step_per_second:              51.0	train_loss:               4.962001	train_reward_avg:              0.0
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30781)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30781)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   self.run()
[2m[36m(train_xt pid=30781)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:28: Task: T0         | Train_count:         0 | Steps:       381 | Elapsed time: 22 seconds
[2m[36m(train_xt pid=30781)[0m mean_env_step_ms:         4.697115	mean_explore_ms:        1151.767683	mean_inference_ms:        3.717753	mean_loop_time_ms:             nan
[2m[36m(train_xt pid=30781)[0m mean_prepare_data_ms:     1.271009	mean_restore_model_ms:   56.731606	mean_train_time_ms:            nan	mean_wait_model_ms:     7699.290276
[2m[36m(train_xt pid=30781)[0m mean_wait_sample_ms:    20686.428308	step_per_second:              16.0	train_loss:              -5.372705	train_reward_avg:              0.0
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:35: Task: T0         | Train_count:        28 | Steps:     11084 | Elapsed time: 29 seconds
[2m[36m(train_xt pid=30781)[0m mean_env_step_ms:         4.537107	mean_explore_ms:        1105.783343	mean_inference_ms:        3.668149	mean_loop_time_ms:      254.955435
[2m[36m(train_xt pid=30781)[0m mean_prepare_data_ms:     1.175809	mean_restore_model_ms:    38.12331	mean_train_time_ms:      28.596342	mean_wait_model_ms:     5137.205809
[2m[36m(train_xt pid=30781)[0m mean_wait_sample_ms:    216.845465	step_per_second:             376.0	train_loss:               7.258783	train_reward_avg:         0.761905
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:40: Task: T0         | Train_count:        82 | Steps:     21166 | Elapsed time: 47 seconds
[2m[36m(train_xt pid=30643)[0m mean_env_step_ms:         2.634492	mean_explore_ms:        641.774196	mean_inference_ms:         2.25523	mean_loop_time_ms:      489.892304
[2m[36m(train_xt pid=30643)[0m mean_prepare_data_ms:     0.826669	mean_restore_model_ms:   11.248937	mean_train_time_ms:      20.028782	mean_wait_model_ms:     632.844081
[2m[36m(train_xt pid=30643)[0m mean_wait_sample_ms:    463.004732	step_per_second:             445.0	train_loss:               7.702188	train_reward_avg:         2.333333
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:41: Task: T0         | Train_count:        56 | Steps:     21641 | Elapsed time: 35 seconds
[2m[36m(train_xt pid=30781)[0m mean_env_step_ms:         4.258874	mean_explore_ms:        1029.143865	mean_inference_ms:        3.452775	mean_loop_time_ms:      228.937781
[2m[36m(train_xt pid=30781)[0m mean_prepare_data_ms:     1.192975	mean_restore_model_ms:   25.950542	mean_train_time_ms:       29.39347	mean_wait_model_ms:     3279.779177
[2m[36m(train_xt pid=30781)[0m mean_wait_sample_ms:    190.247965	step_per_second:             601.0	train_loss:              38.383492	train_reward_avg:         1.111111
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:46: Task: T0         | Train_count:        42 | Steps:     10927 | Elapsed time: 33 seconds
[2m[36m(train_xt pid=30691)[0m mean_env_step_ms:         3.328566	mean_explore_ms:        770.668064	mean_inference_ms:        2.514339	mean_loop_time_ms:      489.582729
[2m[36m(train_xt pid=30691)[0m mean_prepare_data_ms:     0.828743	mean_restore_model_ms:    20.00417	mean_train_time_ms:       21.41974	mean_wait_model_ms:     992.635114
[2m[36m(train_xt pid=30691)[0m mean_wait_sample_ms:    460.149062	step_per_second:             327.0	train_loss:             -33.824745	train_reward_avg:         0.583333
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:48: Task: T0         | Train_count:        82 | Steps:     31667 | Elapsed time: 42 seconds
[2m[36m(train_xt pid=30781)[0m mean_env_step_ms:         4.120545	mean_explore_ms:        990.626529	mean_inference_ms:        3.324411	mean_loop_time_ms:      246.080697
[2m[36m(train_xt pid=30781)[0m mean_prepare_data_ms:     1.098394	mean_restore_model_ms:   22.349536	mean_train_time_ms:      28.204966	mean_wait_model_ms:     2721.649259
[2m[36m(train_xt pid=30781)[0m mean_wait_sample_ms:    208.756089	step_per_second:             744.0	train_loss:             -14.249196	train_reward_avg:         1.044444
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m /tmp/plasma36675:   
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:55: broker status timeout!
[2m[36m(train_xt pid=30781)[0m /tmp/plasma_share37279:
[2m[36m(train_xt pid=30781)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:57: Finished train job normally.
[2m[36m(train_xt pid=30781)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m [I 2023-09-13 16:49:58,224] Trial 4 finished with value: 430.10752688172045 and parameters: {'env_pool_size': 3, 'env_pool_wait_nums': 3, 'infer_size': 5}. Best is trial 1 with value: 366.30036630036625.
[2m[36m(train_xt pid=30781)[0m /tmp/plasma37279T0: 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:49:59: Task: T0         | Train_count:       122 | Steps:     31296 | Elapsed time: 1 minutes, 5 seconds
[2m[36m(train_xt pid=30643)[0m mean_env_step_ms:         2.779575	mean_explore_ms:        660.781132	mean_inference_ms:        2.263143	mean_loop_time_ms:      435.619211
[2m[36m(train_xt pid=30643)[0m mean_prepare_data_ms:      0.88774	mean_restore_model_ms:    9.458542	mean_train_time_ms:      19.139695	mean_wait_model_ms:     516.107811
[2m[36m(train_xt pid=30643)[0m mean_wait_sample_ms:    409.176207	step_per_second:             475.0	train_loss:              16.894743	train_reward_avg:         2.058824
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30781)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30781)[0m Instructions for updating:
[2m[36m(train_xt pid=30781)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:03: Task: T0         | Train_count:        82 | Steps:     21021 | Elapsed time: 51 seconds
[2m[36m(train_xt pid=30691)[0m mean_env_step_ms:          3.17276	mean_explore_ms:        731.215239	mean_inference_ms:        2.387304	mean_loop_time_ms:      422.390366
[2m[36m(train_xt pid=30691)[0m mean_prepare_data_ms:     0.843954	mean_restore_model_ms:   12.849496	mean_train_time_ms:      21.265733	mean_wait_model_ms:     631.798983
[2m[36m(train_xt pid=30691)[0m mean_wait_sample_ms:    392.756188	step_per_second:             410.0	train_loss:             160.575439	train_reward_avg:         0.666667
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30781)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:05: 
[2m[36m(train_xt pid=30781)[0m **************************************************
[2m[36m(train_xt pid=30781)[0m  XT start work...
[2m[36m(train_xt pid=30781)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945949992622192.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=30781)[0m **************************************************
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:06: init learner with:
[2m[36m(train_xt pid=30781)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=30781)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=30781)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=30781)[0m               'agent_num': 1},
[2m[36m(train_xt pid=30781)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=30781)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=30781)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=30781)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=30781)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=30781)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=30781)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=30781)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=30781)[0m                           'instance_num': 2,
[2m[36m(train_xt pid=30781)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=30781)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=30781)[0m                           'save_model': True,
[2m[36m(train_xt pid=30781)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=30781)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=30781)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30781)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=30781)[0m                                    'model_config': {'LR': 0.004760203,
[2m[36m(train_xt pid=30781)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=30781)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=30781)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                                                    'episode_limit': 300,
== Status ==
Current time: 2023-09-13 16:49:39 (running for 00:02:18.61)
Memory usage on this node: 25.3/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:49:44 (running for 00:02:23.62)
Memory usage on this node: 25.3/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:49:49 (running for 00:02:28.62)
Memory usage on this node: 25.4/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:49:54 (running for 00:02:33.63)
Memory usage on this node: 25.4/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30781)[0m  37281
[2m[36m(train_xt pid=30781)[0m  37869
[2m[36m(train_xt pid=30781)[0m good
[2m[36m(train_xt pid=30781)[0m log filename ================== /tmp/16945949367490609
[2m[36m(train_xt pid=30781)[0m step_per_second ============ 744.0
[2m[36m(train_xt pid=30781)[0m tune_cost =================== True
[2m[36m(train_xt pid=30781)[0m  37880
== Status ==
Current time: 2023-09-13 16:49:59 (running for 00:02:38.63)
Memory usage on this node: 23.0/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30781)[0m =======================env_pool_size======================4
[2m[36m(train_xt pid=30781)[0m =======================env_pool_wait_nums======================4
[2m[36m(train_xt pid=30781)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=30781)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945949992622192.yaml
[2m[36m(train_xt pid=30781)[0m run_log ======================== /tmp/test_opt_bys16945949992622192.log
== Status ==
Current time: 2023-09-13 16:50:04 (running for 00:02:43.64)
Memory usage on this node: 23.3/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30781)[0m start_core ======================================== True
[2m[36m(train_xt pid=30781)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=30781)[0m plasma_store -m 1000000000 -s /tmp/plasma40496
[2m[36m(train_xt pid=30781)[0m self.time_record_filename ============= /tmp/16945949992622192
== Status ==
Current time: 2023-09-13 16:50:09 (running for 00:02:48.64)
Memory usage on this node: 24.1/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30781)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30781)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=30781)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=30781)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=30781)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=30781)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=30781)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30781)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=30781)[0m                                                 84,
[2m[36m(train_xt pid=30781)[0m                                                 4],
[2m[36m(train_xt pid=30781)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=30781)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=30781)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=30781)[0m              'id': 'ImpalaCnnOpt_now_time_16945949992622192',
[2m[36m(train_xt pid=30781)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=30781)[0m 'env_num': 2,
[2m[36m(train_xt pid=30781)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=30781)[0m                         'size': 4,
[2m[36m(train_xt pid=30781)[0m                         'vector_env_size': 4,
[2m[36m(train_xt pid=30781)[0m                         'vision': False,
[2m[36m(train_xt pid=30781)[0m                         'wait_num': 4},
[2m[36m(train_xt pid=30781)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=30781)[0m             'now_time': '16945949992622192'},
[2m[36m(train_xt pid=30781)[0m 'gpu': -1,
[2m[36m(train_xt pid=30781)[0m 'group_num': 1,
[2m[36m(train_xt pid=30781)[0m 'lock': 1,
[2m[36m(train_xt pid=30781)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30781)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=30781)[0m                        'model_config': {'LR': 0.004760203,
[2m[36m(train_xt pid=30781)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=30781)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=30781)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=30781)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30781)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=30781)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=30781)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=30781)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=30781)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=30781)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30781)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=30781)[0m                                     84,
[2m[36m(train_xt pid=30781)[0m                                     4],
[2m[36m(train_xt pid=30781)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=30781)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=30781)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=30781)[0m                'dummy_user',
[2m[36m(train_xt pid=30781)[0m                'dummy_password')],
[2m[36m(train_xt pid=30781)[0m 'speedup': 3,
[2m[36m(train_xt pid=30781)[0m 'start_core': True}
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:06: Init Broker server info:
[2m[36m(train_xt pid=30781)[0m {'recv': {'port': 35583,
[2m[36m(train_xt pid=30781)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=30781)[0m 'send': [{'port': 21271,
[2m[36m(train_xt pid=30781)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:06: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 35583, 21271, '127.0.0.1', 'info')
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:06: launch local broker with lib success
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:06: **********
[2m[36m(train_xt pid=30781)[0m workspace:
[2m[36m(train_xt pid=30781)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945949992622192
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30781)[0m Instructions for updating:
[2m[36m(train_xt pid=30781)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30781)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:12: set verbosity in broker: info
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:12: init broker with id-0
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:12: share buf: plasma_store -m 400000000 -s /tmp/plasma_share40553
[2m[36m(train_xt pid=30781)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   self.run()
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:12: init explorer with id: 0, buf_path: /tmp/plasma_share40553
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:12: init agent group for: explore
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:14: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=30643)[0m /tmp/plasma36038:   
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:15: broker status timeout!
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:15: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:15: init explorer with id: 1, buf_path: /tmp/plasma_share40553
[2m[36m(train_xt pid=30643)[0m /tmp/plasma_share36092:
[2m[36m(train_xt pid=30643)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:17: Finished train job normally.
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:17: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=30643)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30643)[0m [I 2023-09-13 16:50:17,899] Trial 3 finished with value: 336.8421052631579 and parameters: {'env_pool_size': 2, 'env_pool_wait_nums': 2, 'infer_size': 2}. Best is trial 3 with value: 336.8421052631579.
[2m[36m(train_xt pid=30643)[0m /tmp/plasma36092T0: 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:18: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:20: Task: T0         | Train_count:       122 | Steps:     31454 | Elapsed time: 1 minutes, 7 seconds
[2m[36m(train_xt pid=30691)[0m mean_env_step_ms:         2.999102	mean_explore_ms:        697.800689	mean_inference_ms:        2.314939	mean_loop_time_ms:      406.685841
[2m[36m(train_xt pid=30691)[0m mean_prepare_data_ms:     0.824118	mean_restore_model_ms:   10.776427	mean_train_time_ms:       21.52344	mean_wait_model_ms:     512.265841
[2m[36m(train_xt pid=30691)[0m mean_wait_sample_ms:    376.405776	step_per_second:             464.0	train_loss:             -28.693583	train_reward_avg:         0.852941
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30643)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30643)[0m Instructions for updating:
[2m[36m(train_xt pid=30643)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30781)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30781)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   self.run()
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:21: Task: T0         | Train_count:         0 | Steps:       381 | Elapsed time: 13 seconds
[2m[36m(train_xt pid=30781)[0m mean_env_step_ms:         3.205698	mean_explore_ms:        912.212968	mean_inference_ms:        3.381674	mean_loop_time_ms:             nan
[2m[36m(train_xt pid=30781)[0m mean_prepare_data_ms:     1.436949	mean_restore_model_ms:   58.145404	mean_train_time_ms:            nan	mean_wait_model_ms:     2885.820627
[2m[36m(train_xt pid=30781)[0m mean_wait_sample_ms:    11140.127659	step_per_second:              28.0	train_loss:             137.434448	train_reward_avg:              0.0
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30643)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:24: 
[2m[36m(train_xt pid=30643)[0m **************************************************
[2m[36m(train_xt pid=30643)[0m  XT start work...
[2m[36m(train_xt pid=30643)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945950189357634.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=30643)[0m **************************************************
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:25: init learner with:
[2m[36m(train_xt pid=30643)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=30643)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=30643)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=30643)[0m               'agent_num': 1},
[2m[36m(train_xt pid=30643)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=30643)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=30643)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=30643)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=30643)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=30643)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=30643)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=30643)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=30643)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=30643)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=30643)[0m                           'instance_num': 3,
[2m[36m(train_xt pid=30643)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=30643)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=30643)[0m                           'save_model': True,
[2m[36m(train_xt pid=30643)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=30643)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=30643)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30643)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=30643)[0m                                    'model_config': {'LR': 0.002986026,
[2m[36m(train_xt pid=30643)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=30643)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=30643)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=30643)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=30643)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30643)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=30643)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=30643)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=30643)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=30643)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=30643)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30643)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=30643)[0m                                                 84,
[2m[36m(train_xt pid=30643)[0m                                                 4],
[2m[36m(train_xt pid=30643)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=30643)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=30643)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=30643)[0m              'id': 'ImpalaCnnOpt_now_time_16945950189357634',
[2m[36m(train_xt pid=30643)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=30643)[0m 'env_num': 3,
[2m[36m(train_xt pid=30643)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=30643)[0m                         'size': 3,
[2m[36m(train_xt pid=30643)[0m                         'vector_env_size': 3,
[2m[36m(train_xt pid=30643)[0m                         'vision': False,
[2m[36m(train_xt pid=30643)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=30643)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=30643)[0m             'now_time': '16945950189357634'},
[2m[36m(train_xt pid=30643)[0m 'gpu': -1,
[2m[36m(train_xt pid=30643)[0m 'group_num': 1,
[2m[36m(train_xt pid=30781)[0m plasma_store -m 100000000 -s /tmp/plasma40553T0
== Status ==
Current time: 2023-09-13 16:50:14 (running for 00:02:53.65)
Memory usage on this node: 24.4/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30643)[0m  36094
[2m[36m(train_xt pid=30643)[0m  36670
[2m[36m(train_xt pid=30643)[0m good
[2m[36m(train_xt pid=30643)[0m log filename ================== /tmp/1694594923594203
[2m[36m(train_xt pid=30643)[0m step_per_second ============ 475.0
[2m[36m(train_xt pid=30643)[0m tune_cost =================== True
[2m[36m(train_xt pid=30643)[0m  36681
[2m[36m(train_xt pid=30643)[0m =======================env_pool_size======================3
[2m[36m(train_xt pid=30643)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=30643)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=30643)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945950189357634.yaml
[2m[36m(train_xt pid=30643)[0m run_log ======================== /tmp/test_opt_bys16945950189357634.log
== Status ==
Current time: 2023-09-13 16:50:19 (running for 00:02:58.65)
Memory usage on this node: 22.7/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:50:24 (running for 00:03:03.66)
Memory usage on this node: 23.9/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30643)[0m start_core ======================================== True
[2m[36m(train_xt pid=30643)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=30643)[0m plasma_store -m 1000000000 -s /tmp/plasma41705
[2m[36m(train_xt pid=30643)[0m self.time_record_filename ============= /tmp/16945950189357634
== Status ==
Current time: 2023-09-13 16:50:29 (running for 00:03:08.67)
Memory usage on this node: 24.7/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30643)[0m plasma_store -m 100000000 -s /tmp/plasma41766T0
== Status ==
Current time: 2023-09-13 16:50:34 (running for 00:03:13.67)
Memory usage on this node: 25.0/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30691)[0m  38168
[2m[36m(train_xt pid=30691)[0m  38993
== Status ==
Current time: 2023-09-13 16:50:39 (running for 00:03:18.68)
Memory usage on this node: 24.1/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30691)[0m good
[2m[36m(train_xt pid=30691)[0m log filename ================== /tmp/16945949437426012
[2m[36m(train_xt pid=30691)[0m step_per_second ============ 464.0
[2m[36m(train_xt pid=30643)[0m 'lock': 1,
[2m[36m(train_xt pid=30643)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30643)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=30643)[0m                        'model_config': {'LR': 0.002986026,
[2m[36m(train_xt pid=30643)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=30643)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=30643)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=30643)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=30643)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30643)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=30643)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=30643)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=30643)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=30643)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=30643)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30643)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=30643)[0m                                     84,
[2m[36m(train_xt pid=30643)[0m                                     4],
[2m[36m(train_xt pid=30643)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=30643)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=30643)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=30643)[0m                'dummy_user',
[2m[36m(train_xt pid=30643)[0m                'dummy_password')],
[2m[36m(train_xt pid=30643)[0m 'speedup': 3,
[2m[36m(train_xt pid=30643)[0m 'start_core': True}
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:25: Init Broker server info:
[2m[36m(train_xt pid=30643)[0m {'recv': {'port': 24807,
[2m[36m(train_xt pid=30643)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=30643)[0m 'send': [{'port': 39779,
[2m[36m(train_xt pid=30643)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:25: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 24807, 39779, '127.0.0.1', 'info')
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:25: launch local broker with lib success
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:25: **********
[2m[36m(train_xt pid=30643)[0m workspace:
[2m[36m(train_xt pid=30643)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945950189357634
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30643)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30643)[0m Instructions for updating:
[2m[36m(train_xt pid=30643)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30643)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:31: set verbosity in broker: info
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:31: init broker with id-0
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:31: share buf: plasma_store -m 400000000 -s /tmp/plasma_share41766
[2m[36m(train_xt pid=30643)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   self.run()
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:32: init explorer with id: 0, buf_path: /tmp/plasma_share41766
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:32: init agent group for: explore
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:34: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=30781)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:34: Task: T0         | Train_count:        20 | Steps:     10673 | Elapsed time: 24 seconds
[2m[36m(train_xt pid=30781)[0m mean_env_step_ms:         3.058592	mean_explore_ms:        831.320941	mean_inference_ms:        3.098118	mean_loop_time_ms:      575.317681
[2m[36m(train_xt pid=30781)[0m mean_prepare_data_ms:     1.498938	mean_restore_model_ms:   31.509936	mean_train_time_ms:      28.070652	mean_wait_model_ms:     1610.44383
[2m[36m(train_xt pid=30781)[0m mean_wait_sample_ms:    536.844158	step_per_second:             431.0	train_loss:              73.231522	train_reward_avg:            0.875
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:35: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:35: init explorer with id: 1, buf_path: /tmp/plasma_share41766
[2m[36m(train_xt pid=30691)[0m /tmp/plasma37727:   
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:37: broker status timeout!
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:37: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=30691)[0m /tmp/plasma_share38002:
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:38: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:38: init explorer with id: 2, buf_path: /tmp/plasma_share41766
[2m[36m(train_xt pid=30691)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:39: Finished train job normally.
[2m[36m(train_xt pid=30691)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30691)[0m [I 2023-09-13 16:50:39,478] Trial 5 finished with value: 344.82758620689657 and parameters: {'env_pool_size': 2, 'env_pool_wait_nums': 2, 'infer_size': 2}. Best is trial 3 with value: 336.8421052631579.
[2m[36m(train_xt pid=30691)[0m /tmp/plasma38002T0: 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:40: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:41: speedup(3): binding env 2 to CPU 3
[2m[36m(train_xt pid=30691)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30691)[0m Instructions for updating:
[2m[36m(train_xt pid=30691)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:44: Task: T0         | Train_count:        40 | Steps:     20884 | Elapsed time: 35 seconds
[2m[36m(train_xt pid=30781)[0m mean_env_step_ms:         3.017977	mean_explore_ms:        800.557772	mean_inference_ms:        2.963677	mean_loop_time_ms:      559.668493
[2m[36m(train_xt pid=30781)[0m mean_prepare_data_ms:     1.469398	mean_restore_model_ms:     22.5571	mean_train_time_ms:      26.643288	mean_wait_model_ms:     1193.001588
[2m[36m(train_xt pid=30781)[0m mean_wait_sample_ms:    524.365556	step_per_second:             581.0	train_loss:               1.514881	train_reward_avg:         1.083333
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30643)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30643)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   self.run()
[2m[36m(train_xt pid=30643)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:45: Task: T0         | Train_count:         4 | Steps:      1241 | Elapsed time: 17 seconds
[2m[36m(train_xt pid=30643)[0m mean_env_step_ms:         2.549084	mean_explore_ms:        714.924216	mean_inference_ms:        2.750848	mean_loop_time_ms:      230.275035
[2m[36m(train_xt pid=30643)[0m mean_prepare_data_ms:     0.846291	mean_restore_model_ms:   51.306725	mean_train_time_ms:     389.363432	mean_wait_model_ms:     3868.852973
[2m[36m(train_xt pid=30643)[0m mean_wait_sample_ms:    3033.428001	step_per_second:              71.0	train_loss:              72.741699	train_reward_avg:              0.0
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30691)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:46: 
[2m[36m(train_xt pid=30691)[0m **************************************************
[2m[36m(train_xt pid=30691)[0m  XT start work...
[2m[36m(train_xt pid=30691)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_169459504051079.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=30691)[0m **************************************************
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:47: init learner with:
[2m[36m(train_xt pid=30691)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=30691)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=30691)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=30691)[0m               'agent_num': 1},
[2m[36m(train_xt pid=30691)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=30691)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=30691)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=30691)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=30691)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=30691)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=30691)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=30691)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=30691)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=30691)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=30691)[0m                           'instance_num': 5,
[2m[36m(train_xt pid=30691)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=30691)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=30691)[0m                           'save_model': True,
[2m[36m(train_xt pid=30691)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=30691)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=30691)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30691)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=30691)[0m                                    'model_config': {'LR': 0.002974385,
[2m[36m(train_xt pid=30691)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=30691)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=30691)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=30691)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=30691)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30691)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=30691)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=30691)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=30691)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=30691)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=30691)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30691)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=30691)[0m                                                 84,
[2m[36m(train_xt pid=30691)[0m                                                 4],
[2m[36m(train_xt pid=30691)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=30691)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=30691)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=30691)[0m              'id': 'ImpalaCnnOpt_now_time_169459504051079',
[2m[36m(train_xt pid=30691)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=30691)[0m 'env_num': 5,
[2m[36m(train_xt pid=30691)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=30691)[0m                         'size': 4,
[2m[36m(train_xt pid=30691)[0m                         'vector_env_size': 4,
[2m[36m(train_xt pid=30691)[0m                         'vision': False,
[2m[36m(train_xt pid=30691)[0m                         'wait_num': 4},
[2m[36m(train_xt pid=30691)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=30691)[0m             'now_time': '169459504051079'},
[2m[36m(train_xt pid=30691)[0m 'gpu': -1,
[2m[36m(train_xt pid=30691)[0m 'group_num': 1,
[2m[36m(train_xt pid=30691)[0m 'lock': 1,
[2m[36m(train_xt pid=30691)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30691)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=30691)[0m                        'model_config': {'LR': 0.002974385,
[2m[36m(train_xt pid=30691)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=30691)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=30691)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=30691)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=30691)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30691)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=30691)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=30691)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=30691)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=30691)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=30691)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30691)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=30691)[0m                                     84,
[2m[36m(train_xt pid=30691)[0m                                     4],
[2m[36m(train_xt pid=30691)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=30691)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=30691)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=30691)[0m                'dummy_user',
[2m[36m(train_xt pid=30691)[0m                'dummy_password')],
[2m[36m(train_xt pid=30691)[0m 'speedup': 3,
[2m[36m(train_xt pid=30691)[0m 'start_core': True}
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:47: Init Broker server info:
[2m[36m(train_xt pid=30691)[0m {'recv': {'port': 28173,
[2m[36m(train_xt pid=30691)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=30691)[0m 'send': [{'port': 20948,
[2m[36m(train_xt pid=30691)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:47: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 28173, 20948, '127.0.0.1', 'info')
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:47: launch local broker with lib success
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:47: **********
[2m[36m(train_xt pid=30691)[0m workspace:
[2m[36m(train_xt pid=30691)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_169459504051079
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30691)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30691)[0m Instructions for updating:
[2m[36m(train_xt pid=30691)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30691)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:53: set verbosity in broker: info
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:53: init broker with id-0
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:53: share buf: plasma_store -m 400000000 -s /tmp/plasma_share43276
[2m[36m(train_xt pid=30691)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   self.run()
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:54: init explorer with id: 0, buf_path: /tmp/plasma_share43276
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:54: init agent group for: explore
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:56: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:57: Task: T0         | Train_count:        44 | Steps:     11456 | Elapsed time: 28 seconds
[2m[36m(train_xt pid=30643)[0m mean_env_step_ms:         2.451859	mean_explore_ms:        658.590847	mean_inference_ms:        2.496114	mean_loop_time_ms:      278.756082
[2m[36m(train_xt pid=30643)[0m mean_prepare_data_ms:     0.886106	mean_restore_model_ms:    25.45815	mean_train_time_ms:        19.4206	mean_wait_model_ms:       1827.341
[2m[36m(train_xt pid=30643)[0m mean_wait_sample_ms:    251.771235	step_per_second:             401.0	train_loss:             -17.813168	train_reward_avg:         0.944444
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:56: Task: T0         | Train_count:        60 | Steps:     31118 | Elapsed time: 47 seconds
[2m[36m(train_xt pid=30781)[0m mean_env_step_ms:         3.173858	mean_explore_ms:         810.46412	mean_inference_ms:        2.925694	mean_loop_time_ms:       601.79354
[2m[36m(train_xt pid=30781)[0m mean_prepare_data_ms:      1.39513	mean_restore_model_ms:   15.733814	mean_train_time_ms:      26.551378	mean_wait_model_ms:     856.933761
[2m[36m(train_xt pid=30781)[0m mean_wait_sample_ms:    567.189693	step_per_second:             648.0	train_loss:              72.829918	train_reward_avg:            1.125
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:57: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:57: init explorer with id: 1, buf_path: /tmp/plasma_share43276
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:50:59: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:00: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:00: init explorer with id: 2, buf_path: /tmp/plasma_share43276
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:02: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:03: speedup(3): binding env 2 to CPU 3
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:03: init explorer with id: 3, buf_path: /tmp/plasma_share43276
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:05: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:06: speedup(3): binding env 3 to CPU 4
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:06: init explorer with id: 4, buf_path: /tmp/plasma_share43276
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:07: Task: T0         | Train_count:        84 | Steps:     21590 | Elapsed time: 39 seconds
[2m[36m(train_xt pid=30643)[0m mean_env_step_ms:         2.433065	mean_explore_ms:        649.788539	mean_inference_ms:        2.471217	mean_loop_time_ms:      288.481414
[2m[36m(train_xt pid=30643)[0m mean_prepare_data_ms:     0.875294	mean_restore_model_ms:   17.394463	mean_train_time_ms:      21.078885	mean_wait_model_ms:     1179.852374
[2m[36m(train_xt pid=30643)[0m mean_wait_sample_ms:    259.885979	step_per_second:             545.0	train_loss:             -28.559109	train_reward_avg:             1.25
[2m[36m(train_xt pid=30691)[0m tune_cost =================== True
[2m[36m(train_xt pid=30691)[0m  39000
[2m[36m(train_xt pid=30691)[0m =======================env_pool_size======================4
[2m[36m(train_xt pid=30691)[0m =======================env_pool_wait_nums======================4
[2m[36m(train_xt pid=30691)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=30691)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_169459504051079.yaml
[2m[36m(train_xt pid=30691)[0m run_log ======================== /tmp/test_opt_bys169459504051079.log
== Status ==
Current time: 2023-09-13 16:50:44 (running for 00:03:23.68)
Memory usage on this node: 24.2/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30691)[0m start_core ======================================== True
[2m[36m(train_xt pid=30691)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=30691)[0m plasma_store -m 1000000000 -s /tmp/plasma43202
[2m[36m(train_xt pid=30691)[0m self.time_record_filename ============= /tmp/169459504051079
== Status ==
Current time: 2023-09-13 16:50:49 (running for 00:03:28.69)
Memory usage on this node: 25.2/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:50:54 (running for 00:03:33.69)
Memory usage on this node: 25.6/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30691)[0m plasma_store -m 100000000 -s /tmp/plasma43276T0
== Status ==
Current time: 2023-09-13 16:50:59 (running for 00:03:38.70)
Memory usage on this node: 25.7/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:51:04 (running for 00:03:43.71)
Memory usage on this node: 25.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30781)[0m  40558
== Status ==
Current time: 2023-09-13 16:51:09 (running for 00:03:48.71)
Memory usage on this node: 26.0/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30781)[0m  41111
[2m[36m(train_xt pid=30781)[0m good
[2m[36m(train_xt pid=30781)[0m log filename ================== /tmp/16945949992622192
[2m[36m(train_xt pid=30781)[0m step_per_second ============ 648.0
[2m[36m(train_xt pid=30781)[0m tune_cost =================== True
[2m[36m(train_xt pid=30781)[0m  41119
[2m[36m(train_xt pid=30781)[0m =======================env_pool_size======================5
[2m[36m(train_xt pid=30781)[0m =======================env_pool_wait_nums======================3
[2m[36m(train_xt pid=30781)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:08: explorer-4 start with sync interval-1
[2m[36m(train_xt pid=30781)[0m /tmp/plasma40496:   
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:09: broker status timeout!
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:09: speedup(3): binding env 4 to CPU 5
[2m[36m(train_xt pid=30781)[0m /tmp/plasma_share40553:
[2m[36m(train_xt pid=30781)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:11: Finished train job normally.
[2m[36m(train_xt pid=30781)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m [I 2023-09-13 16:51:12,193] Trial 6 finished with value: 370.3703703703703 and parameters: {'env_pool_size': 4, 'env_pool_wait_nums': 4, 'infer_size': 2}. Best is trial 3 with value: 336.8421052631579.
[2m[36m(train_xt pid=30781)[0m /tmp/plasma40553T0: 
[2m[36m(train_xt pid=30691)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30691)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   self.run()
[2m[36m(train_xt pid=30691)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:13: Task: T0         | Train_count:         0 | Steps:       509 | Elapsed time: 23 seconds
[2m[36m(train_xt pid=30691)[0m mean_env_step_ms:          5.25092	mean_explore_ms:        1243.852711	mean_inference_ms:        3.853871	mean_loop_time_ms:             nan
[2m[36m(train_xt pid=30691)[0m mean_prepare_data_ms:      1.55592	mean_restore_model_ms:   51.205921	mean_train_time_ms:            nan	mean_wait_model_ms:     7515.248585
[2m[36m(train_xt pid=30691)[0m mean_wait_sample_ms:    20910.267115	step_per_second:              21.0	train_loss:             181.671967	train_reward_avg:              0.0
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30781)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30781)[0m Instructions for updating:
[2m[36m(train_xt pid=30781)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:18: Task: T0         | Train_count:       124 | Steps:     31976 | Elapsed time: 50 seconds
[2m[36m(train_xt pid=30643)[0m mean_env_step_ms:         2.323289	mean_explore_ms:        626.435435	mean_inference_ms:        2.407684	mean_loop_time_ms:      264.930487
[2m[36m(train_xt pid=30643)[0m mean_prepare_data_ms:     0.838351	mean_restore_model_ms:   14.428675	mean_train_time_ms:       20.58382	mean_wait_model_ms:     935.398185
[2m[36m(train_xt pid=30643)[0m mean_wait_sample_ms:    237.370145	step_per_second:             637.0	train_loss:              23.867504	train_reward_avg:          1.27451
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:19: Task: T0         | Train_count:        20 | Steps:     10661 | Elapsed time: 28 seconds
[2m[36m(train_xt pid=30691)[0m mean_env_step_ms:          4.97841	mean_explore_ms:        1175.924629	mean_inference_ms:        3.760454	mean_loop_time_ms:      286.380994
[2m[36m(train_xt pid=30691)[0m mean_prepare_data_ms:     1.610518	mean_restore_model_ms:   34.373999	mean_train_time_ms:      34.837008	mean_wait_model_ms:     5099.930972
[2m[36m(train_xt pid=30691)[0m mean_wait_sample_ms:    239.840651	step_per_second:             369.0	train_loss:               2.404655	train_reward_avg:              0.5
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30781)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:19: 
[2m[36m(train_xt pid=30781)[0m **************************************************
[2m[36m(train_xt pid=30781)[0m  XT start work...
[2m[36m(train_xt pid=30781)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945950732302103.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=30781)[0m **************************************************
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:20: init learner with:
[2m[36m(train_xt pid=30781)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=30781)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=30781)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=30781)[0m               'agent_num': 1},
[2m[36m(train_xt pid=30781)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=30781)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=30781)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=30781)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=30781)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=30781)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=30781)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=30781)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=30781)[0m                           'instance_num': 5,
[2m[36m(train_xt pid=30781)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=30781)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=30781)[0m                           'save_model': True,
[2m[36m(train_xt pid=30781)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=30781)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=30781)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30781)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=30781)[0m                                    'model_config': {'LR': 0.004760203,
[2m[36m(train_xt pid=30781)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=30781)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=30781)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=30781)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30781)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=30781)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=30781)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=30781)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=30781)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=30781)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30781)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=30781)[0m                                                 84,
[2m[36m(train_xt pid=30781)[0m                                                 4],
[2m[36m(train_xt pid=30781)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=30781)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=30781)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=30781)[0m              'id': 'ImpalaCnnOpt_now_time_16945950732302103',
[2m[36m(train_xt pid=30781)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=30781)[0m 'env_num': 5,
[2m[36m(train_xt pid=30781)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=30781)[0m                         'size': 5,
[2m[36m(train_xt pid=30781)[0m                         'vector_env_size': 5,
[2m[36m(train_xt pid=30781)[0m                         'vision': False,
[2m[36m(train_xt pid=30781)[0m                         'wait_num': 3},
[2m[36m(train_xt pid=30781)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=30781)[0m             'now_time': '16945950732302103'},
[2m[36m(train_xt pid=30781)[0m 'gpu': -1,
[2m[36m(train_xt pid=30781)[0m 'group_num': 1,
[2m[36m(train_xt pid=30781)[0m 'lock': 1,
[2m[36m(train_xt pid=30781)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30781)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=30781)[0m                        'model_config': {'LR': 0.004760203,
[2m[36m(train_xt pid=30781)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=30781)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=30781)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=30781)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30781)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=30781)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=30781)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=30781)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=30781)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=30781)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30781)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=30781)[0m                                     84,
[2m[36m(train_xt pid=30781)[0m                                     4],
[2m[36m(train_xt pid=30781)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=30781)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=30781)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=30781)[0m                'dummy_user',
[2m[36m(train_xt pid=30781)[0m                'dummy_password')],
[2m[36m(train_xt pid=30781)[0m 'speedup': 3,
[2m[36m(train_xt pid=30781)[0m 'start_core': True}
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:20: Init Broker server info:
[2m[36m(train_xt pid=30781)[0m {'recv': {'port': 36829,
[2m[36m(train_xt pid=30781)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=30781)[0m 'send': [{'port': 33097,
[2m[36m(train_xt pid=30781)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:20: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 36829, 33097, '127.0.0.1', 'info')
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:20: launch local broker with lib success
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:20: **********
[2m[36m(train_xt pid=30781)[0m workspace:
[2m[36m(train_xt pid=30781)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945950732302103
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30781)[0m Instructions for updating:
[2m[36m(train_xt pid=30781)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:25: Task: T0         | Train_count:        40 | Steps:     20895 | Elapsed time: 34 seconds
[2m[36m(train_xt pid=30691)[0m mean_env_step_ms:         4.714492	mean_explore_ms:        1107.010733	mean_inference_ms:        3.562864	mean_loop_time_ms:      281.299138
[2m[36m(train_xt pid=30691)[0m mean_prepare_data_ms:     1.606762	mean_restore_model_ms:   26.471723	mean_train_time_ms:      31.762302	mean_wait_model_ms:     3837.124391
[2m[36m(train_xt pid=30691)[0m mean_wait_sample_ms:    239.343762	step_per_second:             605.0	train_loss:              27.247417	train_reward_avg:         0.704545
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30781)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:26: set verbosity in broker: info
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:26: init broker with id-0
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:26: share buf: plasma_store -m 400000000 -s /tmp/plasma_share45338
[2m[36m(train_xt pid=30781)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   self.run()
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:27: init explorer with id: 0, buf_path: /tmp/plasma_share45338
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:27: init agent group for: explore
[2m[36m(train_xt pid=30643)[0m /tmp/plasma41705:   
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:28: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:29: broker status timeout!
[2m[36m(train_xt pid=30643)[0m /tmp/plasma_share41766:
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:30: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:30: init explorer with id: 1, buf_path: /tmp/plasma_share45338
[2m[36m(train_xt pid=30781)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945950732302103.yaml
[2m[36m(train_xt pid=30781)[0m run_log ======================== /tmp/test_opt_bys16945950732302103.log
== Status ==
Current time: 2023-09-13 16:51:14 (running for 00:03:53.72)
Memory usage on this node: 25.2/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:51:19 (running for 00:03:58.72)
Memory usage on this node: 25.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30781)[0m start_core ======================================== True
[2m[36m(train_xt pid=30781)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=30781)[0m plasma_store -m 1000000000 -s /tmp/plasma45275
[2m[36m(train_xt pid=30781)[0m self.time_record_filename ============= /tmp/16945950732302103
== Status ==
Current time: 2023-09-13 16:51:24 (running for 00:04:03.73)
Memory usage on this node: 26.6/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30781)[0m plasma_store -m 100000000 -s /tmp/plasma45338T0
[2m[36m(train_xt pid=30643)[0m  41773
== Status ==
Current time: 2023-09-13 16:51:29 (running for 00:04:08.73)
Memory usage on this node: 26.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30643)[0m  42325
[2m[36m(train_xt pid=30643)[0m good
[2m[36m(train_xt pid=30643)[0m log filename ================== /tmp/16945950189357634
[2m[36m(train_xt pid=30643)[0m step_per_second ============ 637.0
[2m[36m(train_xt pid=30643)[0m tune_cost =================== True
[2m[36m(train_xt pid=30643)[0m  42332
[2m[36m(train_xt pid=30643)[0m =======================env_pool_size======================2
[2m[36m(train_xt pid=30643)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=30643)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=30643)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945950925582104.yaml
[2m[36m(train_xt pid=30643)[0m run_log ======================== /tmp/test_opt_bys16945950925582104.log
== Status ==
Current time: 2023-09-13 16:51:34 (running for 00:04:13.74)
Memory usage on this node: 25.1/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30691)[0m  43280
[2m[36m(train_xt pid=30691)[0m  43834
[2m[36m(train_xt pid=30691)[0m good
[2m[36m(train_xt pid=30691)[0m log filename ================== /tmp/169459504051079
[2m[36m(train_xt pid=30691)[0m step_per_second ============ 781.0
[2m[36m(train_xt pid=30691)[0m tune_cost =================== True
== Status ==
Current time: 2023-09-13 16:51:39 (running for 00:04:18.74)
Memory usage on this node: 23.1/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:30: Task: T0         | Train_count:        60 | Steps:     31151 | Elapsed time: 39 seconds
[2m[36m(train_xt pid=30691)[0m mean_env_step_ms:         4.671714	mean_explore_ms:        1093.836638	mean_inference_ms:        3.536468	mean_loop_time_ms:      268.819571
[2m[36m(train_xt pid=30691)[0m mean_prepare_data_ms:     1.608157	mean_restore_model_ms:   23.350917	mean_train_time_ms:      33.096766	mean_wait_model_ms:     3304.408825
[2m[36m(train_xt pid=30691)[0m mean_wait_sample_ms:     226.57361	step_per_second:             781.0	train_loss:              44.491478	train_reward_avg:         0.923077
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30643)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:31: Finished train job normally.
[2m[36m(train_xt pid=30643)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30643)[0m [I 2023-09-13 16:51:31,520] Trial 7 finished with value: 376.76609105180535 and parameters: {'env_pool_size': 3, 'env_pool_wait_nums': 2, 'infer_size': 3}. Best is trial 3 with value: 336.8421052631579.
[2m[36m(train_xt pid=30643)[0m /tmp/plasma41766T0: 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:31: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:33: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:33: init explorer with id: 2, buf_path: /tmp/plasma_share45338
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:35: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=30643)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30643)[0m Instructions for updating:
[2m[36m(train_xt pid=30643)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:36: speedup(3): binding env 2 to CPU 3
[2m[36m(train_xt pid=30691)[0m /tmp/plasma43202:   
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:36: init explorer with id: 3, buf_path: /tmp/plasma_share45338
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:36: broker status timeout!
[2m[36m(train_xt pid=30691)[0m /tmp/plasma_share43276:
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:38: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=30643)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:38: 
[2m[36m(train_xt pid=30643)[0m **************************************************
[2m[36m(train_xt pid=30643)[0m  XT start work...
[2m[36m(train_xt pid=30643)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945950925582104.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=30643)[0m **************************************************
[2m[36m(train_xt pid=30691)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:38: Finished train job normally.
[2m[36m(train_xt pid=30691)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30691)[0m [I 2023-09-13 16:51:39,234] Trial 8 finished with value: 460.94750320102435 and parameters: {'env_pool_size': 4, 'env_pool_wait_nums': 4, 'infer_size': 5}. Best is trial 3 with value: 336.8421052631579.
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:39: init learner with:
[2m[36m(train_xt pid=30643)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=30643)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=30643)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=30643)[0m               'agent_num': 1},
[2m[36m(train_xt pid=30643)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=30643)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=30643)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=30643)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=30643)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=30643)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=30643)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=30643)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=30643)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=30643)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=30643)[0m                           'instance_num': 2,
[2m[36m(train_xt pid=30643)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=30643)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=30643)[0m                           'save_model': True,
[2m[36m(train_xt pid=30643)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=30643)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=30643)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30643)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=30643)[0m                                    'model_config': {'LR': 0.002986026,
[2m[36m(train_xt pid=30643)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=30643)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=30643)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=30643)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=30643)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30643)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=30643)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=30643)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=30643)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=30643)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=30643)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30643)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=30643)[0m                                                 84,
[2m[36m(train_xt pid=30643)[0m                                                 4],
[2m[36m(train_xt pid=30643)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=30643)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=30643)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=30643)[0m              'id': 'ImpalaCnnOpt_now_time_16945950925582104',
[2m[36m(train_xt pid=30643)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=30643)[0m 'env_num': 2,
[2m[36m(train_xt pid=30643)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=30643)[0m                         'size': 2,
[2m[36m(train_xt pid=30643)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=30643)[0m                         'vision': False,
[2m[36m(train_xt pid=30643)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=30643)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=30643)[0m             'now_time': '16945950925582104'},
[2m[36m(train_xt pid=30643)[0m 'gpu': -1,
[2m[36m(train_xt pid=30643)[0m 'group_num': 1,
[2m[36m(train_xt pid=30643)[0m 'lock': 1,
[2m[36m(train_xt pid=30643)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30643)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=30643)[0m                        'model_config': {'LR': 0.002986026,
[2m[36m(train_xt pid=30643)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=30643)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=30643)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=30643)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=30643)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30643)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=30643)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=30643)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=30643)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=30643)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=30643)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30643)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=30643)[0m                                     84,
[2m[36m(train_xt pid=30643)[0m                                     4],
[2m[36m(train_xt pid=30643)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=30643)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=30643)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=30643)[0m                'dummy_user',
[2m[36m(train_xt pid=30643)[0m                'dummy_password')],
[2m[36m(train_xt pid=30643)[0m 'speedup': 3,
[2m[36m(train_xt pid=30643)[0m 'start_core': True}
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:39: Init Broker server info:
[2m[36m(train_xt pid=30643)[0m {'recv': {'port': 22451,
[2m[36m(train_xt pid=30643)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=30643)[0m 'send': [{'port': 27087,
[2m[36m(train_xt pid=30643)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:39: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 22451, 27087, '127.0.0.1', 'info')
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:39: launch local broker with lib success
[2m[36m(train_xt pid=30691)[0m /tmp/plasma43276T0: 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:39: **********
[2m[36m(train_xt pid=30643)[0m workspace:
[2m[36m(train_xt pid=30643)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945950925582104
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:39: speedup(3): binding env 3 to CPU 4
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:39: init explorer with id: 4, buf_path: /tmp/plasma_share45338
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:41: explorer-4 start with sync interval-1
[2m[36m(train_xt pid=30643)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30643)[0m Instructions for updating:
[2m[36m(train_xt pid=30643)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30691)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30691)[0m Instructions for updating:
[2m[36m(train_xt pid=30691)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:42: speedup(3): binding env 4 to CPU 5
[2m[36m(train_xt pid=30643)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:45: set verbosity in broker: info
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:45: init broker with id-0
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:45: share buf: plasma_store -m 400000000 -s /tmp/plasma_share47107
[2m[36m(train_xt pid=30643)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   self.run()
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:45: init explorer with id: 0, buf_path: /tmp/plasma_share47107
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:45: init agent group for: explore
[2m[36m(train_xt pid=30691)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:46: 
[2m[36m(train_xt pid=30691)[0m **************************************************
[2m[36m(train_xt pid=30691)[0m  XT start work...
[2m[36m(train_xt pid=30691)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945951002764938.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=30691)[0m **************************************************
[2m[36m(train_xt pid=30781)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30781)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   self.run()
[2m[36m(train_xt pid=30781)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:47: Task: T0         | Train_count:         6 | Steps:      2666 | Elapsed time: 23 seconds
[2m[36m(train_xt pid=30781)[0m mean_env_step_ms:           2.4565	mean_explore_ms:        738.939285	mean_inference_ms:        2.933284	mean_loop_time_ms:      173.407634
[2m[36m(train_xt pid=30781)[0m mean_prepare_data_ms:      1.08351	mean_restore_model_ms:   42.621652	mean_train_time_ms:     295.243842	mean_wait_model_ms:     6749.401371
[2m[36m(train_xt pid=30781)[0m mean_wait_sample_ms:    3062.341928	step_per_second:             112.0	train_loss:             -12.386148	train_reward_avg:              0.0
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:47: init learner with:
[2m[36m(train_xt pid=30691)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=30691)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=30691)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=30691)[0m               'agent_num': 1},
[2m[36m(train_xt pid=30691)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=30691)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=30691)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=30691)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=30691)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=30691)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=30691)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=30691)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=30691)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=30691)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=30691)[0m                           'instance_num': 5,
[2m[36m(train_xt pid=30691)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=30691)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=30691)[0m                           'save_model': True,
[2m[36m(train_xt pid=30691)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=30691)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=30691)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30691)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=30691)[0m                                    'model_config': {'LR': 0.002974385,
[2m[36m(train_xt pid=30691)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=30691)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=30691)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=30691)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=30691)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30691)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=30691)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=30691)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=30691)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=30691)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=30691)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30691)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=30691)[0m                                                 84,
[2m[36m(train_xt pid=30691)[0m                                                 4],
[2m[36m(train_xt pid=30691)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=30691)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=30691)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=30691)[0m              'id': 'ImpalaCnnOpt_now_time_16945951002764938',
[2m[36m(train_xt pid=30691)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=30691)[0m 'env_num': 5,
[2m[36m(train_xt pid=30691)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=30691)[0m                         'size': 2,
[2m[36m(train_xt pid=30691)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=30691)[0m                         'vision': False,
[2m[36m(train_xt pid=30691)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=30691)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=30691)[0m             'now_time': '16945951002764938'},
[2m[36m(train_xt pid=30691)[0m 'gpu': -1,
[2m[36m(train_xt pid=30691)[0m 'group_num': 1,
[2m[36m(train_xt pid=30691)[0m 'lock': 1,
[2m[36m(train_xt pid=30691)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30691)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=30691)[0m                        'model_config': {'LR': 0.002974385,
[2m[36m(train_xt pid=30691)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=30691)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=30691)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=30691)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=30691)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30691)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=30691)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=30691)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=30691)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=30691)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=30691)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30691)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=30691)[0m                                     84,
[2m[36m(train_xt pid=30691)[0m                                     4],
[2m[36m(train_xt pid=30691)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=30691)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=30691)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=30691)[0m                'dummy_user',
[2m[36m(train_xt pid=30691)[0m                'dummy_password')],
[2m[36m(train_xt pid=30691)[0m 'speedup': 3,
[2m[36m(train_xt pid=30691)[0m 'start_core': True}
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:47: Init Broker server info:
[2m[36m(train_xt pid=30691)[0m {'recv': {'port': 34233,
[2m[36m(train_xt pid=30691)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=30691)[0m 'send': [{'port': 29487,
[2m[36m(train_xt pid=30691)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:47: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 34233, 29487, '127.0.0.1', 'info')
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:47: launch local broker with lib success
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:47: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:47: **********
[2m[36m(train_xt pid=30691)[0m workspace:
[2m[36m(train_xt pid=30691)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945951002764938
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:48: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:48: init explorer with id: 1, buf_path: /tmp/plasma_share47107
[2m[36m(train_xt pid=30691)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30691)[0m Instructions for updating:
[2m[36m(train_xt pid=30691)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:50: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:51: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:51: Task: T0         | Train_count:        34 | Steps:     13285 | Elapsed time: 28 seconds
[2m[36m(train_xt pid=30781)[0m mean_env_step_ms:         2.346942	mean_explore_ms:        695.365747	mean_inference_ms:        2.780092	mean_loop_time_ms:      189.008641
[2m[36m(train_xt pid=30781)[0m mean_prepare_data_ms:     1.121485	mean_restore_model_ms:   29.913161	mean_train_time_ms:      32.319832	mean_wait_model_ms:     4612.132019
[2m[36m(train_xt pid=30781)[0m mean_wait_sample_ms:    147.795606	step_per_second:             466.0	train_loss:               9.585037	train_reward_avg:              0.9
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30691)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:53: set verbosity in broker: info
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:53: init broker with id-0
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:53: share buf: plasma_store -m 400000000 -s /tmp/plasma_share48294
[2m[36m(train_xt pid=30691)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   self.run()
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:53: init explorer with id: 0, buf_path: /tmp/plasma_share48294
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:53: init agent group for: explore
[2m[36m(train_xt pid=30643)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30643)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   self.run()
[2m[36m(train_xt pid=30643)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:54: Task: T0         | Train_count:         0 | Steps:       253 | Elapsed time: 12 seconds
[2m[36m(train_xt pid=30643)[0m mean_env_step_ms:         2.869742	mean_explore_ms:         744.07661	mean_inference_ms:        2.637465	mean_loop_time_ms:             nan
[2m[36m(train_xt pid=30643)[0m mean_prepare_data_ms:     0.674963	mean_restore_model_ms:   59.609771	mean_train_time_ms:            nan	mean_wait_model_ms:     2911.125779
[2m[36m(train_xt pid=30643)[0m mean_wait_sample_ms:    10826.002359	step_per_second:              19.0	train_loss:               -3.52504	train_reward_avg:              0.0
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:55: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:56: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:57: init explorer with id: 1, buf_path: /tmp/plasma_share48294
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:57: Task: T0         | Train_count:        60 | Steps:     23328 | Elapsed time: 33 seconds
[2m[36m(train_xt pid=30781)[0m mean_env_step_ms:         2.268803	mean_explore_ms:        673.963382	mean_inference_ms:        2.736413	mean_loop_time_ms:      185.413766
[2m[36m(train_xt pid=30781)[0m mean_prepare_data_ms:     1.131153	mean_restore_model_ms:   22.512583	mean_train_time_ms:      33.237815	mean_wait_model_ms:     3286.901657
[2m[36m(train_xt pid=30781)[0m mean_wait_sample_ms:    142.756796	step_per_second:             687.0	train_loss:               8.710662	train_reward_avg:             1.35
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:51:58: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:00: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:00: init explorer with id: 2, buf_path: /tmp/plasma_share48294
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:02: explorer-2 start with sync interval-1
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:02: Task: T0         | Train_count:        86 | Steps:     33407 | Elapsed time: 38 seconds
[2m[36m(train_xt pid=30781)[0m mean_env_step_ms:         2.229731	mean_explore_ms:        668.918861	mean_inference_ms:        2.748194	mean_loop_time_ms:       190.75774
[2m[36m(train_xt pid=30781)[0m mean_prepare_data_ms:     1.202714	mean_restore_model_ms:   18.653168	mean_train_time_ms:      36.876142	mean_wait_model_ms:      2465.9489
[2m[36m(train_xt pid=30781)[0m mean_wait_sample_ms:    145.472121	step_per_second:             860.0	train_loss:             -45.501717	train_reward_avg:         1.384615
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:03: speedup(3): binding env 2 to CPU 3
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:03: init explorer with id: 3, buf_path: /tmp/plasma_share48294
[2m[36m(train_xt pid=30643)[0m start_core ======================================== True
[2m[36m(train_xt pid=30643)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=30691)[0m  43845
[2m[36m(train_xt pid=30643)[0m plasma_store -m 1000000000 -s /tmp/plasma46487
[2m[36m(train_xt pid=30643)[0m self.time_record_filename ============= /tmp/16945950925582104
[2m[36m(train_xt pid=30691)[0m =======================env_pool_size======================2
[2m[36m(train_xt pid=30691)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=30691)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=30691)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945951002764938.yaml
[2m[36m(train_xt pid=30691)[0m run_log ======================== /tmp/test_opt_bys16945951002764938.log
== Status ==
Current time: 2023-09-13 16:51:44 (running for 00:04:23.75)
Memory usage on this node: 24.7/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30643)[0m plasma_store -m 100000000 -s /tmp/plasma47107T0
[2m[36m(train_xt pid=30691)[0m start_core ======================================== True
[2m[36m(train_xt pid=30691)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=30691)[0m plasma_store -m 1000000000 -s /tmp/plasma47576
[2m[36m(train_xt pid=30691)[0m self.time_record_filename ============= /tmp/16945951002764938
== Status ==
Current time: 2023-09-13 16:51:49 (running for 00:04:28.75)
Memory usage on this node: 26.1/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30691)[0m plasma_store -m 100000000 -s /tmp/plasma48294T0
== Status ==
Current time: 2023-09-13 16:51:54 (running for 00:04:33.76)
Memory usage on this node: 27.2/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:51:59 (running for 00:04:38.77)
Memory usage on this node: 27.5/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:52:04 (running for 00:04:43.77)
Memory usage on this node: 27.7/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30781)[0m  45343
[2m[36m(train_xt pid=30781)[0m  45900
== Status ==
Current time: 2023-09-13 16:52:09 (running for 00:04:48.78)
Memory usage on this node: 27.7/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30781)[0m good
[2m[36m(train_xt pid=30781)[0m log filename ================== /tmp/16945950732302103
[2m[36m(train_xt pid=30781)[0m step_per_second ============ 860.0
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:05: explorer-3 start with sync interval-1
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:06: speedup(3): binding env 3 to CPU 4
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:06: init explorer with id: 4, buf_path: /tmp/plasma_share48294
[2m[36m(train_xt pid=30781)[0m /tmp/plasma45275:   
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:07: broker status timeout!
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:08: explorer-4 start with sync interval-1
[2m[36m(train_xt pid=30781)[0m /tmp/plasma_share45338:
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:09: speedup(3): binding env 4 to CPU 5
[2m[36m(train_xt pid=30781)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:09: Finished train job normally.
[2m[36m(train_xt pid=30781)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m [I 2023-09-13 16:52:10,238] Trial 9 finished with value: 465.1162790697674 and parameters: {'env_pool_size': 5, 'env_pool_wait_nums': 3, 'infer_size': 5}. Best is trial 3 with value: 336.8421052631579.
[2m[36m(train_xt pid=30781)[0m /tmp/plasma45338T0: 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:11: Task: T0         | Train_count:        40 | Steps:     10434 | Elapsed time: 29 seconds
[2m[36m(train_xt pid=30643)[0m mean_env_step_ms:         2.602154	mean_explore_ms:        647.863422	mean_inference_ms:        2.302633	mean_loop_time_ms:      401.112914
[2m[36m(train_xt pid=30643)[0m mean_prepare_data_ms:     0.838685	mean_restore_model_ms:   20.653146	mean_train_time_ms:      17.658436	mean_wait_model_ms:     980.495214
[2m[36m(train_xt pid=30643)[0m mean_wait_sample_ms:    376.450515	step_per_second:             354.0	train_loss:              10.826955	train_reward_avg:         1.357143
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30691)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30691)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   self.run()
[2m[36m(train_xt pid=30691)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:12: Task: T0         | Train_count:         2 | Steps:       637 | Elapsed time: 22 seconds
[2m[36m(train_xt pid=30691)[0m mean_env_step_ms:          4.56784	mean_explore_ms:        988.732672	mean_inference_ms:         2.86015	mean_loop_time_ms:       46.502233
[2m[36m(train_xt pid=30691)[0m mean_prepare_data_ms:     0.715176	mean_restore_model_ms:   58.969784	mean_train_time_ms:      649.31035	mean_wait_model_ms:     7593.696594
[2m[36m(train_xt pid=30691)[0m mean_wait_sample_ms:    6920.350869	step_per_second:              27.0	train_loss:              -1.966582	train_reward_avg:              0.0
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30781)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30781)[0m Instructions for updating:
[2m[36m(train_xt pid=30781)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30781)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:17: 
[2m[36m(train_xt pid=30781)[0m **************************************************
[2m[36m(train_xt pid=30781)[0m  XT start work...
[2m[36m(train_xt pid=30781)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945951312742183.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=30781)[0m **************************************************
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:18: init learner with:
[2m[36m(train_xt pid=30781)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=30781)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=30781)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=30781)[0m               'agent_num': 1},
[2m[36m(train_xt pid=30781)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=30781)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=30781)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=30781)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=30781)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=30781)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=30781)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=30781)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=30781)[0m                           'instance_num': 2,
[2m[36m(train_xt pid=30781)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=30781)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=30781)[0m                           'save_model': True,
[2m[36m(train_xt pid=30781)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=30781)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=30781)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30781)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=30781)[0m                                    'model_config': {'LR': 0.004760203,
[2m[36m(train_xt pid=30781)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=30781)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=30781)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=30781)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30781)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=30781)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=30781)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=30781)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=30781)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=30781)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30781)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=30781)[0m                                                 84,
[2m[36m(train_xt pid=30781)[0m                                                 4],
[2m[36m(train_xt pid=30781)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=30781)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=30781)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=30781)[0m              'id': 'ImpalaCnnOpt_now_time_16945951312742183',
[2m[36m(train_xt pid=30781)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=30781)[0m 'env_num': 2,
[2m[36m(train_xt pid=30781)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=30781)[0m                         'size': 2,
[2m[36m(train_xt pid=30781)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=30781)[0m                         'vision': False,
[2m[36m(train_xt pid=30781)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=30781)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=30781)[0m             'now_time': '16945951312742183'},
[2m[36m(train_xt pid=30781)[0m 'gpu': -1,
[2m[36m(train_xt pid=30781)[0m 'group_num': 1,
[2m[36m(train_xt pid=30781)[0m 'lock': 1,
[2m[36m(train_xt pid=30781)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30781)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=30781)[0m                        'model_config': {'LR': 0.004760203,
[2m[36m(train_xt pid=30781)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=30781)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=30781)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=30781)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30781)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=30781)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=30781)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=30781)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=30781)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=30781)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30781)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=30781)[0m                                     84,
[2m[36m(train_xt pid=30781)[0m                                     4],
[2m[36m(train_xt pid=30781)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=30781)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=30781)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=30781)[0m                'dummy_user',
[2m[36m(train_xt pid=30781)[0m                'dummy_password')],
[2m[36m(train_xt pid=30781)[0m 'speedup': 3,
[2m[36m(train_xt pid=30781)[0m 'start_core': True}
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:18: Init Broker server info:
[2m[36m(train_xt pid=30781)[0m {'recv': {'port': 21127,
[2m[36m(train_xt pid=30781)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=30781)[0m 'send': [{'port': 39759,
[2m[36m(train_xt pid=30781)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:18: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 21127, 39759, '127.0.0.1', 'info')
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:18: launch local broker with lib success
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:18: **********
[2m[36m(train_xt pid=30781)[0m workspace:
[2m[36m(train_xt pid=30781)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945951312742183
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:20: Task: T0         | Train_count:        42 | Steps:     10753 | Elapsed time: 30 seconds
[2m[36m(train_xt pid=30691)[0m mean_env_step_ms:         4.138238	mean_explore_ms:        885.191441	mean_inference_ms:        2.575675	mean_loop_time_ms:      191.648591
[2m[36m(train_xt pid=30691)[0m mean_prepare_data_ms:     0.877321	mean_restore_model_ms:   31.966877	mean_train_time_ms:      18.565857	mean_wait_model_ms:     4094.150424
[2m[36m(train_xt pid=30691)[0m mean_wait_sample_ms:    164.465678	step_per_second:             350.0	train_loss:               0.146173	train_reward_avg:         0.555556
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30781)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30781)[0m Instructions for updating:
[2m[36m(train_xt pid=30781)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30781)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:24: set verbosity in broker: info
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:24: init broker with id-0
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:24: share buf: plasma_store -m 400000000 -s /tmp/plasma_share50657
[2m[36m(train_xt pid=30781)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   self.run()
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:25: init explorer with id: 0, buf_path: /tmp/plasma_share50657
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:25: init agent group for: explore
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:26: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:27: Task: T0         | Train_count:        80 | Steps:     20662 | Elapsed time: 45 seconds
[2m[36m(train_xt pid=30643)[0m mean_env_step_ms:         2.575337	mean_explore_ms:        632.267733	mean_inference_ms:         2.23049	mean_loop_time_ms:       414.30372
[2m[36m(train_xt pid=30643)[0m mean_prepare_data_ms:     0.815666	mean_restore_model_ms:   13.788978	mean_train_time_ms:      18.411756	mean_wait_model_ms:     654.510538
[2m[36m(train_xt pid=30643)[0m mean_wait_sample_ms:    388.847482	step_per_second:             451.0	train_loss:              -12.27734	train_reward_avg:         1.458333
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30781)[0m tune_cost =================== True
[2m[36m(train_xt pid=30781)[0m  45908
[2m[36m(train_xt pid=30781)[0m =======================env_pool_size======================2
[2m[36m(train_xt pid=30781)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=30781)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=30781)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945951312742183.yaml
[2m[36m(train_xt pid=30781)[0m run_log ======================== /tmp/test_opt_bys16945951312742183.log
== Status ==
Current time: 2023-09-13 16:52:14 (running for 00:04:53.79)
Memory usage on this node: 26.5/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30781)[0m start_core ======================================== True
[2m[36m(train_xt pid=30781)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=30781)[0m plasma_store -m 1000000000 -s /tmp/plasma50598
[2m[36m(train_xt pid=30781)[0m self.time_record_filename ============= /tmp/16945951312742183
== Status ==
Current time: 2023-09-13 16:52:19 (running for 00:04:58.79)
Memory usage on this node: 27.2/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:52:24 (running for 00:05:03.80)
Memory usage on this node: 27.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30781)[0m plasma_store -m 100000000 -s /tmp/plasma50657T0
== Status ==
Current time: 2023-09-13 16:52:29 (running for 00:05:08.80)
Memory usage on this node: 27.9/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:52:34 (running for 00:05:13.81)
Memory usage on this node: 28.7/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:52:39 (running for 00:05:18.82)
Memory usage on this node: 28.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:52:44 (running for 00:05:23.82)
Memory usage on this node: 28.9/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:28: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:28: init explorer with id: 1, buf_path: /tmp/plasma_share50657
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:28: Task: T0         | Train_count:        82 | Steps:     21134 | Elapsed time: 38 seconds
[2m[36m(train_xt pid=30691)[0m mean_env_step_ms:         3.829142	mean_explore_ms:        828.904718	mean_inference_ms:        2.483648	mean_loop_time_ms:      187.191665
[2m[36m(train_xt pid=30691)[0m mean_prepare_data_ms:     0.985897	mean_restore_model_ms:   21.821156	mean_train_time_ms:      19.562399	mean_wait_model_ms:     2636.220589
[2m[36m(train_xt pid=30691)[0m mean_wait_sample_ms:    159.795153	step_per_second:             553.0	train_loss:             -33.084679	train_reward_avg:              1.1
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:29: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:31: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=30781)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30781)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   self.run()
[2m[36m(train_xt pid=30781)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:34: Task: T0         | Train_count:         0 | Steps:       253 | Elapsed time: 13 seconds
[2m[36m(train_xt pid=30781)[0m mean_env_step_ms:         3.715688	mean_explore_ms:        913.096786	mean_inference_ms:        3.058153	mean_loop_time_ms:             nan
[2m[36m(train_xt pid=30781)[0m mean_prepare_data_ms:     1.070499	mean_restore_model_ms:   59.361696	mean_train_time_ms:            nan	mean_wait_model_ms:     2862.898469
[2m[36m(train_xt pid=30781)[0m mean_wait_sample_ms:    11380.484104	step_per_second:              18.0	train_loss:              41.617977	train_reward_avg:              0.0
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:36: Task: T0         | Train_count:       122 | Steps:     31407 | Elapsed time: 46 seconds
[2m[36m(train_xt pid=30691)[0m mean_env_step_ms:         3.840794	mean_explore_ms:        834.413985	mean_inference_ms:        2.534209	mean_loop_time_ms:      221.504807
[2m[36m(train_xt pid=30691)[0m mean_prepare_data_ms:     0.959504	mean_restore_model_ms:   16.570174	mean_train_time_ms:      19.014072	mean_wait_model_ms:     1899.391941
[2m[36m(train_xt pid=30691)[0m mean_wait_sample_ms:    194.389188	step_per_second:             672.0	train_loss:              -3.524531	train_reward_avg:         1.409091
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30691)[0m /tmp/plasma47576:   
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:46: broker status timeout!
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:46: Task: T0         | Train_count:       120 | Steps:     30914 | Elapsed time: 1 minutes, 4 seconds
[2m[36m(train_xt pid=30643)[0m mean_env_step_ms:         2.751234	mean_explore_ms:         655.92934	mean_inference_ms:        2.246761	mean_loop_time_ms:      479.609096
[2m[36m(train_xt pid=30643)[0m mean_prepare_data_ms:     0.849462	mean_restore_model_ms:   11.164996	mean_train_time_ms:      20.007777	mean_wait_model_ms:      512.60421
[2m[36m(train_xt pid=30643)[0m mean_wait_sample_ms:    451.727855	step_per_second:             481.0	train_loss:              12.831978	train_reward_avg:         1.527778
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30691)[0m /tmp/plasma_share48294:
[2m[36m(train_xt pid=30691)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:48: Finished train job normally.
[2m[36m(train_xt pid=30691)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30691)[0m [I 2023-09-13 16:52:48,578] Trial 11 finished with value: 416.6666666666667 and parameters: {'env_pool_size': 2, 'env_pool_wait_nums': 2, 'infer_size': 5}. Best is trial 3 with value: 336.8421052631579.
[2m[36m(train_xt pid=30691)[0m /tmp/plasma48294T0: 
[2m[36m(train_xt pid=30691)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30691)[0m Instructions for updating:
[2m[36m(train_xt pid=30691)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:53: Task: T0         | Train_count:        40 | Steps:     10393 | Elapsed time: 32 seconds
[2m[36m(train_xt pid=30781)[0m mean_env_step_ms:         3.386762	mean_explore_ms:        781.625112	mean_inference_ms:        2.533172	mean_loop_time_ms:      427.776623
[2m[36m(train_xt pid=30781)[0m mean_prepare_data_ms:     0.785625	mean_restore_model_ms:   23.489515	mean_train_time_ms:      20.672011	mean_wait_model_ms:     1103.399515
[2m[36m(train_xt pid=30781)[0m mean_wait_sample_ms:    398.985445	step_per_second:             322.0	train_loss:             -25.232079	train_reward_avg:             1.25
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30691)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:55: 
[2m[36m(train_xt pid=30691)[0m **************************************************
[2m[36m(train_xt pid=30691)[0m  XT start work...
[2m[36m(train_xt pid=30691)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945951696102142.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=30691)[0m **************************************************
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:56: init learner with:
[2m[36m(train_xt pid=30691)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=30691)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=30691)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=30691)[0m               'agent_num': 1},
[2m[36m(train_xt pid=30691)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=30691)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=30691)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=30691)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=30691)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=30691)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=30691)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=30691)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=30691)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=30691)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=30691)[0m                           'instance_num': 2,
[2m[36m(train_xt pid=30691)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=30691)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=30691)[0m                           'save_model': True,
[2m[36m(train_xt pid=30691)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=30691)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=30691)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30691)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=30691)[0m                                    'model_config': {'LR': 0.002974385,
[2m[36m(train_xt pid=30691)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=30691)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=30691)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=30691)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=30691)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30691)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=30691)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=30691)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=30691)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=30691)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=30691)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30691)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=30691)[0m                                                 84,
[2m[36m(train_xt pid=30691)[0m                                                 4],
[2m[36m(train_xt pid=30691)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=30691)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=30691)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=30691)[0m              'id': 'ImpalaCnnOpt_now_time_16945951696102142',
[2m[36m(train_xt pid=30691)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=30691)[0m 'env_num': 2,
[2m[36m(train_xt pid=30691)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=30691)[0m                         'size': 2,
[2m[36m(train_xt pid=30691)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=30691)[0m                         'vision': False,
[2m[36m(train_xt pid=30691)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=30691)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=30691)[0m             'now_time': '16945951696102142'},
[2m[36m(train_xt pid=30691)[0m 'gpu': -1,
[2m[36m(train_xt pid=30691)[0m 'group_num': 1,
[2m[36m(train_xt pid=30691)[0m 'lock': 1,
[2m[36m(train_xt pid=30691)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30691)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=30691)[0m                        'model_config': {'LR': 0.002974385,
[2m[36m(train_xt pid=30691)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=30691)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=30691)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=30691)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=30691)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30691)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=30691)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=30691)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=30691)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=30691)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=30691)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30691)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=30691)[0m                                     84,
[2m[36m(train_xt pid=30691)[0m                                     4],
[2m[36m(train_xt pid=30691)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=30691)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=30691)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=30691)[0m                'dummy_user',
[2m[36m(train_xt pid=30691)[0m                'dummy_password')],
[2m[36m(train_xt pid=30691)[0m 'speedup': 3,
[2m[36m(train_xt pid=30691)[0m 'start_core': True}
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:56: Init Broker server info:
[2m[36m(train_xt pid=30691)[0m {'recv': {'port': 39313,
[2m[36m(train_xt pid=30691)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=30691)[0m 'send': [{'port': 21364,
[2m[36m(train_xt pid=30691)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:56: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 39313, 21364, '127.0.0.1', 'info')
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:56: launch local broker with lib success
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:52:56: **********
[2m[36m(train_xt pid=30691)[0m workspace:
[2m[36m(train_xt pid=30691)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945951696102142
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30691)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30691)[0m Instructions for updating:
[2m[36m(train_xt pid=30691)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30643)[0m /tmp/plasma46487:   
[2m[36m(train_xt pid=30691)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:02: set verbosity in broker: info
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:02: init broker with id-0
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:02: share buf: plasma_store -m 400000000 -s /tmp/plasma_share51899
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:03: broker status timeout!
[2m[36m(train_xt pid=30691)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   self.run()
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:03: init explorer with id: 0, buf_path: /tmp/plasma_share51899
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:03: init agent group for: explore
[2m[36m(train_xt pid=30643)[0m /tmp/plasma_share47107:
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:04: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=30643)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:05: Finished train job normally.
[2m[36m(train_xt pid=30643)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30643)[0m [I 2023-09-13 16:53:05,638] Trial 10 finished with value: 332.64033264033264 and parameters: {'env_pool_size': 2, 'env_pool_wait_nums': 2, 'infer_size': 2}. Best is trial 10 with value: 332.64033264033264.
[2m[36m(train_xt pid=30643)[0m /tmp/plasma47107T0: 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:06: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:06: init explorer with id: 1, buf_path: /tmp/plasma_share51899
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:08: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=30643)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30643)[0m Instructions for updating:
[2m[36m(train_xt pid=30643)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:09: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:09: Task: T0         | Train_count:        80 | Steps:     20682 | Elapsed time: 48 seconds
[2m[36m(train_xt pid=30781)[0m mean_env_step_ms:         2.959588	mean_explore_ms:        699.962715	mean_inference_ms:        2.366307	mean_loop_time_ms:      397.311997
[2m[36m(train_xt pid=30781)[0m mean_prepare_data_ms:     0.869846	mean_restore_model_ms:   15.010079	mean_train_time_ms:      21.535885	mean_wait_model_ms:     658.384065
[2m[36m(train_xt pid=30781)[0m mean_wait_sample_ms:     367.31838	step_per_second:             424.0	train_loss:              -48.95113	train_reward_avg:         0.916667
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30643)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:12: 
[2m[36m(train_xt pid=30643)[0m **************************************************
[2m[36m(train_xt pid=30643)[0m  XT start work...
[2m[36m(train_xt pid=30643)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945951866742067.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=30643)[0m **************************************************
[2m[36m(train_xt pid=30691)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30691)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   self.run()
[2m[36m(train_xt pid=30691)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30691)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:12: Task: T0         | Train_count:         0 | Steps:       253 | Elapsed time: 13 seconds
[2m[36m(train_xt pid=30691)[0m mean_env_step_ms:         3.159565	mean_explore_ms:        777.460575	mean_inference_ms:        2.629797	mean_loop_time_ms:             nan
[2m[36m(train_xt pid=30691)[0m mean_prepare_data_ms:     1.128197	mean_restore_model_ms:   49.803853	mean_train_time_ms:            nan	mean_wait_model_ms:     2960.835218
[2m[36m(train_xt pid=30691)[0m mean_wait_sample_ms:    11217.584133	step_per_second:              18.0	train_loss:              -3.562742	train_reward_avg:              0.0
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:13: init learner with:
[2m[36m(train_xt pid=30643)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=30643)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=30643)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=30643)[0m               'agent_num': 1},
[2m[36m(train_xt pid=30643)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=30643)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=30643)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=30643)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=30643)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=30643)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=30643)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=30643)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=30643)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=30643)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=30643)[0m                           'instance_num': 2,
[2m[36m(train_xt pid=30643)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=30643)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=30643)[0m                           'save_model': True,
[2m[36m(train_xt pid=30643)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=30643)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=30643)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30643)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=30643)[0m                                    'model_config': {'LR': 0.002986026,
[2m[36m(train_xt pid=30643)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=30691)[0m  48299
[2m[36m(train_xt pid=30691)[0m  49146
[2m[36m(train_xt pid=30691)[0m good
[2m[36m(train_xt pid=30691)[0m log filename ================== /tmp/16945951002764938
[2m[36m(train_xt pid=30691)[0m step_per_second ============ 672.0
[2m[36m(train_xt pid=30691)[0m tune_cost =================== True
[2m[36m(train_xt pid=30691)[0m  49153
== Status ==
Current time: 2023-09-13 16:52:49 (running for 00:05:28.83)
Memory usage on this node: 26.6/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30691)[0m =======================env_pool_size======================2
[2m[36m(train_xt pid=30691)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=30691)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=30691)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945951696102142.yaml
[2m[36m(train_xt pid=30691)[0m run_log ======================== /tmp/test_opt_bys16945951696102142.log
== Status ==
Current time: 2023-09-13 16:52:54 (running for 00:05:33.83)
Memory usage on this node: 26.9/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30691)[0m start_core ======================================== True
[2m[36m(train_xt pid=30691)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=30691)[0m plasma_store -m 1000000000 -s /tmp/plasma51852
[2m[36m(train_xt pid=30691)[0m self.time_record_filename ============= /tmp/16945951696102142
== Status ==
Current time: 2023-09-13 16:52:59 (running for 00:05:38.84)
Memory usage on this node: 27.7/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30643)[0m  47110
[2m[36m(train_xt pid=30691)[0m plasma_store -m 100000000 -s /tmp/plasma51899T0
[2m[36m(train_xt pid=30643)[0m  47991
== Status ==
Current time: 2023-09-13 16:53:04 (running for 00:05:43.84)
Memory usage on this node: 28.0/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30643)[0m good
[2m[36m(train_xt pid=30643)[0m log filename ================== /tmp/16945950925582104
[2m[36m(train_xt pid=30643)[0m step_per_second ============ 481.0
[2m[36m(train_xt pid=30643)[0m tune_cost =================== True
[2m[36m(train_xt pid=30643)[0m  48001
[2m[36m(train_xt pid=30643)[0m =======================env_pool_size======================2
[2m[36m(train_xt pid=30643)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=30643)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=30643)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945951866742067.yaml
[2m[36m(train_xt pid=30643)[0m run_log ======================== /tmp/test_opt_bys16945951866742067.log
== Status ==
Current time: 2023-09-13 16:53:09 (running for 00:05:48.85)
Memory usage on this node: 26.4/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30643)[0m start_core ======================================== True
[2m[36m(train_xt pid=30643)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=30643)[0m plasma_store -m 1000000000 -s /tmp/plasma52819
[2m[36m(train_xt pid=30643)[0m self.time_record_filename ============= /tmp/16945951866742067
== Status ==
Current time: 2023-09-13 16:53:14 (running for 00:05:53.85)
Memory usage on this node: 27.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30643)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=30643)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=30643)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=30643)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30643)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=30643)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=30643)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=30643)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=30643)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=30643)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30643)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=30643)[0m                                                 84,
[2m[36m(train_xt pid=30643)[0m                                                 4],
[2m[36m(train_xt pid=30643)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=30643)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=30643)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=30643)[0m              'id': 'ImpalaCnnOpt_now_time_16945951866742067',
[2m[36m(train_xt pid=30643)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=30643)[0m 'env_num': 2,
[2m[36m(train_xt pid=30643)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=30643)[0m                         'size': 2,
[2m[36m(train_xt pid=30643)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=30643)[0m                         'vision': False,
[2m[36m(train_xt pid=30643)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=30643)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=30643)[0m             'now_time': '16945951866742067'},
[2m[36m(train_xt pid=30643)[0m 'gpu': -1,
[2m[36m(train_xt pid=30643)[0m 'group_num': 1,
[2m[36m(train_xt pid=30643)[0m 'lock': 1,
[2m[36m(train_xt pid=30643)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30643)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=30643)[0m                        'model_config': {'LR': 0.002986026,
[2m[36m(train_xt pid=30643)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=30643)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=30643)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=30643)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=30643)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30643)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=30643)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=30643)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=30643)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=30643)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=30643)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30643)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=30643)[0m                                     84,
[2m[36m(train_xt pid=30643)[0m                                     4],
[2m[36m(train_xt pid=30643)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=30643)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=30643)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=30643)[0m                'dummy_user',
[2m[36m(train_xt pid=30643)[0m                'dummy_password')],
[2m[36m(train_xt pid=30643)[0m 'speedup': 3,
[2m[36m(train_xt pid=30643)[0m 'start_core': True}
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:13: Init Broker server info:
[2m[36m(train_xt pid=30643)[0m {'recv': {'port': 27890,
[2m[36m(train_xt pid=30643)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=30643)[0m 'send': [{'port': 30517,
[2m[36m(train_xt pid=30643)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:13: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 27890, 30517, '127.0.0.1', 'info')
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:13: launch local broker with lib success
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:13: **********
[2m[36m(train_xt pid=30643)[0m workspace:
[2m[36m(train_xt pid=30643)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945951866742067
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30643)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30643)[0m Instructions for updating:
[2m[36m(train_xt pid=30643)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30643)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:19: set verbosity in broker: info
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:19: init broker with id-0
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:19: share buf: plasma_store -m 400000000 -s /tmp/plasma_share53126
[2m[36m(train_xt pid=30643)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   self.run()
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:19: init explorer with id: 0, buf_path: /tmp/plasma_share53126
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:19: init agent group for: explore
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:21: explorer-0 start with sync interval-1
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:22: speedup(3): binding env 0 to CPU 1
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:22: init explorer with id: 1, buf_path: /tmp/plasma_share53126
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:24: explorer-1 start with sync interval-1
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:25: speedup(3): binding env 1 to CPU 2
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:26: Task: T0         | Train_count:       120 | Steps:     30956 | Elapsed time: 1 minutes, 5 seconds
[2m[36m(train_xt pid=30781)[0m mean_env_step_ms:         2.854891	mean_explore_ms:         673.18413	mean_inference_ms:        2.279232	mean_loop_time_ms:      412.830234
[2m[36m(train_xt pid=30781)[0m mean_prepare_data_ms:     0.871444	mean_restore_model_ms:   11.693226	mean_train_time_ms:      21.130657	mean_wait_model_ms:     509.604679
== Status ==
Current time: 2023-09-13 16:53:19 (running for 00:05:58.86)
Memory usage on this node: 28.4/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30643)[0m plasma_store -m 100000000 -s /tmp/plasma53126T0
== Status ==
Current time: 2023-09-13 16:53:24 (running for 00:06:03.87)
Memory usage on this node: 28.5/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:53:29 (running for 00:06:08.87)
Memory usage on this node: 29.3/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:53:34 (running for 00:06:13.88)
Memory usage on this node: 29.4/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:53:39 (running for 00:06:18.88)
Memory usage on this node: 29.4/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

== Status ==
Current time: 2023-09-13 16:53:44 (running for 00:06:23.89)
Memory usage on this node: 29.5/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30781)[0m  50659
[2m[36m(train_xt pid=30781)[0m  51218
[2m[36m(train_xt pid=30781)[0m good
[2m[36m(train_xt pid=30781)[0m log filename ================== /tmp/16945951312742183
[2m[36m(train_xt pid=30781)[0m step_per_second ============ 474.0
[2m[36m(train_xt pid=30781)[0m tune_cost =================== True
[2m[36m(train_xt pid=30781)[0m  51225
== Status ==
Current time: 2023-09-13 16:53:49 (running for 00:06:28.89)
Memory usage on this node: 27.6/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30781)[0m =======================env_pool_size======================2
[2m[36m(train_xt pid=30781)[0m =======================env_pool_wait_nums======================2
[2m[36m(train_xt pid=30781)[0m get max throughput start_core============================= True
[2m[36m(train_xt pid=30781)[0m mean_wait_sample_ms:    383.036876	step_per_second:             474.0	train_loss:             182.156052	train_reward_avg:         0.944444
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:29: Task: T0         | Train_count:        40 | Steps:     10392 | Elapsed time: 30 seconds
[2m[36m(train_xt pid=30691)[0m mean_env_step_ms:         2.971992	mean_explore_ms:        692.795481	mean_inference_ms:        2.281505	mean_loop_time_ms:      433.682692
[2m[36m(train_xt pid=30691)[0m mean_prepare_data_ms:     0.882876	mean_restore_model_ms:   17.533404	mean_train_time_ms:      21.357989	mean_wait_model_ms:     994.017703
[2m[36m(train_xt pid=30691)[0m mean_wait_sample_ms:    403.745937	step_per_second:             340.0	train_loss:             -96.692314	train_reward_avg:         1.666667
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30643)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:176: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   broker_item.send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30643)[0m /home/tank/miniconda3/envs/openmmlab/lib/python3.7/threading.py:926: FutureWarning: 'pyarrow.deserialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   self.run()
[2m[36m(train_xt pid=30643)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:178: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30643)[0m   self.send_broker[broker_id].send(recv_data['ctr_info'], recv_data['data'])
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:30: Task: T0         | Train_count:         2 | Steps:       732 | Elapsed time: 14 seconds
[2m[36m(train_xt pid=30643)[0m mean_env_step_ms:         4.296533	mean_explore_ms:        958.539605	mean_inference_ms:        2.880039	mean_loop_time_ms:      563.192368
[2m[36m(train_xt pid=30643)[0m mean_prepare_data_ms:     0.845591	mean_restore_model_ms:    57.26707	mean_train_time_ms:     637.178898	mean_wait_model_ms:     2963.65571
[2m[36m(train_xt pid=30643)[0m mean_wait_sample_ms:    4054.866076	step_per_second:              51.0	train_loss:             121.499527	train_reward_avg:              3.0
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30781)[0m /tmp/plasma50598:   
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:46: broker status timeout!
[2m[36m(train_xt pid=30781)[0m /tmp/plasma_share50657:
[2m[36m(train_xt pid=30781)[0m /home/xys/xingtian-test/xingtian-project-pipeline_impala/xt/framework/broker.py:232: FutureWarning: 'pyarrow.serialize' is deprecated as of 2.0.0 and will be removed in a future version. Use pickle or the pyarrow IPC functionality instead.
[2m[36m(train_xt pid=30781)[0m   broker_item.send(close_cmd['ctr_info'], close_cmd['data'])
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:48: Finished train job normally.
[2m[36m(train_xt pid=30781)[0m sh: 1: kill: No such process
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m [I 2023-09-13 16:53:49,016] Trial 12 finished with value: 337.55274261603375 and parameters: {'env_pool_size': 2, 'env_pool_wait_nums': 2, 'infer_size': 2}. Best is trial 10 with value: 332.64033264033264.
[2m[36m(train_xt pid=30691)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:49: Task: T0         | Train_count:        80 | Steps:     20558 | Elapsed time: 50 seconds
[2m[36m(train_xt pid=30691)[0m mean_env_step_ms:          3.33818	mean_explore_ms:        738.043408	mean_inference_ms:        2.289349	mean_loop_time_ms:      469.111097
[2m[36m(train_xt pid=30691)[0m mean_prepare_data_ms:     0.947571	mean_restore_model_ms:   12.640576	mean_train_time_ms:       21.43681	mean_wait_model_ms:     665.704012
[2m[36m(train_xt pid=30691)[0m mean_wait_sample_ms:    438.781595	step_per_second:             410.0	train_loss:              83.566986	train_reward_avg:         1.590909
[2m[36m(train_xt pid=30691)[0m 
[2m[36m(train_xt pid=30781)[0m /tmp/plasma50657T0: 
[2m[36m(train_xt pid=30643)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:49: Task: T0         | Train_count:        42 | Steps:     10908 | Elapsed time: 33 seconds
[2m[36m(train_xt pid=30643)[0m mean_env_step_ms:         3.862823	mean_explore_ms:        823.391914	mean_inference_ms:        2.414189	mean_loop_time_ms:      453.886807
[2m[36m(train_xt pid=30643)[0m mean_prepare_data_ms:     0.831509	mean_restore_model_ms:   18.428028	mean_train_time_ms:      19.225192	mean_wait_model_ms:      896.25597
[2m[36m(train_xt pid=30643)[0m mean_wait_sample_ms:    427.209997	step_per_second:             323.0	train_loss:               27.72526	train_reward_avg:         0.583333
[2m[36m(train_xt pid=30643)[0m 
[2m[36m(train_xt pid=30781)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30781)[0m Instructions for updating:
[2m[36m(train_xt pid=30781)[0m non-resource variables are not supported in the long term
[2m[36m(train_xt pid=30781)[0m WARNING: Logging before flag parsing goes to stderr.
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:56: 
[2m[36m(train_xt pid=30781)[0m **************************************************
[2m[36m(train_xt pid=30781)[0m  XT start work...
[2m[36m(train_xt pid=30781)[0m Namespace(config_file='/home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945952300503526.yaml', env_num=None, gpu=-1, group_num=None, lock=1, save_to_s3=None, size=None, speedup=None, start_core=None, task='train', verbosity='info', wait_num=None)
[2m[36m(train_xt pid=30781)[0m **************************************************
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:57: init learner with:
[2m[36m(train_xt pid=30781)[0m {'agent_para': {'agent_config': {'complete_step': 40000,
[2m[36m(train_xt pid=30781)[0m                               'max_steps': 128},
[2m[36m(train_xt pid=30781)[0m               'agent_name': 'AtariImpalaOpt',
[2m[36m(train_xt pid=30781)[0m               'agent_num': 1},
[2m[36m(train_xt pid=30781)[0m 'alg_para': {'alg_config': {'BATCH_SIZE': 512,
[2m[36m(train_xt pid=30781)[0m                           'agent_num': 1,
[2m[36m(train_xt pid=30781)[0m                           'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                           'env_attr': {'agent_ids': [0],
[2m[36m(train_xt pid=30781)[0m                                       'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                                       'episode_limit': 300,
[2m[36m(train_xt pid=30781)[0m                                       'n_actions': 7,
[2m[36m(train_xt pid=30781)[0m                                       'n_agents': 2,
[2m[36m(train_xt pid=30781)[0m                                       'obs_shape': 17,
[2m[36m(train_xt pid=30781)[0m                                       'state_shape': 27},
[2m[36m(train_xt pid=30781)[0m                           'instance_num': 3,
[2m[36m(train_xt pid=30781)[0m                           'prepare_times_per_train': 1,
[2m[36m(train_xt pid=30781)[0m                           'save_interval': 5,
[2m[36m(train_xt pid=30781)[0m                           'save_model': True,
[2m[36m(train_xt pid=30781)[0m                           'train_per_checkpoint': 1},
[2m[36m(train_xt pid=30781)[0m             'alg_name': 'IMPALAOpt',
[2m[36m(train_xt pid=30781)[0m             'model_info': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30781)[0m                                    'input_dtype': 'uint8',
[2m[36m(train_xt pid=30781)[0m                                    'model_config': {'LR': 0.004760203,
[2m[36m(train_xt pid=30781)[0m                                                    'action_type': 'Categorical',
[2m[36m(train_xt pid=30781)[0m                                                    'agent_ids': [0],
[2m[36m(train_xt pid=30781)[0m                                                    'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                                                    'episode_limit': 300,
[2m[36m(train_xt pid=30781)[0m                                                    'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30781)[0m                                                    'n_actions': 7,
[2m[36m(train_xt pid=30781)[0m                                                    'n_agents': 2,
[2m[36m(train_xt pid=30781)[0m                                                    'obs_shape': 17,
[2m[36m(train_xt pid=30781)[0m                                                    'sample_batch_step': 128,
[2m[36m(train_xt pid=30781)[0m                                                    'state_shape': 27},
[2m[36m(train_xt pid=30781)[0m                                    'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30781)[0m                                    'state_dim': [84,
[2m[36m(train_xt pid=30781)[0m                                                 84,
[2m[36m(train_xt pid=30781)[0m                                                 4],
[2m[36m(train_xt pid=30781)[0m                                    'state_mean': 0.0,
[2m[36m(train_xt pid=30781)[0m                                    'state_std': 255.0}}},
[2m[36m(train_xt pid=30781)[0m 'benchmark': {'archive_root': '/home/xys/avan/xt_archive',
[2m[36m(train_xt pid=30781)[0m              'id': 'ImpalaCnnOpt_now_time_16945952300503526',
[2m[36m(train_xt pid=30781)[0m              'log_interval_to_train': 2},
[2m[36m(train_xt pid=30781)[0m 'env_num': 3,
[2m[36m(train_xt pid=30781)[0m 'env_para': {'env_info': {'name': 'BreakoutNoFrameskip-v4',
[2m[36m(train_xt pid=30781)[0m                         'size': 2,
[2m[36m(train_xt pid=30781)[0m                         'vector_env_size': 2,
[2m[36m(train_xt pid=30781)[0m                         'vision': False,
[2m[36m(train_xt pid=30781)[0m                         'wait_num': 2},
[2m[36m(train_xt pid=30781)[0m             'env_name': 'EnvPool',
[2m[36m(train_xt pid=30781)[0m             'now_time': '16945952300503526'},
[2m[36m(train_xt pid=30781)[0m 'gpu': -1,
[2m[36m(train_xt pid=30781)[0m 'group_num': 1,
[2m[36m(train_xt pid=30781)[0m 'lock': 1,
[2m[36m(train_xt pid=30781)[0m 'model_para': {'actor': {'action_dim': 4,
[2m[36m(train_xt pid=30781)[0m                        'input_dtype': 'uint8',
[2m[36m(train_xt pid=30781)[0m                        'model_config': {'LR': 0.004760203,
[2m[36m(train_xt pid=30781)[0m                                        'action_type': 'Categorical',
[2m[36m(train_xt pid=30781)[0m                                        'agent_ids': [0],
[2m[36m(train_xt pid=30781)[0m                                        'api_type': 'standalone',
[2m[36m(train_xt pid=30781)[0m                                        'episode_limit': 300,
[2m[36m(train_xt pid=30781)[0m                                        'grad_norm_clip': 40.0,
[2m[36m(train_xt pid=30781)[0m                                        'n_actions': 7,
[2m[36m(train_xt pid=30781)[0m                                        'n_agents': 2,
[2m[36m(train_xt pid=30781)[0m                                        'obs_shape': 17,
[2m[36m(train_xt pid=30781)[0m                                        'sample_batch_step': 128,
[2m[36m(train_xt pid=30781)[0m                                        'state_shape': 27},
[2m[36m(train_xt pid=30781)[0m                        'model_name': 'ImpalaCnnOpt',
[2m[36m(train_xt pid=30781)[0m                        'state_dim': [84,
[2m[36m(train_xt pid=30781)[0m                                     84,
[2m[36m(train_xt pid=30781)[0m                                     4],
[2m[36m(train_xt pid=30781)[0m                        'state_mean': 0.0,
[2m[36m(train_xt pid=30781)[0m                        'state_std': 255.0}},
[2m[36m(train_xt pid=30781)[0m 'node_config': [('127.0.0.1',
[2m[36m(train_xt pid=30781)[0m                'dummy_user',
[2m[36m(train_xt pid=30781)[0m                'dummy_password')],
[2m[36m(train_xt pid=30781)[0m 'speedup': 3,
[2m[36m(train_xt pid=30781)[0m 'start_core': True}
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:57: Init Broker server info:
[2m[36m(train_xt pid=30781)[0m {'recv': {'port': 22044,
[2m[36m(train_xt pid=30781)[0m         'type': 'PULL'},
[2m[36m(train_xt pid=30781)[0m 'send': [{'port': 26938,
[2m[36m(train_xt pid=30781)[0m         'type': 'PUSH'}]}
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:57: start launching Broker with: import xt; from xt import start_broker; start_broker(0, 22044, 26938, '127.0.0.1', 'info')
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:57: launch local broker with lib success
[2m[36m(train_xt pid=30781)[0m INFO [tank-ProLiant-DL580-Gen9 192.168.1.128] Sep 13 16:53:57: **********
[2m[36m(train_xt pid=30781)[0m workspace:
[2m[36m(train_xt pid=30781)[0m 	/home/xys/avan/xt_archive/ImpalaCnnOpt_now_time_16945952300503526
[2m[36m(train_xt pid=30781)[0m 
[2m[36m(train_xt pid=30781)[0m WARNING:tensorflow:From /home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
[2m[36m(train_xt pid=30781)[0m Instructions for updating:
[2m[36m(train_xt pid=30781)[0m non-resource variables are not supported in the long term
2023-09-13 16:54:01,465	WARNING tune.py:687 -- Stop signal received (e.g. via SIGINT/Ctrl+C), ending Ray Tune run. This will try to checkpoint the experiment state one last time. Press CTRL+C (or send SIGINT/SIGKILL/SIGTERM) to skip. 

[2m[36m(train_xt pid=30781)[0m yaml_filepath ================== /home/xys/xingtian-test/xingtian-project-pipeline_impala/tests/avan/train_yaml/train_yaml_imopt/train_yaml_testImpalaCnnOpt_now_time_16945952300503526.yaml
[2m[36m(train_xt pid=30781)[0m run_log ======================== /tmp/test_opt_bys16945952300503526.log
== Status ==
Current time: 2023-09-13 16:53:54 (running for 00:06:33.90)
Memory usage on this node: 28.0/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

[2m[36m(train_xt pid=30781)[0m start_core ======================================== True
[2m[36m(train_xt pid=30781)[0m 	[WARN] start_core % 10 == 0 recommended.
[2m[36m(train_xt pid=30781)[0m plasma_store -m 1000000000 -s /tmp/plasma54296
[2m[36m(train_xt pid=30781)[0m self.time_record_filename ============= /tmp/16945952300503526
== Status ==
Current time: 2023-09-13 16:53:59 (running for 00:06:38.90)
Memory usage on this node: 28.8/251.8 GiB
PopulationBasedTraining: 0 checkpoints, 0 perturbs
Resources requested: 30.0/80 CPUs, 1.2000000000000002/3 GPUs, 0.0/160.8 GiB heap, 0.0/72.9 GiB objects (0.0/1.0 accelerator_type:X)
Result logdir: /tmp/ray_results/pb2_test4
Number of trials: 4/4 (1 ERROR, 3 RUNNING)
Number of errored trials: 1
+----------------------+--------------+-------------------------------------------------------------------------------------------+
| Trial name           |   # failures | error file                                                                                |
|----------------------+--------------+-------------------------------------------------------------------------------------------|
| train_xt_26987_00000 |            1 | /tmp/ray_results/pb2_test4/train_xt_26987_00000_0_lr=0.0050_2023-09-13_16-47-20/error.txt |
+----------------------+--------------+-------------------------------------------------------------------------------------------+

Traceback (most recent call last):
  File "test_xt_with_tune.py", line 263, in <module>
    results_grid = tuner.fit()
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/tuner.py", line 234, in fit
    return self._local_tuner.fit()
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/impl/tuner_internal.py", line 283, in fit
    analysis = self._fit_internal(trainable, param_space)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/impl/tuner_internal.py", line 381, in _fit_internal
    **args,
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/tune.py", line 722, in run
    runner.step()
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/execution/trial_runner.py", line 879, in step
    self._wait_and_handle_event(next_trial)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/execution/trial_runner.py", line 823, in _wait_and_handle_event
    self._live_trials, next_trial is not None
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/tune/execution/ray_trial_executor.py", line 953, in get_next_executor_event
    futures_to_wait, num_returns=1, timeout=self._get_next_event_wait
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/_private/client_mode_hook.py", line 105, in wrapper
    return func(*args, **kwargs)
  File "/home/tank/miniconda3/envs/openmmlab/lib/python3.7/site-packages/ray/_private/worker.py", line 2471, in wait
    fetch_local,
  File "python/ray/_raylet.pyx", line 1414, in ray._raylet.CoreWorker.wait
  File "python/ray/_raylet.pyx", line 173, in ray._raylet.check_status
KeyboardInterrupt
